import{r as w,j as e,c as Fi,R as Vi}from"./vendor-react-QK7G4MDf.js";import{o as ke,s as me,c as Q,a as le,r as Di}from"./vendor-zod-Rs9PvQDD.js";import{V as Je}from"./vendor-CElDmkQT.js";import{u as Pi,i as Bi,a as Mi,b as Hi,c as _i,d as Ui,e as Yi,f as Oi,g as Gi,h as Ki,j as qi,k as Zi,l as Ji}from"./vendor-echarts-Cbwmcc-H.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();const Qi={datasets:{NNGYK:{name:"NNGYK (Hungary)",description:"Aggregated national respiratory surveillance (ILI focus)."}},years:[2025],viruses:["ILI (flu-like illness)"],weekly:[{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:40,cases:2100,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:42,cases:2480,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:44,cases:3120,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:46,cases:3890,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:48,cases:4510,region:"National"}],sariWeekly:[{year:2025,week:40,admissions:94,icu:10},{year:2025,week:42,admissions:120,icu:14},{year:2025,week:44,admissions:180,icu:22},{year:2025,week:46,admissions:220,icu:28}],virologyDetections:[{year:2025,week:40,virus:"SARS-CoV-2",detections:20},{year:2025,week:46,virus:"Influenza A(H1N1pdm09)",detections:2},{year:2025,week:46,virus:"RSV",detections:1}],virologyPositivity:[{year:2025,week:40,virus:"SARS-CoV-2",positivity:19.4},{year:2025,week:46,virus:"Influenza",positivity:1.5},{year:2025,week:46,virus:"RSV",positivity:.7}],variants:[]},Xi={2024:"2024-2025",2025:"2025-2026"},es=ke({dataset:me().optional(),year:Q.number(),virus:me().optional(),week:Q.number(),cases:Q.number().nullable().optional(),region:me().optional()}).passthrough(),ts=ke({year:Q.number(),week:Q.number(),admissions:Q.number().nullable().optional(),icu:Q.number().nullable().optional()}).passthrough(),jt=ke({year:Q.number().optional(),week:Q.number(),virus:me().optional(),detections:Q.number().nullable().optional()}).passthrough(),It=ke({year:Q.number().optional(),week:Q.number(),virus:me().optional(),positivity:Q.number().nullable().optional()}).passthrough(),nt=ke({years:le(Q.number()).default([]),weekly:le(es).default([]),sariWeekly:le(ts).default([]),virologyDetections:le(jt).default([]),virologyPositivity:le(It).default([]),ervissDetections:le(jt).default([]),ervissPositivity:le(It).default([])}).passthrough(),is=Di(me()).default({}),zt="NNGYK",Qt="ILI (flu-like illness)",ce="__all_viruses__",X="__influenza_all__",Ie=28900,xe=40,Xt=20,ss=nt.parse(Qi),ns=is.parse(Xi);function Te(t){return{source:"bundled",respiratoryData:ss,seasonLabels:ns,note:t}}function At(t){return t>=xe?t:t+53}function re(t,i){return At(t)-At(i)}function ei(t){return t>=xe||t<=Xt}function ti(t,i,n){return ei(i)?t===n&&i>=xe||t===n+1&&i<=Xt:!1}function Tt(t,i){return!Number.isFinite(t)||!Number.isFinite(i)||!ei(i)?null:i>=xe?t:t-1}function rs(t){const i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),n=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-n);const s=i.getUTCFullYear(),l=new Date(Date.UTC(s,0,1)),c=Math.ceil(((i.getTime()-l.getTime())/864e5+1)/7);return{year:s,week:c}}function as(t=new Date){const{year:i,week:n}=rs(t);return n>=xe?i:i-1}function oe(t){return`W${String(t).padStart(2,"0")}`}function Qe(t,i){const n=t[String(i)];return n||`${i}-${i+1}`}function Se(t){if(!t)return"";const i=String(t).normalize("NFKC").replace(/\u00a0/g," ").replace(/\s+/g," ").trim();return i?/^ili\s*\(\s*flu[-\s]*like illness\s*\)$/i.test(i)?Qt:/^influenza$/i.test(i)?"Influenza":/^influenza\s+a$/i.test(i)?"Influenza A":/^influenza\s+b$/i.test(i)?"Influenza B":/^influenza\s+untyped$/i.test(i)?"Influenza (untyped)":/^influenza\s+a\s*\(\s*h1n1pdm09\s*\)$/i.test(i)||/^influenza\s+a\s*\(\s*h1pdm09\s*\)$/i.test(i)||/^influenza\s+a\s+h1n1pdm09$/i.test(i)||/^influenza\s+a\s+h1pdm09$/i.test(i)?"Influenza A(H1N1pdm09)":/^influenza\s+a\s*\(\s*h3\s*\)$/i.test(i)||/^influenza\s+a\s+h3$/i.test(i)?"Influenza A(H3)":/^influenza\s+a\s*\(\s*nt\s*\)$/i.test(i)||/^influenza\s+a\s+nt$/i.test(i)?"Influenza A(NT)":/^a\s*\(\s*h1\s*\)\s*pdm09$/i.test(i)?"Influenza A(H1N1pdm09)":/^a\s*\(\s*h3\s*\)$/i.test(i)?"Influenza A(H3)":/^a\s*\(\s*unknown\s*\)$/i.test(i)?"Influenza A(NT)":/^sars[-\s]*cov[-\s]*2$/i.test(i)?"SARS-CoV-2":/^rs[-\s]*v(i[íi]rus)?$/i.test(i)?"RSV":i:""}function os(t){return t===X?!1:Se(t).startsWith("Influenza")}function ls(t,i){const n=new Map;for(const l of t.virologyDetections){const c=Number(l.year);if(Number.isFinite(c)&&c!==i)continue;const d=Number(l.week);if(!Number.isFinite(d))continue;const u=Number(l.detections??0);if(!Number.isFinite(u))continue;const m=Se(l.virus);if(!m)continue;const g=`${d}::${m}`,v=n.get(g);if(v){v.detections+=u;continue}n.set(g,{week:d,label:oe(d),virus:m,detections:u})}const s=new Map;for(const l of n.values())os(l.virus)&&s.set(l.week,(s.get(l.week)??0)+l.detections);for(const[l,c]of s.entries())!Number.isFinite(c)||c<=0||n.set(`${l}::${X}`,{week:l,label:oe(l),virus:X,detections:c});return Array.from(n.values()).sort((l,c)=>re(l.week,c.week)||l.virus.localeCompare(c.virus))}function cs(t,i){const n=new Map;for(const s of t.virologyPositivity){const l=Number(s.year);if(Number.isFinite(l)&&l!==i)continue;const c=Number(s.week);if(!Number.isFinite(c))continue;const d=Number(s.positivity??0);if(!Number.isFinite(d))continue;const u=Se(s.virus);if(!u)continue;const m=`${c}::${u}`,g=n.get(m);(!g||d>g.positivity)&&n.set(m,{week:c,label:oe(c),virus:u,positivity:d})}return Array.from(n.values()).sort((s,l)=>re(s.week,l.week)||s.virus.localeCompare(l.virus))}function us(t,i){const n=ls(t,i),s=cs(t,i),l=Array.from(new Set(n.map(u=>u.virus))).sort((u,m)=>u===X?-1:m===X?1:u.localeCompare(m)),c=Array.from(new Set(n.map(u=>u.week).concat(s.map(u=>u.week)).filter(u=>Number.isFinite(u)))),d=c.length?c.reduce((u,m)=>re(m,u)>0?m:u,c[0]):null;return{available:n.length>0||s.length>0,latestWeek:d,availableDetectionViruses:l,detectionRows:n,positivityRows:s}}function ds(t,i){const n=new Map;for(const s of t.ervissDetections){const l=Number(s.year);if(!Number.isFinite(l))continue;const c=Number(s.week);if(!Number.isFinite(c)||!ti(l,c,i))continue;const d=Number(s.detections??0);if(!Number.isFinite(d))continue;const u=Se(s.virus);if(!u)continue;const m=`${c}::${u}`,g=n.get(m);if(g){g.detections+=d;continue}n.set(m,{week:c,label:oe(c),virus:u,detections:d})}return Array.from(n.values()).sort((s,l)=>re(s.week,l.week)||s.virus.localeCompare(l.virus))}function gs(t,i){const n=new Map;for(const s of t.ervissPositivity){const l=Number(s.year);if(!Number.isFinite(l))continue;const c=Number(s.week);if(!Number.isFinite(c)||!ti(l,c,i))continue;const d=Number(s.positivity??0);if(!Number.isFinite(d))continue;const u=Se(s.virus);if(!u)continue;const m=`${c}::${u}`,g=n.get(m);(!g||d>g.positivity)&&n.set(m,{week:c,label:oe(c),virus:u,positivity:d})}return Array.from(n.values()).sort((s,l)=>re(s.week,l.week)||s.virus.localeCompare(l.virus))}function hs(t){const i=Array.from(new Set(t.ervissDetections.map(u=>Tt(Number(u.year),Number(u.week))).concat(t.ervissPositivity.map(u=>Tt(Number(u.year),Number(u.week)))).filter(u=>typeof u=="number"&&Number.isFinite(u)))).sort((u,m)=>u-m);if(!i.length)return{available:!1,availableYears:[],targetYear:null,latestWeek:null,detectionRows:[],positivityRows:[]};const n=as(),s=i.includes(n)?n:i[i.length-1],l=ds(t,s),c=gs(t,s),d=(()=>{const u=l.map(m=>m.week).concat(c.map(m=>m.week));return u.length?u.reduce((m,g)=>re(g,m)>0?g:m,u[0]):null})();return{available:l.length>0||c.length>0,availableYears:i,targetYear:s,latestWeek:d,detectionRows:l,positivityRows:c}}function Xe(t,i){const n=new Map;for(const s of t.weekly){if((s.dataset??zt)!==zt||s.year!==i||s.virus!==Qt)continue;const l=Number(s.week);if(!Number.isFinite(l))continue;const c=Number(s.cases??0);n.set(l,(n.get(l)??0)+(Number.isFinite(c)?c:0))}return Array.from(n.entries()).sort((s,l)=>re(s[0],l[0])).map(([s,l])=>({week:s,label:oe(s),cases:l}))}function et(t,i){const n=new Map;for(const s of t.sariWeekly){if(s.year!==i)continue;const l=Number(s.week);if(!Number.isFinite(l))continue;const c=Number(s.admissions??0),d=Number(s.icu??0),u=n.get(l)??{admissions:0,icu:0};u.admissions+=Number.isFinite(c)?c:0,u.icu+=Number.isFinite(d)?d:0,n.set(l,u)}return Array.from(n.entries()).sort((s,l)=>re(s[0],l[0])).map(([s,l])=>({week:s,label:oe(s),admissions:l.admissions,icu:l.icu}))}function ms(t){const i=new Set(t.years);for(const n of t.weekly)i.add(Number(n.year));for(const n of t.sariWeekly)i.add(Number(n.year));return Array.from(i).filter(n=>Number.isFinite(n)).sort((n,s)=>n-s)}function de(t,i){const n=new Map;for(const s of t){const l=Number(s.week);if(!Number.isFinite(l))continue;const c=Number(i(s));Number.isFinite(c)&&n.set(l,(n.get(l)??0)+c)}return n}function fs(t){const i=new Set;for(const n of t)for(const s of n.keys())Number.isFinite(s)&&i.add(s);return Array.from(i).sort((n,s)=>re(n,s))}function ps(t,i,n){for(let s=n.length-1;s>=0;s-=1){const l=n[s],c=t.get(l),d=i.get(l);if(!(typeof c!="number"||typeof d!="number")&&!(!Number.isFinite(c)||!Number.isFinite(d)||c===0))return(d-c)/c*100}return null}function ge(){return{points:[],latestDeltaPercent:null}}function Me(t,i,n){return{points:n.map(l=>{const c=t.has(l)?t.get(l)??null:null,d=i.has(l)?i.get(l)??null:null,u=typeof c=="number"?c:null,m=typeof d=="number"?d:null,g=u!=null&&m!=null&&Number.isFinite(u)&&Number.isFinite(m)&&u!==0?(m-u)/u*100:null;return{week:l,label:oe(l),previous:c,current:d,deltaPercent:g}}),latestDeltaPercent:ps(t,i,n)}}function vs(t,i,n,s){const l=s.includes(n-1)?n-1:null,c=Qe(i,n),d=l==null?null:Qe(i,l);if(l==null)return{available:!1,compareYear:null,compareSeasonLabel:null,currentSeasonLabel:c,ili:ge(),sariAdmissions:ge(),sariIcu:ge()};const u=Xe(t,l),m=Xe(t,n),g=et(t,l),v=et(t,n),p=de(u,x=>x.cases),f=de(m,x=>x.cases),k=de(g,x=>x.admissions),E=de(v,x=>x.admissions),h=de(g,x=>x.icu),N=de(v,x=>x.icu),S=fs([p,f,k,E,h,N]);return S.length?{available:!0,compareYear:l,compareSeasonLabel:d,currentSeasonLabel:c,ili:Me(p,f,S),sariAdmissions:Me(k,E,S),sariIcu:Me(h,N,S)}:{available:!1,compareYear:l,compareSeasonLabel:d,currentSeasonLabel:c,ili:ge(),sariAdmissions:ge(),sariIcu:ge()}}function bs(t,i){const{respiratoryData:n,seasonLabels:s}=t,l=ms(n),c=l.length?l[l.length-1]:new Date().getFullYear(),d=typeof i=="number"&&Number.isFinite(i)&&l.includes(i)?i:c,u=Xe(n,d),m=et(n,d),g=us(n,d),v=hs(n),p=vs(n,s,d,l),f=u.reduce((x,j)=>x+j.cases,0),k=u.reduce((x,j)=>!x||j.cases>x.cases?j:x,null),E=u.length?u[u.length-1]:null,h=m.length?m[m.length-1]:null,N=(()=>{if(u.length<2)return null;for(let x=1;x<u.length;x+=1)if(u[x].cases>=Ie&&u[x-1].cases<Ie)return u[x].week;return null})(),S=[];return u.length||S.push("No ILI rows for this season in loaded source."),m.length||S.push("No SARI rows for this season in loaded source."),g.available||S.push("No virology rows for this season in loaded source."),v.available||S.push("No EU/EEA ERVISS rows available."),t.note&&S.push(t.note),{selectedYear:d,seasonLabel:Qe(s,d),availableYears:l,iliThreshold:Ie,iliSeries:u,sariSeries:m,virology:g,euVirology:v,historical:p,stats:{totalIliCases:f,peakIliWeek:(k==null?void 0:k.week)??null,peakIliCases:(k==null?void 0:k.cases)??null,latestWeek:(E==null?void 0:E.week)??(h==null?void 0:h.week)??null,latestIliCases:(E==null?void 0:E.cases)??0,latestSariAdmissions:(h==null?void 0:h.admissions)??null,latestSariIcu:(h==null?void 0:h.icu)??null,weeksAboveIliThreshold:u.filter(x=>x.cases>=Ie).length,firstIliThresholdCrossingWeek:N},warnings:S}}const ys="modulepreload",ks=function(t,i){return new URL(t,i).href},Ct={},ii=function(i,n,s){let l=Promise.resolve();if(n&&n.length>0){const d=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),m=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));l=Promise.allSettled(n.map(g=>{if(g=ks(g,s),g in Ct)return;Ct[g]=!0;const v=g.endsWith(".css"),p=v?'[rel="stylesheet"]':"";if(!!s)for(let E=d.length-1;E>=0;E--){const h=d[E];if(h.href===g&&(!v||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${p}`))return;const k=document.createElement("link");if(k.rel=v?"stylesheet":ys,v||(k.as="script"),k.crossOrigin="",k.href=g,m&&k.setAttribute("nonce",m),document.head.appendChild(k),v)return new Promise((E,h)=>{k.addEventListener("load",E),k.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return l.then(d=>{for(const u of d||[])u.status==="rejected"&&c(u.reason);return i().catch(c)})},xs="NNGYK",Et="ILI (flu-like illness)";function Z(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function P(t){const i=typeof t=="number"?t:Number(t);return Number.isFinite(i)?i:null}function tt(t){if(typeof t!="string")return null;const i=t.trim();return i.length?i:null}function ye(t){const i=tt(t);if(!i)return Et;const n=i.normalize("NFKC").replace(/\u00a0/g," ").replace(/\s+/g," ").trim();return/^ili\s*\(\s*flu[-\s]*like illness\s*\)$/i.test(n)?Et:/^influenza$/i.test(n)?"Influenza":/^influenza\s+a$/i.test(n)?"Influenza A":/^influenza\s+b$/i.test(n)?"Influenza B":/^influenza\s+untyped$/i.test(n)?"Influenza (untyped)":/^influenza\s+a\s*\(\s*h1n1pdm09\s*\)$/i.test(n)||/^influenza\s+a\s*\(\s*h1pdm09\s*\)$/i.test(n)||/^a\s*\(\s*h1\s*\)\s*pdm09$/i.test(n)?"Influenza A(H1N1pdm09)":/^influenza\s+a\s*\(\s*h3\s*\)$/i.test(n)||/^a\s*\(\s*h3\s*\)$/i.test(n)?"Influenza A(H3)":/^influenza\s+a\s*\(\s*nt\s*\)$/i.test(n)||/^a\s*\(\s*unknown\s*\)$/i.test(n)?"Influenza A(NT)":/^sars[-\s]*cov[-\s]*2$/i.test(n)?"SARS-CoV-2":/^rs[-\s]*v(i[íi]rus)?$/i.test(n)?"RSV":n}function $t(t){return t>=40?t:t+53}function ze(t,i){return $t(t)-$t(i)}function it(t){try{return null}catch{return null}}async function si(t){try{const i=await fetch(t,{cache:"no-cache"});return i.ok?await i.json():null}catch{return null}}async function Ss(){const t=it("../../nngyk_all.json"),i=["./nngyk_all.json","/nngyk_all.json",...t?[t]:[]];for(const n of i){const s=await si(n);if(s!=null)return{payload:s,location:n}}try{return{payload:(await ii(()=>import("./nngyk_all-6WdLRqwI.js"),[],import.meta.url)).default,location:"@nngyk-all"}}catch{return null}}async function ws(){const i=["./erviss_data/erviss_sari.json","/erviss_data/erviss_sari.json","./erviss_sari.json","/erviss_sari.json",...[it("../../erviss_data/erviss_sari.json"),it("../../erviss_sari.json")].filter(n=>typeof n=="string")];for(const n of i){const s=await si(n);if(s!=null)return{payload:s,location:n}}try{return{payload:(await ii(()=>import("./erviss_sari-BR0vDMot.js"),[],import.meta.url)).default,location:"@erviss-sari"}}catch{return null}}function Ns(t,i){if(!Array.isArray(t))return null;const n=new Map,s=new Map,l=new Map,c=new Map,d=new Set,u=new Set;for(const p of t){if(!Z(p))continue;const f=Z(p.payload)?p.payload:null;if(!f)continue;const k=Array.isArray(f.weekly)?f.weekly:[],E=Z(f.metadata)?f.metadata:null,h=P(p.season_year)??P(E==null?void 0:E.season_year)??P(Z(k[0])?k[0].year:null),N=P(p.week)??P(Z(k[0])?k[0].week:null);for(const j of k){if(!Z(j))continue;const $=P(j.year)??h,C=P(j.week)??N;if($==null||C==null)continue;const B=tt(j.dataset)??xs,W=ye(j.virus),G=tt(j.region)??"National",U=P(j.cases)??0,ue=`${B}::${$}::${C}::${W}::${G}`,ae=n.get(ue);ae?ae.cases+=U:n.set(ue,{dataset:B,year:$,week:C,virus:W,cases:U,region:G}),d.add($),u.add(W)}const S=Z(f.sari)?f.sari:null;if(S&&h!=null){const j=P(S.week)??N,$=P(S.admissions),C=P(S.icu);if(j!=null&&($!=null||C!=null)){const B=`${h}::${j}`,W=s.get(B)??{year:h,week:j,admissions:null,icu:null};$!=null&&(W.admissions=(W.admissions??0)+$),C!=null&&(W.icu=(W.icu??0)+C),s.set(B,W),d.add(h)}}const x=Z(f.virology)?f.virology:null;if(x&&h!=null&&N!=null){const j=Array.isArray(x.detections)?x.detections:[],$=Array.isArray(x.positivity)?x.positivity:[];for(const C of j){if(!Z(C))continue;const B=ye(C.virus),W=P(C.detections);if(W==null)continue;const G=`${h}::${N}::${B}`,U=l.get(G);U?U.detections+=W:l.set(G,{year:h,week:N,virus:B,detections:W})}for(const C of $){if(!Z(C))continue;const B=ye(C.virus),W=P(C.positivity);if(W==null)continue;const G=`${h}::${N}::${B}`,U=c.get(G);(!U||W>U.positivity)&&c.set(G,{year:h,week:N,virus:B,positivity:W})}}}if(!n.size)return null;const m={},g=Array.from(d).sort((p,f)=>p-f);for(const p of g)m[String(p)]=`${p}-${p+1}`;return{source:"nngyk_all",respiratoryData:nt.parse({years:g,weekly:Array.from(n.values()).sort((p,f)=>p.year-f.year||ze(p.week,f.week)||p.virus.localeCompare(f.virus)),sariWeekly:Array.from(s.values()).sort((p,f)=>p.year-f.year||ze(p.week,f.week)),virologyDetections:Array.from(l.values()).sort((p,f)=>p.year-f.year||ze(p.week,f.week)||p.virus.localeCompare(f.virus)),virologyPositivity:Array.from(c.values()).sort((p,f)=>p.year-f.year||ze(p.week,f.week)||p.virus.localeCompare(f.virus)),ervissDetections:[],ervissPositivity:[],viruses:Array.from(u).sort((p,f)=>p.localeCompare(f)),datasets:{NNGYK:{name:"NNGYK (Hungary)",description:"Structured from parsed NNGYK bulletins (latest run)."}}}),seasonLabels:m,note:`Loaded live bulletin extract from ${i}.`}}function st(t,i){const n=t.note?`${t.note} ${i}`:i;return{...t,note:n}}function Ls(t,i,n){if(!Z(i))return null;const s=P(i.latest_year),l=Array.isArray(i.detections)?i.detections:[],c=Array.isArray(i.positivity)?i.positivity:[],d=l.map(g=>{if(!Z(g))return null;const v=P(g.year)??s,p=P(g.week),f=P(g.detections),k=ye(g.virus);return v==null||p==null||f==null||!k?null:{year:v,week:p,virus:k,detections:f}}).filter(g=>g!==null).sort((g,v)=>g.year-v.year||g.week-v.week||g.virus.localeCompare(v.virus)),u=c.map(g=>{if(!Z(g))return null;const v=P(g.year)??s,p=P(g.week),f=P(g.positivity),k=ye(g.virus);return v==null||p==null||f==null||!k?null:{year:v,week:p,virus:k,positivity:f}}).filter(g=>g!==null).sort((g,v)=>g.year-v.year||g.week-v.week||g.virus.localeCompare(v.virus));if(!d.length&&!u.length)return null;const m=nt.parse({...t.respiratoryData,ervissDetections:d,ervissPositivity:u,datasets:{...Z(t.respiratoryData.datasets)?t.respiratoryData.datasets:{},ERVISS:{name:"ERVISS (EU/EEA)",description:"EU/EEA SARI virological detections and positivity from ECDC ERVISS."}}});return st({...t,respiratoryData:m},`Loaded ERVISS feed from ${n}.`)}async function js(){const t=await Ss();let i;t?i=Ns(t.payload,t.location)??Te("nngyk_all.json present but invalid for weekly aggregation; using bundled sample."):i=Te("nngyk_all.json not found; using bundled sample.");const n=await ws();if(!n)return st(i,"ERVISS feed not found.");const s=Ls(i,n.payload,n.location);return s||st(i,"ERVISS feed present but invalid.")}const Wt=new Intl.NumberFormat("en-US");function Is(t,i="W"){const n=String(t).padStart(2,"0");return i==="W"?`W${n}`:`${i}${n}`}function zs(t,i){const n=/^W(\d{1,2})$/i.exec(String(t??"").trim());if(!n)return t;const s=String(n[1]).padStart(2,"0");return i==="W"?`W${s}`:`${i}${s}`}function As({points:t,threshold:i,compact:n,dark:s=!1,labels:l}){const c=s?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",markerLine:"rgba(148, 163, 184, 0.38)",markerLabel:"#cbd5e1",markerBg:"rgba(15, 23, 42, 0.88)",currentWeekLine:"rgba(125, 211, 252, 0.55)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",markerLine:"rgba(15, 23, 42, 0.16)",markerLabel:"#64748b",markerBg:"rgba(255, 255, 255, 0.85)",currentWeekLine:"rgba(37, 99, 235, 0.45)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},d=l??{iliCases:"ILI cases",alertThreshold:"Alert threshold",crossing:"Threshold crossing",noData:"No data",seasonStart:"Season start",holidays:"Holiday period"},u=(l==null?void 0:l.weekPrefix)??"W",m=[{week:40,text:d.seasonStart},{week:52,text:d.holidays},{week:1,text:d.holidays}],v=t.map(S=>S.label).map(S=>zs(S,u)),p=t.map(S=>S.cases),f=v.length>0,k=f?v[v.length-1]:null,E=m.map(S=>{const x=Is(S.week,u);return v.includes(x)?{name:S.text,xAxis:x}:null}).filter(S=>S!==null),h=[{name:d.iliCases,type:"line",data:f?p:[0],smooth:.24,showSymbol:!1,symbol:"circle",symbolSize:7,lineStyle:{width:3,color:s?"#7dd3fc":"#2563eb",cap:"round"},areaStyle:{color:new Je(0,0,0,1,[{offset:0,color:s?"rgba(125, 211, 252, 0.42)":"rgba(59, 130, 246, 0.28)"},{offset:1,color:s?"rgba(56, 189, 248, 0.06)":"rgba(147, 197, 253, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3.6}},markLine:k?{symbol:["none","none"],silent:!0,lineStyle:{color:c.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:k}]}:void 0,z:3},{name:d.alertThreshold,type:"line",data:f?v.map(()=>i):[i],symbol:"none",itemStyle:{color:"#dc2626"},lineStyle:{color:"#dc2626",type:"dashed",width:2},emphasis:{lineStyle:{color:"#dc2626",width:2.2}},markLine:E.length?{symbol:["none","none"],silent:!0,lineStyle:{color:c.markerLine,width:1,type:"solid"},label:{color:c.markerLabel,formatter:"{b}",position:"insideStartTop",padding:[2,4],backgroundColor:c.markerBg,borderRadius:4},data:E}:void 0,z:5}];let N;if(n&&v.length>12){const S=Math.max(0,v.length-12);N=[{type:"inside",xAxisIndex:0,startValue:v[S],endValue:v[v.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:v[S],endValue:v[v.length-1],brushSelect:!1,showDataShadow:!1,borderColor:c.sliderBorder,fillerColor:c.sliderFill,moveHandleSize:6,textStyle:{color:c.sliderText}}]}return{animation:!1,aria:{enabled:!0},grid:{top:n?42:78,right:20,bottom:n&&N?58:36,left:54},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:c.currentWeekLine,type:"dashed",width:1.1}},backgroundColor:c.tooltipBg,borderColor:c.tooltipBorder,borderWidth:1,textStyle:{color:c.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:S=>{const x=Array.isArray(S)?S:[];if(!x.length)return"";const $=x[0].axisValueLabel??"",C=x.filter(B=>B.seriesName!==d.crossing).map(B=>{const W=B,G=Array.isArray(W.data)?W.data[1]:W.data,U=typeof G=="number"&&Number.isFinite(G)?Wt.format(G):"–";return`${W.marker??""} ${W.seriesName??""}: ${U}`}).join("<br/>");return C?`${$}<br/>${C}`:$}},legend:{show:!n,top:2,left:8,right:8,data:[d.iliCases,d.alertThreshold],itemWidth:14,itemHeight:8,itemGap:12,padding:[6,10],backgroundColor:c.legendBg,borderColor:c.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:c.legend,fontSize:12,lineHeight:16,fontWeight:600},icon:"circle"},xAxis:{type:"category",data:f?v:[d.noData],boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:c.axisLine}},axisLabel:{color:c.axisLabel,interval:n?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:c.axisLabel,formatter:S=>Wt.format(S)},splitLine:{lineStyle:{color:c.grid,type:[4,5]}}},dataZoom:N,series:h}}const Rt=new Intl.NumberFormat("en-US");function Ft(t,i){const n=/^W(\d{1,2})$/i.exec(String(t??"").trim());if(!n)return t;const s=String(n[1]).padStart(2,"0");return i==="hu"?`H${s}`:`W${s}`}function he(t){if(t==null||!Number.isFinite(t))return"–";const i=Math.round(t*10)/10;return`${i>0?"+":""}${i.toLocaleString(void 0,{maximumFractionDigits:1})}%`}function He({metric:t,compareSeasonLabel:i,currentSeasonLabel:n,compact:s,dark:l=!1,language:c="en",labels:d}){const u=l?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",baseline:"rgba(203, 213, 225, 0.58)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",baseline:"rgba(15, 23, 42, 0.52)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},m=d??{noData:"No data"},g=t.points.map(h=>h.label),v=t.points.map(h=>h.previous),p=t.points.map(h=>h.current),f=g.length>0,k=f?g[g.length-1]:null;let E;if(s&&g.length>12){const h=Math.max(0,g.length-12);E=[{type:"inside",xAxisIndex:0,startValue:g[h],endValue:g[g.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:g[h],endValue:g[g.length-1],brushSelect:!1,showDataShadow:!1,borderColor:u.sliderBorder,fillerColor:u.sliderFill,moveHandleSize:6,textStyle:{color:u.sliderText}}]}return{animation:!1,aria:{enabled:!0},grid:{top:s?36:72,right:18,bottom:s&&E?58:46,left:50},tooltip:{trigger:"axis",backgroundColor:u.tooltipBg,borderColor:u.tooltipBorder,borderWidth:1,textStyle:{color:u.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:h=>{const N=Array.isArray(h)?h:[];if(!N.length)return"";const S=N[0],x=Ft(S.axisValueLabel??"",c),j=N.map($=>{const C=$,B=typeof C.data=="number"&&Number.isFinite(C.data)?Rt.format(C.data):"–";return`${C.marker??""} ${C.seriesName??""}: ${B}`}).join("<br/>");return`${x}<br/>${j}`}},legend:{show:!s,top:2,left:8,right:8,itemWidth:12,itemHeight:8,itemGap:10,padding:[6,10],backgroundColor:u.legendBg,borderColor:u.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:u.legend,fontSize:12,lineHeight:16,fontWeight:600}},xAxis:{type:"category",data:f?g:[m.noData],axisLine:{lineStyle:{color:u.axisLine}},axisLabel:{color:u.axisLabel,interval:s?"auto":0,hideOverlap:!0,formatter:h=>Ft(String(h),c)}},yAxis:{type:"value",min:0,axisLabel:{color:u.axisLabel,formatter:h=>Rt.format(h)},splitLine:{lineStyle:{color:u.grid,type:[4,5]}}},dataZoom:E,series:[{name:i,type:"line",data:f?v:[null],smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:u.baseline,width:2},itemStyle:{color:u.baseline},markLine:k?{symbol:["none","none"],silent:!0,lineStyle:{color:u.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:k}]}:void 0},{name:n,type:"line",data:f?p:[null],smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:"#2563eb",width:2.4},itemStyle:{color:"#2563eb"}}]}}const Vt=new Intl.NumberFormat("en-US"),Ts=new Intl.NumberFormat("en-US",{maximumFractionDigits:1});function Dt(t){return t>=40?t:t+53}function ni(t,i){return Dt(t)-Dt(i)}function ri(t,i){return t-i}function ai(t,i){const n=String(t).padStart(2,"0");return i==="hu"?`H${n}`:`W${n}`}const Cs={"ILI (flu-like illness)":"ILI (influenzaszerű megbetegedés)",Influenza:"Influenza","Influenza A":"Influenza A","Influenza B":"Influenza B","Influenza A(H1N1pdm09)":"Influenza A(H1N1pdm09)","Influenza A(H3)":"Influenza A(H3)","Influenza A(NT)":"Influenza A(NT)",RSV:"RSV","SARS-CoV-2":"SARS-CoV-2",[X]:"Influenza (összes)"},Es={influenza:{light:"#ec4899",dark:"#f472b6"},sarscov2:{light:"#2563eb",dark:"#60a5fa"},rsv:{light:"#14b8a6",dark:"#2dd4bf"},hmpv:{light:"#f97316",dark:"#fb923c"}},Pt={light:["#8b5cf6","#0ea5e9","#ef4444","#84cc16","#f59e0b"],dark:["#a78bfa","#38bdf8","#f87171","#a3e635","#fbbf24"]};function $s(t){let i=0;for(let n=0;n<t.length;n+=1)i=i*31+t.charCodeAt(n)>>>0;return i}function Ws(t){const i=String(t??"").trim().toLowerCase();return i?i===X.toLowerCase()||i.includes("influenza")||i.includes("flu-like")||i.startsWith("ili")?"influenza":i.includes("sars")||i.includes("cov")?"sarscov2":/\brsv\b/.test(i)?"rsv":i.includes("hmpv")||i.includes("metapneumo")?"hmpv":"other":"other"}function oi(t,i=!1){const n=Ws(t);if(n!=="other"){const c=Es[n];return i?c.dark:c.light}const s=i?Pt.dark:Pt.light,l=String(t??"").trim()||"other";return s[$s(l)%s.length]}function q(t,i="en"){return i==="hu"?Cs[t]??t:t===X?"Influenza (all)":t}function li(t,i,n){if(!i||t.length<=12)return;const s=Math.max(0,t.length-12);return[{type:"inside",xAxisIndex:0,startValue:t[s],endValue:t[t.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:t[s],endValue:t[t.length-1],brushSelect:!1,showDataShadow:!1,borderColor:n.sliderBorder,fillerColor:n.sliderFill,moveHandleSize:6,textStyle:{color:n.sliderText}}]}function Bt({rows:t,selectedVirus:i,compact:n,weekOrder:s="season",language:l="en",dark:c=!1}){const d=c?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",legendPage:"#93c5fd",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",legendPage:"#1d4ed8",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},u=s==="numeric"?ri:ni,m=Array.from(new Set(t.map(h=>h.week))).sort((h,N)=>u(h,N)),g=m.map(h=>ai(h,l)),v=l==="hu"?"Nincs adat":"No data",p=i===ce?Array.from(new Set(t.map(h=>h.virus))).sort((h,N)=>h===X?-1:N===X?1:h.localeCompare(N)):[i],f=li(g,n,d),k=g.length?g[g.length-1]:null,E=p.map((h,N)=>{const S=new Map;for(const j of t)j.virus===h&&S.set(j.week,j.detections);const x=oi(h,c);return{name:q(h,l),type:"line",data:m.map(j=>S.get(j)??null),smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:x,width:2.2},itemStyle:{color:x},markLine:N===0&&k?{symbol:["none","none"],silent:!0,lineStyle:{color:d.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:k}]}:void 0}});return{animation:!1,aria:{enabled:!0},grid:{top:n?40:90,right:18,bottom:n&&f?58:36,left:48},tooltip:{trigger:"axis",backgroundColor:d.tooltipBg,borderColor:d.tooltipBorder,borderWidth:1,textStyle:{color:d.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:h=>{const N=Array.isArray(h)?h:[];if(!N.length)return"";const S=N[0].axisValueLabel??"",x=N.map(j=>{const $=j,C=typeof $.data=="number"&&Number.isFinite($.data)?Vt.format($.data):"–";return`${$.marker??""} ${$.seriesName??""}: ${C}`}).join("<br/>");return`${S}<br/>${x}`}},legend:{show:!n,type:"scroll",top:4,left:8,right:8,itemWidth:10,itemHeight:10,itemGap:10,padding:[6,10],backgroundColor:d.legendBg,borderColor:d.legendBorder,borderWidth:1,borderRadius:10,pageIconColor:d.legendPage,pageIconInactiveColor:d.axisLine,pageTextStyle:{color:d.axisLabel},textStyle:{color:d.legend,fontWeight:600,fontSize:12,lineHeight:16}},xAxis:{type:"category",data:g.length?g:[v],axisLine:{lineStyle:{color:d.axisLine}},axisLabel:{color:d.axisLabel,interval:n?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:d.axisLabel,formatter:h=>Vt.format(h)},splitLine:{lineStyle:{color:d.grid,type:[4,5]}}},dataZoom:f,series:E}}function Mt({rows:t,compact:i,weekOrder:n="season",language:s="en",dark:l=!1}){const c=l?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",legendPage:"#93c5fd",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",legendPage:"#1d4ed8",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},d=n==="numeric"?ri:ni,u=Array.from(new Set(t.map(h=>h.week))).sort((h,N)=>d(h,N)),m=u.map(h=>ai(h,s)),g=s==="hu"?"Nincs adat":"No data",v=s==="hu"?" pozitivitás":" positivity",p=Array.from(new Set(t.map(h=>h.virus))).sort((h,N)=>h.localeCompare(N)),f=li(m,i,c),k=m.length?m[m.length-1]:null,E=p.map((h,N)=>{const S=new Map;for(const j of t)j.virus===h&&S.set(j.week,j.positivity);const x=oi(h,l);return{name:`${q(h,s)}${v}`,type:"line",data:u.map(j=>S.get(j)??null),smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:x,width:2.2},itemStyle:{color:x},markLine:N===0&&k?{symbol:["none","none"],silent:!0,lineStyle:{color:c.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:k}]}:void 0}});return{animation:!1,aria:{enabled:!0},grid:{top:i?40:90,right:18,bottom:i&&f?58:36,left:48},tooltip:{trigger:"axis",backgroundColor:c.tooltipBg,borderColor:c.tooltipBorder,borderWidth:1,textStyle:{color:c.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:h=>{const N=Array.isArray(h)?h:[];if(!N.length)return"";const S=N[0].axisValueLabel??"",x=N.map(j=>{const $=j,C=typeof $.data=="number"&&Number.isFinite($.data)?`${Ts.format($.data)}%`:"–";return`${$.marker??""} ${$.seriesName??""}: ${C}`}).join("<br/>");return`${S}<br/>${x}`}},legend:{show:!i,type:"scroll",top:4,left:8,right:8,itemWidth:10,itemHeight:10,itemGap:10,padding:[6,10],backgroundColor:c.legendBg,borderColor:c.legendBorder,borderWidth:1,borderRadius:10,pageIconColor:c.legendPage,pageIconInactiveColor:c.axisLine,pageTextStyle:{color:c.axisLabel},textStyle:{color:c.legend,fontWeight:600,fontSize:12,lineHeight:16}},xAxis:{type:"category",data:m.length?m:[g],axisLine:{lineStyle:{color:c.axisLine}},axisLabel:{color:c.axisLabel,interval:i?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:c.axisLabel,formatter:h=>`${h}%`},splitLine:{lineStyle:{color:c.grid,type:[4,5]}}},dataZoom:f,series:E}}Pi([Mi,Hi,_i,Ui,Yi,Oi,Gi,Ki,qi,Zi,Ji]);function se({title:t,subtitle:i,option:n}){const s=w.useRef(null),l=w.useRef(null);return w.useEffect(()=>{const c=s.current;if(!c)return;l.current||(l.current=Bi(c,void 0,{renderer:"canvas"})),l.current.setOption(n,{notMerge:!0,lazyUpdate:!0}),l.current.resize();const d=()=>{var m;return(m=l.current)==null?void 0:m.resize()};let u=null;return typeof ResizeObserver<"u"?(u=new ResizeObserver(()=>d()),u.observe(c)):window.addEventListener("resize",d),()=>{if(u){u.disconnect();return}window.removeEventListener("resize",d)}},[n]),w.useEffect(()=>()=>{var c;(c=l.current)==null||c.dispose(),l.current=null},[]),e.jsxs("article",{className:"panel",children:[e.jsxs("header",{className:"panel-header",children:[e.jsx("h2",{children:t}),i?e.jsx("p",{children:i}):null]}),e.jsx("div",{className:"panel-chart",ref:s})]})}const Ht="NNGYK",be="ILI (flu-like illness)",_t="rvd-lang",Ut="rvd-theme",Rs={en:{appTitle:"Seasonal Respiratory Pathogen Dashboard",appSubtitle:"Hungarian and European situation overview based on NNGYK and ECDC data",season:"Season",language:"Language",theme:"Theme",themeSystem:"System",themeDark:"Dark",themeLight:"Light",sectionCollapse:"Collapse",sectionExpand:"Expand",sourceTitle:"Data source",sourceLive:"Live source: nngyk_all.json",sourceFallback:"Fallback source: bundled sample",sourceLoading:"loading",sectionKicker:"Section",sectionHuTitle:"Hungarian situation",sectionHuNote:"NNGYK surveillance and sentinel indicators for the selected season.",sectionEuTitle:"European (EU/EEA) context",sectionEuNote:"ECDC ERVISS sentinel virology indicators.",alertsAria:"Key alerts",signalTitle:"Seasonal influenza threshold",signalEpidemicYes:"Influenza epidemic ongoing",signalEpidemicNo:"No influenza epidemic",signalAbove:"Above threshold",signalBelow:"Below threshold",fluTextAbove:"{week}: ILI activity ({cases} estimated cases) is above the alert threshold ({threshold}).",fluTextBelow:"{week}: ILI activity ({cases} estimated cases) remains below the alert threshold ({threshold}).",fluChipAbove:"Epidemic signal",fluChipBelow:"Below threshold",alertThreshold:"Alert threshold",crossingLabel:"Threshold crossing",alertsLoading:"Awaiting data",alertsLoadingPos:"Awaiting positivity data",alertsLoadingEuPos:"Awaiting EU/EEA positivity data",decisionTitle:"Weekly situation",decisionIncreasing:"Influenza pressure is increasing",decisionEasing:"Influenza pressure is easing",decisionStableHigh:"Influenza pressure remains high",decisionRisingBelow:"Influenza activity is rising",decisionStableLow:"No influenza epidemic signal",decisionConfidence:"Confidence",decisionFreshness:"Updated",decisionEvidenceIli:"View ILI and SARI charts",decisionEvidenceHuPositivity:"View sentinel positivity",decisionEvidenceEuPositivity:"View EU positivity",decisionConfidenceHigh:"High",decisionConfidenceMedium:"Moderate",decisionConfidenceLow:"Limited",coverageNngyk:"Coverage · NNGYK",coverageNngykNote:"Latest ILI week in selected season",coverageSari:"Coverage · SARI",coverageSariNote:"Latest SARI week in selected season",coverageErviss:"Coverage · ERVISS",coverageErvissNote:"Latest EU/EEA reporting week",coverageMissing:"Missing weeks (ILI/SARI)",coverageMissingNote:"Gaps within each season timeline",coverageAria:"Data coverage indicators",trendTitle:"Weekly trend signals",trendNote:"Weekly change in ILI cases and sentinel positivity.",trendAria:"Weekly trend signals",trendNoRecentChange:"No notable change",trendSurging:"Surging",trendDeclining:"Declining",trendFlat:"Flat",trendEmpty:"No recent ILI or positivity trend data.",glanceTitle:"Season at a glance",glanceNote:"Growth and burden signals alongside peak and recent trend.",glanceAria:"Season at a glance",glanceIli:"Flu-like illness",glanceSari:"SARI hospitalizations",glanceIcu:"SARI ICU",glancePeak:"Peak",glanceLatest:"Latest",glanceSlope:"3-week trend",glanceWow:"WoW change",glanceWeeksAbove:"Weeks above threshold",glanceStdTitle:"Season-to-date burden",glanceStdIli:"ILI cumulative",glanceStdSari:"SARI cumulative",glanceSeverityTitle:"Severity ratios",glanceSeveritySari:"SARI as % of ILI",glanceSeverityIcu:"ICU as % of SARI",stdNoBaseline:"No baseline",stdMedian:"Median",stdLastSeason:"Last season",statsTotalIli:"Total ILI cases",statsPeakIli:"ILI peak week / cases",statsIliVsPrev:"Latest ILI vs previous season",statsIliVsPrevBaseline:"{season}: {value}",statsIliVsPrevNoBaseline:"No previous-season value for this week.",statsFirstCrossing:"First threshold crossing",statsWeeksAbove:"Weeks above threshold",statsLatestSari:"Latest SARI admissions / ICU cases",chartIli:"Flu-like illness",chartIliSubtitle:"Season {season} (threshold {threshold})",chartSari:"SARI hospital admissions",chartSariSubtitle:"Season {season}",leaderHuTitle:"Leading virus by positivity in Hungary",leaderEuTitle:"Leading virus by positivity in the EU/EEA",leaderHuText:"{week}: {virus} shows the highest sentinel positivity ({pos}%).",leaderEuText:"{week} ({year}): {virus} shows the highest EU/EEA sentinel positivity ({pos}%).",leadersAria:"Latest virology leaders",virologyTitle:"Sentinel virology",virologyWeek:"Latest: {week}",virologyFilter:"Detections filter",virologyAllViruses:"All viruses",virologyTopDetections:"Top detections",virologyTopPositivity:"Top positivity",virologyNoDetections:"No detections available.",virologyNoPositivity:"No positivity data available.",virologyDetectionsTrend:"Sentinel detections trend",virologyDetectionsSubtitle:"{week} focus",virologyPositivityTrend:"Sentinel positivity trend",euVirologyTitle:"EU/EEA ERVISS virology",euTopDetections:"Top EU detections",euTopPositivity:"Top EU positivity",euNoDetections:"No EU detections available.",euNoPositivity:"No EU positivity data available.",euDetectionsTrend:"EU detections trend",euPositivityTrend:"EU positivity trend",euTrendSubtitle:"Target NH respiratory season: {season}",tableTitle:"Respiratory viruses week-by-week in Hungary",tableNote:"Click Week or Cases to sort; includes matching SARI and positivity context.",tableBadge:"Accessible table view",tableAria:"Weekly table",tableScrollAria:"Scrollable table",tableWeek:"Week",tableVirus:"Virus",tableRegion:"Region",tableCases:"Cases",tableSariAdmissions:"SARI admissions",tableSariIcu:"SARI ICU",tableTopPositivity:"Top positivity",tableNoData:"No data available.",historicalTitle:"Historical season comparison",historicalEmptyHeader:"Select a season that has a prior year available to render comparison trends.",historicalIli:"ILI comparison",historicalSari:"SARI admissions comparison",historicalIcu:"SARI ICU comparison",historicalDelta:"Latest delta: {value}",historicalUnavailable:"Historical comparison is unavailable because the previous season is missing from the loaded data source.",warningsTitle:"Data warnings",noDataShort:"No data",regionNational:"National"},hu:{appTitle:"Szezonális Légúti Kórokozó Dashboard",appSubtitle:"A magyarországi és európai helyzetkép az NNGYK és ECDC adatai alapján",season:"Szezon",language:"Nyelv",theme:"Téma",themeSystem:"Rendszer",themeDark:"Sötét",themeLight:"Világos",sectionCollapse:"Összecsuk",sectionExpand:"Kinyit",sourceTitle:"Adatforrás",sourceLive:"Élő forrás: nngyk_all.json",sourceFallback:"Tartalék forrás: beépített minta",sourceLoading:"betöltés",sectionKicker:"Szekció",sectionHuTitle:"Magyarországi helyzet",sectionHuNote:"NNGYK rutinfelügyeleti és sentinel mutatók a kiválasztott szezonban.",sectionEuTitle:"Európai (EU/EGT) kitekintés",sectionEuNote:"ECDC ERVISS sentinel virológiai mutatók.",alertsAria:"Fő riasztások",signalTitle:"Szezonális influenzaküszöb",signalEpidemicYes:"Influenza járvány van",signalEpidemicNo:"Nincs influenza járvány",signalAbove:"Küszöb felett",signalBelow:"Küszöb alatt",fluTextAbove:"{week}: az ILI-aktivitás ({cases} becsült eset) meghaladja a riasztási küszöböt ({threshold}).",fluTextBelow:"{week}: az ILI-aktivitás ({cases} becsült eset) a riasztási küszöb ({threshold}) alatt marad.",fluChipAbove:"Járványjelzés",fluChipBelow:"Küszöb alatt",alertThreshold:"Riasztási küszöb",crossingLabel:"Küszöbátlépés",alertsLoading:"Adatok betöltése",alertsLoadingPos:"Pozitivitási adatok betöltése",alertsLoadingEuPos:"EU/EGT pozitivitási adatok betöltése",decisionTitle:"Heti helyzetkép",decisionIncreasing:"Az influenzaaktivitás erősödik",decisionEasing:"Az influenzaaktivitás gyengül",decisionStableHigh:"Az influenzaaktivitás továbbra is magas",decisionRisingBelow:"Az influenzaaktivitás emelkedik",decisionStableLow:"Nincs influenza járványjelzés",decisionConfidence:"Megbízhatóság",decisionFreshness:"Frissítés",decisionEvidenceIli:"ILI és SARI grafikon",decisionEvidenceHuPositivity:"Sentinel pozitivitás",decisionEvidenceEuPositivity:"EU pozitivitás",decisionConfidenceHigh:"Magas",decisionConfidenceMedium:"Közepes",decisionConfidenceLow:"Korlátozott",coverageNngyk:"Lefedettség · NNGYK",coverageNngykNote:"A kiválasztott szezon legfrissebb ILI hete",coverageSari:"Lefedettség · SARI",coverageSariNote:"A kiválasztott szezon legfrissebb SARI hete",coverageErviss:"Lefedettség · ERVISS",coverageErvissNote:"Legfrissebb EU/EGT jelentési hét",coverageMissing:"Hiányzó hetek (ILI/SARI)",coverageMissingNote:"Rések az egyes szezonidősorokban",coverageAria:"Adatlefedettségi jelzők",trendTitle:"Heti trendszignálok",trendNote:"Heti változás az ILI-esetszámban és a sentinel pozitivitásban.",trendAria:"Heti trendszignálok",trendNoRecentChange:"Nincs friss változás",trendSurging:"Erősödik",trendDeclining:"Gyengül",trendFlat:"Változatlan",trendEmpty:"Nincs friss ILI- vagy pozitivitási trendadat.",glanceTitle:"Szezon pillanatkép",glanceNote:"Terhelési és növekedési jelzések a szezon alakulásáról.",glanceAria:"Szezon pillanatkép",glanceIli:"Influenzaszerű megbetegedés (ILI)",glanceSari:"SARI felvételek",glanceIcu:"SARI ICU",glancePeak:"Csúcs",glanceLatest:"Legfrissebb",glanceSlope:"3 hetes trend",glanceWow:"Heti változás",glanceWeeksAbove:"Küszöb feletti hetek",glanceStdTitle:"Szezon eddig",glanceStdIli:"ILI kumulatív",glanceStdSari:"SARI kumulatív",glanceSeverityTitle:"Súlyossági arányok",glanceSeveritySari:"SARI az ILI %-ában",glanceSeverityIcu:"ICU a SARI %-ában",stdNoBaseline:"Nincs összehasonlítás",stdMedian:"Medián",stdLastSeason:"Előző szezon",statsTotalIli:"Összes ILI eset",statsPeakIli:"ILI csúcs hét / eset",statsIliVsPrev:"Legfrissebb ILI vs előző szezon",statsIliVsPrevBaseline:"{season}: {value}",statsIliVsPrevNoBaseline:"Ehhez a héthez nincs előző szezonos érték.",statsFirstCrossing:"Első küszöbátlépés",statsWeeksAbove:"Küszöb feletti hetek",statsLatestSari:"Legfrissebb SARI felvételek / ICU",chartIli:"Influenzaszerű megbetegedés (ILI)",chartIliSubtitle:"Szezon: {season} (küszöb {threshold})",chartSari:"SARI kórházi felvételek",chartSariSubtitle:"Szezon: {season}",leaderHuTitle:"Legmagasabb sentinel pozitivitás (Magyarország)",leaderEuTitle:"Legmagasabb sentinel pozitivitás (EU/EGT)",leaderHuText:"{week}: {virus} mutatja a legmagasabb sentinel pozitivitást ({pos}%).",leaderEuText:"{week} ({year}): {virus} mutatja a legmagasabb EU/EGT sentinel pozitivitást ({pos}%).",leadersAria:"Legfrissebb virológiai vezetők",virologyTitle:"Sentinel virológia",virologyWeek:"Legfrissebb: {week}",virologyFilter:"Detekció szűrő",virologyAllViruses:"Összes vírus",virologyTopDetections:"Legmagasabb detekciók",virologyTopPositivity:"Legmagasabb pozitivitás",virologyNoDetections:"Nincs detekciós adat.",virologyNoPositivity:"Nincs pozitivitási adat.",virologyDetectionsTrend:"Sentinel detekciós trend",virologyDetectionsSubtitle:"{week} fókusz",virologyPositivityTrend:"Sentinel pozitivitási trend",euVirologyTitle:"EU/EGT ERVISS virológia",euTopDetections:"Legmagasabb EU detekciók",euTopPositivity:"Legmagasabb EU pozitivitás",euNoDetections:"Nincs EU detekciós adat.",euNoPositivity:"Nincs EU pozitivitási adat.",euDetectionsTrend:"EU detekciós trend",euPositivityTrend:"EU pozitivitási trend",euTrendSubtitle:"Cél NH légúti szezon: {season}",tableTitle:"Légúti vírusok heti bontásban (Magyarország)",tableNote:"Kattints a Hét vagy Esetszám oszlopra a rendezéshez; SARI és pozitivitási kontextussal.",tableBadge:"Akadálymentes táblázat",tableAria:"Heti táblázat",tableScrollAria:"Görgethető táblázat",tableWeek:"Hét",tableVirus:"Vírus",tableRegion:"Régió",tableCases:"Esetszám",tableSariAdmissions:"SARI felvételek",tableSariIcu:"SARI intenzív",tableTopPositivity:"Legmagasabb pozitivitás",tableNoData:"Nincs elérhető adat.",historicalTitle:"Történeti szezon összevetés",historicalEmptyHeader:"Válassz olyan szezont, amelyhez elérhető előző év.",historicalIli:"ILI összevetés",historicalSari:"SARI felvételek összevetése",historicalIcu:"SARI ICU összevetés",historicalDelta:"Legfrissebb eltérés: {value}",historicalUnavailable:"A történeti összevetés nem érhető el, mert hiányzik az előző szezon a betöltött adatforrásból.",warningsTitle:"Adat figyelmeztetések",noDataShort:"Nincs adat",regionNational:"Országos"}};function Ae(t){return String(t??"").toLowerCase().startsWith("hu")?"hu":"en"}function Yt(t){const i=String(t??"").toLowerCase();return i==="dark"?"dark":i==="light"?"light":"system"}function Ot(t){return t==="dark"||t==="light"?t:typeof window>"u"||typeof window.matchMedia!="function"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function O(t,i){return t.replace(/\{(\w+)\}/g,(n,s)=>String(i[s]??""))}function H(t,i="en"){if(typeof t!="number"||!Number.isFinite(t))return"-";const n=String(t).padStart(2,"0");return i==="hu"?`Hét ${n}`:`W${n}`}function Gt(t,i){const n=/^W(\d{1,2})$/i.exec(String(t??"").trim());if(!n)return t;const s=String(Number(n[1])).padStart(2,"0");return i==="hu"?`H${s}`:`W${s}`}function Fs(t){const i=String(t??"").trim().toLowerCase();return i?i===X.toLowerCase()||i.includes("influenza")||i.includes("flu-like")||i.startsWith("ili")?"influenza":i.includes("sars")||i.includes("cov")?"sarscov2":/\brsv\b/.test(i)?"rsv":i.includes("hmpv")||i.includes("metapneumo")?"hmpv":"other":"other"}function Vs(t){return`pathogen-${Fs(t)}`}function Ds(t,i){const n=t+1;return i==="hu"?`${t}/${n}`:`${t}/${n}`}function _e(t,i){return i>=40?t:t+1}function Ce(t){return t>=40?t:t+53}function J(t,i){return Ce(t)-Ce(i)}function Ps(t){return t<=53?t:t-53}function Kt(t){const i=Array.from(new Set(t.map(u=>Number(u)).filter(u=>Number.isFinite(u))));if(i.length<2)return[];const n=i.slice().sort(J),s=Ce(n[0]),l=Ce(n[n.length-1]),c=new Set(i),d=[];for(let u=s;u<=l;u+=1){const m=Ps(u);c.has(m)||d.push(m)}return d}function Bs(t){if(!t.length)return 0;const i=t.slice().sort((s,l)=>s-l),n=Math.floor(i.length/2);return i.length%2===0?Math.round((i[n-1]+i[n])/2):i[n]}function Ue(t,i){return Number.isFinite(i)?t.filter(n=>Number.isFinite(n.week)&&Number.isFinite(n.value)).filter(n=>J(n.week,i)<=0).reduce((n,s)=>n+s.value,0):null}function Ye(t){const i=t.filter(u=>Number.isFinite(u.week)&&Number.isFinite(u.value)).slice().sort((u,m)=>J(u.week,m.week));if(!i.length)return null;const n=i.reduce((u,m)=>m.value>u.value?m:u,i[0]),s=i[i.length-1],l=i.slice(Math.max(0,i.length-3)),c=l.length>=2?(l[l.length-1].value-l[0].value)/(l.length-1):null,d=n.value>0?s.value/n.value*100:null;return{peak:n,latest:s,pctOfPeak:d,slope:c}}function Oe(t){const i=t.filter(l=>Number.isFinite(l.week)&&Number.isFinite(l.value)).slice().sort((l,c)=>J(l.week,c.week));if(i.length<2)return null;const n=i[i.length-1].value,s=i[i.length-2].value;return!Number.isFinite(n)||!Number.isFinite(s)||s<=0?null:(n-s)/s*100}function qt(t,i,n,s){if(!Number.isFinite(n))return{currentTotal:null,baselineCount:0,median:null,lastSeason:null,percentile:null};const l=t(i),c=Ue(l,Number(n));if(typeof c!="number"||!Number.isFinite(c))return{currentTotal:null,baselineCount:0,median:null,lastSeason:null,percentile:null};const d=s.filter(f=>f<i).sort((f,k)=>f-k),u=d.map(f=>Ue(t(f),Number(n))).filter(f=>typeof f=="number"&&Number.isFinite(f)&&f>0),m=d.length?d[d.length-1]:null,g=m==null?null:(()=>{const f=Ue(t(m),Number(n));return Number.isFinite(f)?f:null})(),v=u.length>=2?Bs(u):null,p=u.length>=2?Math.round(u.filter(f=>f<=c).length/u.length*100):null;return{currentTotal:c,baselineCount:u.length,median:v,lastSeason:g,percentile:p}}function Zt(t,i){if(!Number.isFinite(t.currentTotal))return"–";const n=Number(t.currentTotal).toLocaleString();if(!t.baselineCount)return`${n} (${i.noBaseline})`;const s=[];return t.baselineCount>=2&&Number.isFinite(t.median)?s.push(`${i.median} ${Number(t.median).toLocaleString()}`):Number.isFinite(t.lastSeason)&&s.push(`${i.lastSeason} ${Number(t.lastSeason).toLocaleString()}`),t.percentile!=null&&s.push(`P${t.percentile}`),s.length?`${n} (${s.join(", ")})`:n}function Ms(t,i){if(!t.length||!i.length)return null;const n=new Map(t.map(g=>[g.week,g.value])),s=i.map(g=>g.week).filter(g=>Number.isFinite(g)&&n.has(g)).sort((g,v)=>J(g,v));if(!s.length)return null;const l=s[s.length-1],c=Number(n.get(l)??0),d=i.find(g=>g.week===l),u=Number((d==null?void 0:d.admissions)??0),m=Number((d==null?void 0:d.icu)??0);return!Number.isFinite(c)||c<=0||!Number.isFinite(u)||u<=0?null:{week:l,sariPercent:u/c*100,icuShare:Number.isFinite(m)&&u>0?m/u*100:null}}function Ge(t,i){return t?`${H(t.week,i)}: ${Number(t.value).toLocaleString()}`:"–"}function Ke(t,i){if(!t)return"–";const n=`${H(t.latest.week,i)}: ${Number(t.latest.value).toLocaleString()}`;return Number.isFinite(t.pctOfPeak)?`${n} (${Math.round(Number(t.pctOfPeak))}%)`:n}function qe(t,i){if(!Number.isFinite(t))return"–";const n=Math.round(Number(t)),s=n>0?"+":"";return i==="hu"?`${s}${n.toLocaleString()}/hét`:`${s}${n.toLocaleString()}/week`}function Ze(t){if(!Number.isFinite(t))return"0%";const i=Math.round(t);return`${i>0?"+":""}${i}%`}function Hs(t){return t>=70?"high":t>=45?"medium":"low"}function ne(t){return Vs(t)}function Jt({virus:t}){const i=ne(t);return e.jsx("span",{className:`virus-icon ${i}`,"aria-hidden":"true",children:e.jsxs("svg",{viewBox:"0 0 24 24",focusable:"false",children:[e.jsx("circle",{cx:"12",cy:"12",r:"4.5"}),e.jsx("line",{x1:"12",y1:"2.5",x2:"12",y2:"5.8"}),e.jsx("line",{x1:"12",y1:"18.2",x2:"12",y2:"21.5"}),e.jsx("line",{x1:"2.5",y1:"12",x2:"5.8",y2:"12"}),e.jsx("line",{x1:"18.2",y1:"12",x2:"21.5",y2:"12"}),e.jsx("line",{x1:"5.3",y1:"5.3",x2:"7.8",y2:"7.8"}),e.jsx("line",{x1:"16.2",y1:"16.2",x2:"18.7",y2:"18.7"}),e.jsx("line",{x1:"18.7",y1:"5.3",x2:"16.2",y2:"7.8"}),e.jsx("line",{x1:"7.8",y1:"16.2",x2:"5.3",y2:"18.7"})]})})}function _s(t=820){const i=`(max-width: ${t}px)`,[n,s]=w.useState(()=>typeof window>"u"||typeof window.matchMedia!="function"?!1:window.matchMedia(i).matches);return w.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const l=window.matchMedia(i),c=d=>s(d.matches);return s(l.matches),l.addEventListener("change",c),()=>l.removeEventListener("change",c)},[i]),n}function Us(){var yt,kt,xt,St,wt,Nt,Lt;const t=_s(),[i,n]=w.useState(()=>Te()),[s,l]=w.useState(()=>{if(typeof window>"u")return"en";const a=new URL(window.location.href).searchParams.get("lang");if(a)return Ae(a);const b=window.localStorage.getItem(_t);return Ae(b||window.navigator.language)}),[c,d]=w.useState(()=>typeof window>"u"?"system":Yt(window.localStorage.getItem(Ut))),[u,m]=w.useState(()=>Ot("system")),[g,v]=w.useState(void 0),[p,f]=w.useState(ce),[k,E]=w.useState("week"),[h,N]=w.useState("asc"),[S,x]=w.useState(!0),[j,$]=w.useState(!0),[C,B]=w.useState(!0),[W,G]=w.useState(!0),[U,ue]=w.useState(!0),[ae,rt]=w.useState(!0),r=Rs[s],F=u==="dark";w.useEffect(()=>{if(typeof window>"u")return;document.documentElement.lang=s,window.localStorage.setItem(_t,s);const a=new URL(window.location.href);a.searchParams.set("lang",s),window.history.replaceState({},"",`${a.pathname}${a.search}${a.hash}`)},[s]),w.useEffect(()=>{if(typeof window>"u")return;window.localStorage.setItem(Ut,c);const a=()=>{const y=Ot(c);m(y),document.documentElement.setAttribute("data-theme",y)};if(a(),c!=="system"||typeof window.matchMedia!="function")return;const b=window.matchMedia("(prefers-color-scheme: dark)"),A=()=>a();return b.addEventListener("change",A),()=>b.removeEventListener("change",A)},[c]),w.useEffect(()=>{let a=!0;return(async()=>{try{const b=await js();if(!a)return;n(b)}catch{if(!a)return;n(Te("Runtime loading failed; using bundled sample."))}finally{a&&x(!1)}})(),()=>{a=!1}},[]);const o=w.useMemo(()=>bs(i,g),[i,g]);w.useEffect(()=>{(g==null||!o.availableYears.includes(g))&&v(o.selectedYear)},[g,o.availableYears,o.selectedYear]),w.useEffect(()=>{p!==ce&&!o.virology.availableDetectionViruses.includes(p)&&f(ce)},[p,o.virology.availableDetectionViruses]);const ci=w.useMemo(()=>As({points:o.iliSeries,threshold:o.iliThreshold,compact:t,dark:F,labels:{iliCases:r.glanceIli,alertThreshold:r.alertThreshold,crossing:r.crossingLabel,noData:r.noDataShort,seasonStart:s==="hu"?"Szezonkezdet":"Season start",holidays:s==="hu"?"Ünnepi időszak":"Holiday period",weekPrefix:s==="hu"?"H":"W"}}),[t,F,s,o.iliSeries,o.iliThreshold,r.alertThreshold,r.crossingLabel,r.glanceIli,r.noDataShort]),ui=w.useMemo(()=>{const a=o.sariSeries.length>0,b=a?o.sariSeries[o.sariSeries.length-1].label:null,A=o.sariSeries.map(I=>I.admissions),y=o.sariSeries.map(I=>I.icu),z=F?{axisLabel:"#cbd5e1",axisLine:"rgba(148, 163, 184, 0.45)",grid:"rgba(148, 163, 184, 0.16)",legend:"#e2e8f0",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLabel:"#334155",axisLine:"rgba(15, 23, 42, 0.20)",grid:"rgba(15, 23, 42, 0.1)",legend:"#0f172a",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"};return{animation:!1,grid:{top:t?40:78,right:18,bottom:34,left:54},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:z.currentWeekLine,type:"dashed",width:1.1}},backgroundColor:z.tooltipBg,borderColor:z.tooltipBorder,borderWidth:1,textStyle:{color:z.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:I=>{const M=Array.isArray(I)?I:[];if(!M.length)return"";const _=M[0],L=Gt(_.axisValueLabel??"",s),T=M.map(K=>{const R=K,D=typeof R.data=="number"&&Number.isFinite(R.data)?R.data.toLocaleString():"–";return`${R.marker??""} ${R.seriesName??""}: ${D}`}).join("<br/>");return`${L}<br/>${T}`}},legend:{show:!t,top:2,left:8,right:8,itemWidth:12,itemHeight:8,itemGap:12,padding:[6,10],backgroundColor:z.legendBg,borderColor:z.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:z.legend,fontWeight:600,fontSize:12,lineHeight:16},icon:"circle"},xAxis:{type:"category",data:o.sariSeries.map(I=>I.label),boundaryGap:!1,axisLine:{lineStyle:{color:z.axisLine}},axisTick:{show:!1},axisLabel:{color:z.axisLabel,hideOverlap:!0,formatter:I=>Gt(String(I),s)}},yAxis:{type:"value",min:0,axisLabel:{color:z.axisLabel,formatter:I=>I.toLocaleString()},splitLine:{lineStyle:{color:z.grid,type:[4,5]}}},series:[{name:r.tableSariAdmissions,type:"line",data:a?A:[0],smooth:.22,showSymbol:!1,symbol:"circle",symbolSize:6,lineStyle:{width:2.8,color:F?"#7dd3fc":"#2563eb",cap:"round"},itemStyle:{color:F?"#7dd3fc":"#2563eb"},areaStyle:{color:new Je(0,0,0,1,[{offset:0,color:F?"rgba(125, 211, 252, 0.34)":"rgba(59, 130, 246, 0.22)"},{offset:1,color:F?"rgba(56, 189, 248, 0.05)":"rgba(147, 197, 253, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3.4}},markLine:b?{symbol:["none","none"],silent:!0,lineStyle:{color:z.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:b}]}:void 0,z:4},{name:r.tableSariIcu,type:"line",data:a?y:[0],smooth:.2,showSymbol:!1,symbol:"circle",symbolSize:6,lineStyle:{width:2.4,color:F?"#fb923c":"#dc2626",cap:"round"},itemStyle:{color:F?"#fb923c":"#dc2626"},areaStyle:{color:new Je(0,0,0,1,[{offset:0,color:F?"rgba(251, 146, 60, 0.24)":"rgba(248, 113, 113, 0.18)"},{offset:1,color:F?"rgba(249, 115, 22, 0.04)":"rgba(252, 165, 165, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3}},z:5}]}},[t,F,s,o.sariSeries,r.tableSariAdmissions,r.tableSariIcu]),di=w.useMemo(()=>Bt({rows:o.virology.detectionRows,selectedVirus:p,compact:t,language:s,dark:F}),[t,F,s,p,o.virology.detectionRows]),gi=w.useMemo(()=>Mt({rows:o.virology.positivityRows,compact:t,language:s,dark:F}),[t,F,s,o.virology.positivityRows]),hi=w.useMemo(()=>Bt({rows:o.euVirology.detectionRows,selectedVirus:ce,compact:t,weekOrder:"season",language:s,dark:F}),[t,F,s,o.euVirology.detectionRows]),mi=w.useMemo(()=>Mt({rows:o.euVirology.positivityRows,compact:t,weekOrder:"season",language:s,dark:F}),[t,F,s,o.euVirology.positivityRows]),at=w.useMemo(()=>{if(o.virology.latestWeek==null)return[];const a=o.virology.detectionRows.filter(y=>y.week===o.virology.latestWeek).filter(y=>p===ce||y.virus===p).slice().sort((y,z)=>z.detections-y.detections),b=a.find(y=>y.virus===X);return[...b?[b]:[],...a.filter(y=>y.virus!==X)].slice(0,6)},[p,o.virology.detectionRows,o.virology.latestWeek]),ot=w.useMemo(()=>o.virology.latestWeek==null?[]:o.virology.positivityRows.filter(a=>a.week===o.virology.latestWeek).slice().sort((a,b)=>b.positivity-a.positivity).slice(0,6),[o.virology.latestWeek,o.virology.positivityRows]),lt=w.useMemo(()=>o.euVirology.latestWeek==null?[]:o.euVirology.detectionRows.filter(a=>a.week===o.euVirology.latestWeek).slice().sort((a,b)=>b.detections-a.detections).slice(0,6),[o.euVirology.detectionRows,o.euVirology.latestWeek]),ct=w.useMemo(()=>o.euVirology.latestWeek==null?[]:o.euVirology.positivityRows.filter(a=>a.week===o.euVirology.latestWeek).slice().sort((a,b)=>b.positivity-a.positivity).slice(0,6),[o.euVirology.latestWeek,o.euVirology.positivityRows]),ut=w.useMemo(()=>!o.historical.available||!o.historical.compareSeasonLabel?null:He({metric:o.historical.ili,compareSeasonLabel:o.historical.compareSeasonLabel,currentSeasonLabel:o.historical.currentSeasonLabel,compact:t,dark:F,language:s,labels:{noData:r.noDataShort}}),[t,F,s,o.historical,r.noDataShort]),dt=w.useMemo(()=>!o.historical.available||!o.historical.compareSeasonLabel?null:He({metric:o.historical.sariAdmissions,compareSeasonLabel:o.historical.compareSeasonLabel,currentSeasonLabel:o.historical.currentSeasonLabel,compact:t,dark:F,language:s,labels:{noData:r.noDataShort}}),[t,F,s,o.historical,r.noDataShort]),gt=w.useMemo(()=>!o.historical.available||!o.historical.compareSeasonLabel?null:He({metric:o.historical.sariIcu,compareSeasonLabel:o.historical.compareSeasonLabel,currentSeasonLabel:o.historical.currentSeasonLabel,compact:t,dark:F,language:s,labels:{noData:r.noDataShort}}),[t,F,s,o.historical,r.noDataShort]),te=w.useMemo(()=>{if(!o.virology.positivityRows.length)return null;const a=o.virology.positivityRows.reduce((y,z)=>J(z.week,y)>0?z.week:y,o.virology.positivityRows[0].week),b=o.virology.positivityRows.filter(y=>y.week===a);if(!b.length)return null;const A=b.reduce((y,z)=>z.positivity>y.positivity?z:y,b[0]);return{week:a,virus:A.virus,positivity:A.positivity}},[o.virology.positivityRows]),ee=w.useMemo(()=>{if(o.euVirology.targetYear==null||!o.euVirology.positivityRows.length)return null;const a=o.euVirology.positivityRows.reduce((y,z)=>J(z.week,y)>0?z.week:y,o.euVirology.positivityRows[0].week),b=o.euVirology.positivityRows.filter(y=>y.week===a);if(!b.length)return null;const A=b.reduce((y,z)=>z.positivity>y.positivity?z:y,b[0]);return{year:_e(o.euVirology.targetYear,a),week:a,virus:A.virus,positivity:A.positivity}},[o.euVirology.positivityRows,o.euVirology.targetYear]),fi=o.iliSeries.length?H(o.iliSeries[o.iliSeries.length-1].week,s):"–",pi=o.sariSeries.length?H(o.sariSeries[o.sariSeries.length-1].week,s):"–",Ee=w.useMemo(()=>Kt(o.iliSeries.map(a=>a.week)),[o.iliSeries]),$e=w.useMemo(()=>Kt(o.sariSeries.map(a=>a.week)),[o.sariSeries]),V=w.useMemo(()=>{const a=o.iliSeries.map(T=>({week:T.week,value:T.cases})),b=o.sariSeries.map(T=>({week:T.week,value:T.admissions})),A=o.sariSeries.map(T=>({week:T.week,value:T.icu})),y=Ye(a),z=Ye(b),I=Ye(A),M=T=>{const K=new Map;for(const R of i.respiratoryData.weekly){const D=Number(R.year);if(!Number.isFinite(D)||D!==T||(R.dataset??Ht)!==Ht||(R.virus??be)!==be)continue;const ve=Number(R.week);if(!Number.isFinite(ve))continue;const je=Number(R.cases??0);Number.isFinite(je)&&K.set(ve,(K.get(ve)??0)+je)}return Array.from(K.entries()).sort((R,D)=>J(R[0],D[0])).map(([R,D])=>({week:R,value:D}))},_=T=>{const K=new Map;for(const R of i.respiratoryData.sariWeekly){const D=Number(R.year);if(!Number.isFinite(D)||D!==T)continue;const ie=Number(R.week);if(!Number.isFinite(ie))continue;const pe=Number(R.admissions??0);Number.isFinite(pe)&&K.set(ie,(K.get(ie)??0)+pe)}return Array.from(K.entries()).sort((R,D)=>J(R[0],D[0])).map(([R,D])=>({week:R,value:D}))},L=Ms(a,o.sariSeries.map(T=>({week:T.week,admissions:T.admissions,icu:T.icu})));return{iliGlance:y,sariGlance:z,icuGlance:I,iliWow:Oe(a),sariWow:Oe(b),icuWow:Oe(A),weeksAboveThreshold:a.filter(T=>T.value>=o.iliThreshold).length,iliSeasonToDate:qt(M,o.selectedYear,(y==null?void 0:y.latest.week)??null,o.availableYears),sariSeasonToDate:qt(_,o.selectedYear,(z==null?void 0:z.latest.week)??null,o.availableYears),severity:L}},[i.respiratoryData.sariWeekly,i.respiratoryData.weekly,o.availableYears,o.iliSeries,o.iliThreshold,o.sariSeries,o.selectedYear]),Y=w.useMemo(()=>{const a=o.iliSeries.length?o.iliSeries[o.iliSeries.length-1]:null;if(!a)return null;const b=o.historical.ili.points.find(I=>I.week===a.week)??null,A=b&&typeof b.previous=="number"&&Number.isFinite(b.previous)?b.previous:null,y=A!=null&&A!==0?(a.cases-A)/A*100:null,z=y==null?"flat":y>0?"surging":y<0?"declining":"flat";return{week:a.week,currentCases:a.cases,previousCases:A,deltaPercent:y,direction:z}},[o.historical.ili.points,o.iliSeries]),We=w.useMemo(()=>{const a=[],b=o.iliSeries.map(L=>({week:L.week,value:L.cases})).filter(L=>Number.isFinite(L.week)&&Number.isFinite(L.value)).sort((L,T)=>J(L.week,T.week)),A=b[b.length-1],y=b[b.length-2];if(A&&y){const L=y.value>0?(A.value-y.value)/y.value*100:0,T=L>0?"surging":L<0?"declining":"flat";a.push({virus:be,label:Ze(L),change:L,week:A.week,direction:T})}const z=o.virology.positivityRows.filter(L=>L.virus!==X).filter(L=>Number.isFinite(L.week)&&Number.isFinite(L.positivity));if(!z.length)return a;const I=z.reduce((L,T)=>J(T.week,L)>0?T.week:L,z[0].week),M=z.filter(L=>L.week===I).slice().sort((L,T)=>T.positivity-L.positivity).map(L=>L.virus),_=new Map;for(const L of z){const T=_.get(L.virus)??[];T.push({week:L.week,positivity:L.positivity}),_.set(L.virus,T)}for(const L of M){if(a.length>=4)break;const T=_.get(L);if(!T||T.length<2)continue;const K=T.slice().sort((ve,je)=>J(ve.week,je.week)),R=K[K.length-1],D=K[K.length-2];if(!R||!D)continue;const ie=D.positivity>0?(R.positivity-D.positivity)/D.positivity*100:0,pe=ie>0?"surging":ie<0?"declining":"flat";a.push({virus:L,label:Ze(ie),change:ie,week:R.week,direction:pe})}return a.slice(0,4)},[o.iliSeries,o.virology.positivityRows]),Re=w.useMemo(()=>{const a=new Map;for(const b of o.virology.positivityRows){const A=a.get(b.week);(!A||b.positivity>A.positivity)&&a.set(b.week,{virus:b.virus,positivity:b.positivity})}return a},[o.virology.positivityRows]),ht=w.useMemo(()=>{const a=new Map(o.iliSeries.map(I=>[I.week,I.cases])),b=new Map(o.sariSeries.map(I=>[I.week,{admissions:I.admissions,icu:I.icu}])),A=new Set;for(const I of a.keys())A.add(I);for(const I of b.keys())A.add(I);for(const I of Re.keys())A.add(I);for(const I of o.virology.detectionRows)A.add(I.week);const y=Array.from(A).map(I=>{const M=b.get(I),_=Re.get(I);return{week:I,virus:be,region:"National",cases:a.get(I)??null,sariAdmissions:(M==null?void 0:M.admissions)??null,sariIcu:(M==null?void 0:M.icu)??null,topPositivityVirus:(_==null?void 0:_.virus)??null,topPositivity:(_==null?void 0:_.positivity)??null}}),z=h==="asc"?1:-1;return y.sort((I,M)=>{if(k==="week"){const L=J(I.week,M.week);if(L!==0)return L*z}else{const L=Number(I.cases??0)-Number(M.cases??0);if(L!==0)return L*z}const _=J(I.week,M.week);return _!==0?_:I.virus.localeCompare(M.virus)})},[o.iliSeries,o.sariSeries,o.virology.detectionRows,k,h,Re]),vi=k==="week"?h==="asc"?"ascending":"descending":"none",bi=k==="cases"?h==="asc"?"ascending":"descending":"none",yi=k==="week"?h==="asc"?"▲":"▼":"",ki=k==="cases"?h==="asc"?"▲":"▼":"",we=a=>{if(k===a){N(b=>b==="asc"?"desc":"asc");return}E(a),N("asc")},fe=o.stats.latestIliCases>=o.iliThreshold,xi=fe?"critical":"ok",Si=fe?r.signalEpidemicYes:r.signalEpidemicNo,wi=O(fe?r.fluTextAbove:r.fluTextBelow,{week:H(o.stats.latestWeek,s),cases:o.stats.latestIliCases.toLocaleString(),threshold:o.iliThreshold.toLocaleString()}),Fe=We.find(a=>a.virus===be)??null,Ni=(()=>{const a=Fe==null?void 0:Fe.change;return fe?a!=null&&a>=8?r.decisionIncreasing:a!=null&&a<=-8?r.decisionEasing:r.decisionStableHigh:a!=null&&a>=12?r.decisionRisingBelow:r.decisionStableLow})(),Ve=a=>a==="high"?r.decisionConfidenceHigh:a==="medium"?r.decisionConfidenceMedium:r.decisionConfidenceLow,De=({hasData:a,missingWeeks:b,warningCount:A})=>{let y=100;return S&&(y-=28),a||(y-=30),y-=Math.min(26,b*6),y-=Math.min(24,A*8),Hs(y)},mt=Ee.length+$e.length,ft=De({hasData:o.iliSeries.length>1,missingWeeks:mt,warningCount:o.warnings.length}),pt=De({hasData:te!=null&&o.virology.latestWeek!=null,missingWeeks:Math.ceil(mt/2),warningCount:o.warnings.length}),vt=De({hasData:ee!=null&&o.euVirology.latestWeek!=null,missingWeeks:0,warningCount:o.warnings.length}),Li=Ve(ft),ji=Ve(pt),Ii=Ve(vt),Ne=(a,b=0)=>{if(typeof window>"u")return;const A=document.getElementById(a);if(A){A.scrollIntoView({behavior:"smooth",block:"start"});return}b>=10||window.setTimeout(()=>Ne(a,b+1),80)},Pe=a=>{if(a==="hu-ili-sari-charts"){ue(!0),Ne(a);return}if(a==="hu-sentinel-positivity"){ue(!0),$(!0),Ne(a);return}rt(!0),Ne(a)},zi=i.source==="nngyk_all"?"live":"sample",Ai=i.source==="nngyk_all"?r.sourceLive:r.sourceFallback,Le=o.virology.latestWeek==null?"–":H(o.virology.latestWeek,s),bt=o.euVirology.targetYear==null?"–":Ds(o.euVirology.targetYear,s),Be=o.euVirology.targetYear!=null&&o.euVirology.latestWeek!=null?s==="hu"?`${_e(o.euVirology.targetYear,o.euVirology.latestWeek)} · ${H(o.euVirology.latestWeek,s)}`:`${_e(o.euVirology.targetYear,o.euVirology.latestWeek)}-${H(o.euVirology.latestWeek,s)}`:"–",Ti=te?O(r.leaderHuText,{week:H(te.week,s),virus:q(te.virus,s),pos:te.positivity.toFixed(1)}):r.alertsLoadingPos,Ci=te?q(te.virus,s):r.noDataShort,Ei=ne(te==null?void 0:te.virus),$i=ee?O(r.leaderEuText,{week:H(ee.week,s),year:ee.year,virus:q(ee.virus,s),pos:ee.positivity.toFixed(1)}):r.alertsLoadingEuPos,Wi=ee?q(ee.virus,s):r.noDataShort,Ri=ne(ee==null?void 0:ee.virus);return e.jsxs("div",{className:`app-shell theme-${u}`,children:[e.jsxs("header",{className:"topbar",children:[e.jsxs("div",{children:[e.jsx("h1",{children:r.appTitle}),e.jsx("p",{className:"subtitle",children:r.appSubtitle})]}),e.jsxs("div",{className:"controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"year-select",children:r.season}),e.jsx("select",{id:"year-select",value:o.selectedYear,onChange:a=>v(Number(a.target.value)),children:o.availableYears.map(a=>e.jsxs("option",{value:a,children:[a,"-",a+1]},a))})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"lang-select",children:r.language}),e.jsxs("select",{id:"lang-select",value:s,onChange:a=>l(Ae(a.target.value)),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hu",children:"Magyar"})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"theme-select",children:r.theme}),e.jsxs("select",{id:"theme-select",value:c,onChange:a=>d(Yt(a.target.value)),children:[e.jsx("option",{value:"system",children:r.themeSystem}),e.jsx("option",{value:"dark",children:r.themeDark}),e.jsx("option",{value:"light",children:r.themeLight})]})]})]})]}),e.jsxs("section",{className:"alerts-grid","aria-label":r.alertsAria,children:[e.jsxs("article",{className:`alert-card primary epidemic ${xi}`,role:"status","aria-live":"polite",children:[e.jsx("span",{className:"alert-kicker",children:r.decisionTitle}),e.jsxs("h2",{children:[fe?e.jsx("span",{className:"alert-status-icon","aria-hidden":"true",children:"!"}):null,e.jsx("span",{children:Ni})]}),e.jsx("p",{className:"alert-standfirst",children:Si}),e.jsx("p",{children:wi}),e.jsxs("div",{className:"alert-meta",children:[e.jsxs("span",{className:`alert-meta-chip confidence-${ft}`,children:[r.decisionConfidence,": ",Li]}),e.jsxs("span",{className:"alert-meta-chip",children:[r.decisionFreshness,": ",H(o.stats.latestWeek,s)]})]}),e.jsx("button",{type:"button",className:"alert-evidence-btn",onClick:()=>Pe("hu-ili-sari-charts"),children:r.decisionEvidenceIli})]}),e.jsxs("article",{className:`alert-card leader summary ${Ei}`,role:"status","aria-live":"polite",children:[e.jsx("h2",{children:r.leaderHuTitle}),e.jsxs("div",{className:"alert-emphasis-row",children:[te?e.jsx(Jt,{virus:te.virus}):null,e.jsx("strong",{className:"alert-emphasis",children:Ci})]}),e.jsx("p",{children:Ti}),e.jsxs("div",{className:"alert-meta",children:[e.jsxs("span",{className:`alert-meta-chip confidence-${pt}`,children:[r.decisionConfidence,": ",ji]}),e.jsxs("span",{className:"alert-meta-chip",children:[r.decisionFreshness,": ",Le]})]}),e.jsx("button",{type:"button",className:"alert-evidence-btn",onClick:()=>Pe("hu-sentinel-positivity"),children:r.decisionEvidenceHuPositivity})]}),e.jsxs("article",{className:`alert-card leader summary ${Ri}`,role:"status","aria-live":"polite",children:[e.jsx("h2",{children:r.leaderEuTitle}),e.jsxs("div",{className:"alert-emphasis-row",children:[ee?e.jsx(Jt,{virus:ee.virus}):null,e.jsx("strong",{className:"alert-emphasis",children:Wi})]}),e.jsx("p",{children:$i}),e.jsxs("div",{className:"alert-meta",children:[e.jsxs("span",{className:`alert-meta-chip confidence-${vt}`,children:[r.decisionConfidence,": ",Ii]}),e.jsxs("span",{className:"alert-meta-chip",children:[r.decisionFreshness,": ",Be]})]}),e.jsx("button",{type:"button",className:"alert-evidence-btn",onClick:()=>Pe("eu-positivity-chart"),children:r.decisionEvidenceEuPositivity})]})]}),e.jsxs("section",{className:"region-block hu-block","aria-label":r.sectionHuTitle,children:[e.jsxs("section",{className:"region-divider hu","aria-label":r.sectionHuTitle,children:[e.jsxs("div",{className:"region-divider-main",children:[e.jsx("span",{className:"region-divider-kicker",children:r.sectionKicker}),e.jsxs("div",{children:[e.jsx("h2",{children:r.sectionHuTitle}),e.jsx("p",{children:r.sectionHuNote})]})]}),e.jsxs("button",{type:"button",className:"section-toggle region-toggle","aria-expanded":U,"aria-controls":"hu-region-content","aria-label":`${U?r.sectionCollapse:r.sectionExpand}: ${r.sectionHuTitle}`,onClick:()=>ue(a=>!a),children:[e.jsx("span",{className:`section-toggle-icon ${U?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:U?r.sectionCollapse:r.sectionExpand})]})]}),U?e.jsxs("div",{id:"hu-region-content",className:"region-content",children:[e.jsxs("section",{className:"briefing-grid",children:[e.jsxs("section",{className:"surge-section","aria-label":r.trendAria,children:[e.jsxs("header",{className:"surge-header",children:[e.jsx("h2",{children:r.trendTitle}),e.jsx("p",{children:r.trendNote})]}),e.jsx("ul",{className:"surge-list",children:We.length?We.map(a=>e.jsxs("li",{className:`surge-item trend-${a.direction}`,children:[e.jsxs("div",{children:[e.jsxs("span",{className:`pathogen-name ${ne(a.virus)}`,children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),e.jsx("strong",{children:q(a.virus,s)})]}),e.jsx("span",{children:a.week!=null?H(a.week,s):"–"})]}),e.jsx("span",{className:"pill",children:a.label})]},`${a.virus}-${a.week??"na"}`)):e.jsx("li",{className:"surge-empty",children:r.trendEmpty})})]}),e.jsxs("section",{className:"stats-grid briefing-stats-grid",children:[e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsTotalIli}),e.jsx("strong",{children:o.stats.totalIliCases.toLocaleString()})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsPeakIli}),e.jsxs("strong",{children:[H(o.stats.peakIliWeek,s)," / ",((yt=o.stats.peakIliCases)==null?void 0:yt.toLocaleString())??"-"]})]}),e.jsxs("article",{className:"stat-card stat-card-ili-compare",children:[e.jsxs("div",{className:"stat-card-ili-head",children:[e.jsx("h3",{children:r.statsIliVsPrev}),e.jsx("span",{className:"stat-week-chip",children:Y?H(Y.week,s):"–"})]}),e.jsxs("div",{className:"stat-card-ili-main",children:[e.jsx("strong",{children:Y?Y.currentCases.toLocaleString():"–"}),(Y==null?void 0:Y.deltaPercent)!=null&&Y.previousCases!=null?e.jsx("span",{className:`stat-delta-pill trend-${Y.direction}`,children:Ze(Y.deltaPercent)}):null]}),e.jsx("p",{className:"stat-compare-baseline",children:(Y==null?void 0:Y.deltaPercent)!=null&&Y.previousCases!=null?O(r.statsIliVsPrevBaseline,{season:o.historical.compareSeasonLabel??String(o.selectedYear-1),value:Y.previousCases.toLocaleString()}):r.statsIliVsPrevNoBaseline})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsFirstCrossing}),e.jsx("strong",{children:H(o.stats.firstIliThresholdCrossingWeek,s)})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsWeeksAbove}),e.jsx("strong",{children:o.stats.weeksAboveIliThreshold.toLocaleString()})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsLatestSari}),e.jsxs("strong",{children:[o.stats.latestSariAdmissions??"-"," / ",o.stats.latestSariIcu??"-"]})]})]})]}),e.jsxs("section",{id:"hu-ili-sari-charts",className:"charts-grid",children:[e.jsx(se,{title:r.chartIli,subtitle:O(r.chartIliSubtitle,{season:o.seasonLabel,threshold:o.iliThreshold.toLocaleString()}),option:ci}),e.jsx(se,{title:r.chartSari,subtitle:O(r.chartSariSubtitle,{season:o.seasonLabel}),option:ui})]}),e.jsxs("section",{className:"historical-section",children:[e.jsxs("header",{className:"historical-header",children:[e.jsx("h2",{children:r.historicalTitle}),o.historical.available&&o.historical.compareSeasonLabel?e.jsx("p",{children:s==="hu"?`${o.historical.currentSeasonLabel} összevetve: ${o.historical.compareSeasonLabel}`:`${o.historical.currentSeasonLabel} vs ${o.historical.compareSeasonLabel}`}):e.jsx("p",{children:r.historicalEmptyHeader})]}),o.historical.available&&o.historical.compareSeasonLabel&&ut&&dt&&gt?e.jsxs("div",{className:"historical-grid",children:[e.jsx(se,{title:r.historicalIli,subtitle:O(r.historicalDelta,{value:he(o.historical.ili.latestDeltaPercent)}),option:ut}),e.jsx(se,{title:r.historicalSari,subtitle:O(r.historicalDelta,{value:he(o.historical.sariAdmissions.latestDeltaPercent)}),option:dt}),e.jsx(se,{title:r.historicalIcu,subtitle:O(r.historicalDelta,{value:he(o.historical.sariIcu.latestDeltaPercent)}),option:gt})]}):e.jsx("article",{className:"historical-empty",children:r.historicalUnavailable})]}),e.jsxs("section",{className:"virology-section collapsible-section",children:[e.jsxs("header",{className:"virology-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.virologyTitle}),e.jsx("p",{children:O(r.virologyWeek,{week:Le})})]}),e.jsxs("div",{className:"virology-header-actions",children:[e.jsxs("div",{className:"virology-controls",children:[e.jsx("label",{htmlFor:"virology-virus-select",children:r.virologyFilter}),e.jsxs("select",{id:"virology-virus-select",value:p,onChange:a=>f(a.target.value),children:[e.jsx("option",{value:ce,children:r.virologyAllViruses}),o.virology.availableDetectionViruses.map(a=>e.jsx("option",{value:a,children:q(a,s)},a))]})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":j,"aria-controls":"sentinel-virology-content","aria-label":`${j?r.sectionCollapse:r.sectionExpand}: ${r.virologyTitle}`,onClick:()=>$(a=>!a),children:[e.jsx("span",{className:`section-toggle-icon ${j?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:j?r.sectionCollapse:r.sectionExpand})]})]})]}),j?e.jsxs("div",{id:"sentinel-virology-content",className:"section-content",children:[e.jsxs("div",{className:"virology-grid",children:[e.jsx(se,{title:r.virologyDetectionsTrend,subtitle:O(r.virologyDetectionsSubtitle,{week:Le}),option:di}),e.jsx("div",{id:"hu-sentinel-positivity",children:e.jsx(se,{title:r.virologyPositivityTrend,subtitle:O(r.virologyDetectionsSubtitle,{week:Le}),option:gi})})]}),e.jsxs("div",{className:"virology-lists",children:[e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.virologyTopDetections}),at.length?e.jsx("ul",{children:at.map(a=>e.jsxs("li",{className:ne(a.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),q(a.virus,s)]}),e.jsx("strong",{children:a.detections.toLocaleString()})]},`${a.virus}-${a.week}`))}):e.jsx("p",{className:"virology-empty",children:r.virologyNoDetections})]}),e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.virologyTopPositivity}),ot.length?e.jsx("ul",{children:ot.map(a=>e.jsxs("li",{className:ne(a.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),q(a.virus,s)]}),e.jsxs("strong",{children:[a.positivity.toFixed(1),"%"]})]},`${a.virus}-${a.week}`))}):e.jsx("p",{className:"virology-empty",children:r.virologyNoPositivity})]})]})]}):null]}),e.jsxs("section",{className:"glance-section collapsible-section","aria-label":r.glanceAria,children:[e.jsxs("header",{className:"glance-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.glanceTitle}),e.jsx("p",{children:r.glanceNote})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":C,"aria-controls":"season-glance-content","aria-label":`${C?r.sectionCollapse:r.sectionExpand}: ${r.glanceTitle}`,onClick:()=>B(a=>!a),children:[e.jsx("span",{className:`section-toggle-icon ${C?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:C?r.sectionCollapse:r.sectionExpand})]})]}),C?e.jsxs("div",{id:"season-glance-content",className:"glance-grid",children:[e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceIli}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:Ge(((kt=V.iliGlance)==null?void 0:kt.peak)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:Ke(V.iliGlance,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:qe(((xt=V.iliGlance)==null?void 0:xt.slope)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:he(V.iliWow)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWeeksAbove}),e.jsx("span",{className:"glance-value",children:o.iliSeries.length?V.weeksAboveThreshold.toLocaleString():"–"})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceSari}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:Ge(((St=V.sariGlance)==null?void 0:St.peak)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:Ke(V.sariGlance,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:qe(((wt=V.sariGlance)==null?void 0:wt.slope)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:he(V.sariWow)})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceIcu}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:Ge(((Nt=V.icuGlance)==null?void 0:Nt.peak)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:Ke(V.icuGlance,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:qe(((Lt=V.icuGlance)==null?void 0:Lt.slope)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:he(V.icuWow)})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceStdTitle}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceStdIli}),e.jsx("span",{className:"glance-value",children:Zt(V.iliSeasonToDate,{noBaseline:r.stdNoBaseline,median:r.stdMedian,lastSeason:r.stdLastSeason})})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceStdSari}),e.jsx("span",{className:"glance-value",children:Zt(V.sariSeasonToDate,{noBaseline:r.stdNoBaseline,median:r.stdMedian,lastSeason:r.stdLastSeason})})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceSeverityTitle}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSeveritySari}),e.jsx("span",{className:"glance-value",children:V.severity?`${H(V.severity.week,s)}: ${V.severity.sariPercent.toFixed(1)}%`:"–"})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSeverityIcu}),e.jsx("span",{className:"glance-value",children:V.severity&&Number.isFinite(V.severity.icuShare)?`${H(V.severity.week,s)}: ${Number(V.severity.icuShare).toFixed(1)}%`:"–"})]})]})]}):null]}),e.jsxs("section",{className:"table-section collapsible-section","aria-label":r.tableAria,children:[e.jsxs("header",{className:"table-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.tableTitle}),e.jsx("p",{children:r.tableNote})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":W,"aria-controls":"weekly-table-content","aria-label":`${W?r.sectionCollapse:r.sectionExpand}: ${r.tableTitle}`,onClick:()=>G(a=>!a),children:[e.jsx("span",{className:`section-toggle-icon ${W?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:W?r.sectionCollapse:r.sectionExpand})]})]}),W?e.jsx("div",{id:"weekly-table-content",className:"table-scroll",role:"region","aria-label":r.tableScrollAria,children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{scope:"col",className:"sortable",tabIndex:0,"aria-sort":vi,onClick:()=>we("week"),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),we("week"))},children:[e.jsx("span",{children:r.tableWeek}),e.jsx("span",{className:"sort-indicator","aria-hidden":"true",children:yi})]}),e.jsx("th",{scope:"col",children:r.tableVirus}),e.jsx("th",{scope:"col",children:r.tableRegion}),e.jsxs("th",{scope:"col",className:"sortable",tabIndex:0,"aria-sort":bi,onClick:()=>we("cases"),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),we("cases"))},children:[e.jsx("span",{children:r.tableCases}),e.jsx("span",{className:"sort-indicator","aria-hidden":"true",children:ki})]}),e.jsx("th",{scope:"col",children:r.tableSariAdmissions}),e.jsx("th",{scope:"col",children:r.tableSariIcu}),e.jsx("th",{scope:"col",children:r.tableTopPositivity})]})}),e.jsx("tbody",{children:ht.length?ht.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:H(a.week,s)}),e.jsx("td",{children:q(a.virus,s)}),e.jsx("td",{children:a.region==="National"?r.regionNational:a.region}),e.jsx("td",{children:Number.isFinite(a.cases)?Number(a.cases).toLocaleString():"–"}),e.jsx("td",{children:Number.isFinite(a.sariAdmissions)?Number(a.sariAdmissions).toLocaleString():"–"}),e.jsx("td",{children:Number.isFinite(a.sariIcu)?Number(a.sariIcu).toLocaleString():"–"}),e.jsx("td",{children:a.topPositivityVirus&&Number.isFinite(a.topPositivity)?e.jsxs("span",{className:`table-top-positivity ${ne(a.topPositivityVirus)}`,children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),e.jsxs("span",{children:[q(a.topPositivityVirus,s)," (",Number(a.topPositivity).toFixed(1),"%)"]})]}):"–"})]},a.week)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:r.tableNoData})})})]})}):null]})]}):null]}),e.jsxs("section",{className:"region-block eu-block","aria-label":r.sectionEuTitle,children:[e.jsxs("section",{className:"region-divider eu","aria-label":r.sectionEuTitle,children:[e.jsxs("div",{className:"region-divider-main",children:[e.jsx("span",{className:"region-divider-kicker",children:r.sectionKicker}),e.jsxs("div",{children:[e.jsx("h2",{children:r.sectionEuTitle}),e.jsx("p",{children:r.sectionEuNote})]})]}),e.jsxs("button",{type:"button",className:"section-toggle region-toggle","aria-expanded":ae,"aria-controls":"eu-region-content","aria-label":`${ae?r.sectionCollapse:r.sectionExpand}: ${r.sectionEuTitle}`,onClick:()=>rt(a=>!a),children:[e.jsx("span",{className:`section-toggle-icon ${ae?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:ae?r.sectionCollapse:r.sectionExpand})]})]}),ae?e.jsx("div",{id:"eu-region-content",className:"region-content",children:e.jsxs("section",{className:"virology-section eu-section",children:[e.jsx("header",{className:"virology-header",children:e.jsxs("div",{children:[e.jsx("h2",{children:r.euVirologyTitle}),e.jsx("p",{children:O(r.virologyWeek,{week:Be})})]})}),e.jsxs("div",{className:"virology-grid",children:[e.jsx(se,{title:r.euDetectionsTrend,subtitle:O(r.euTrendSubtitle,{season:bt}),option:hi}),e.jsx("div",{id:"eu-positivity-chart",children:e.jsx(se,{title:r.euPositivityTrend,subtitle:O(r.euTrendSubtitle,{season:bt}),option:mi})})]}),e.jsxs("div",{className:"virology-lists eu-summary-lists",children:[e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.euTopDetections}),lt.length?e.jsx("ul",{children:lt.map(a=>e.jsxs("li",{className:ne(a.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),q(a.virus,s)]}),e.jsx("strong",{children:a.detections.toLocaleString()})]},`${a.virus}-${a.week}`))}):e.jsx("p",{className:"virology-empty",children:r.euNoDetections})]}),e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.euTopPositivity}),ct.length?e.jsx("ul",{children:ct.map(a=>e.jsxs("li",{className:ne(a.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),q(a.virus,s)]}),e.jsxs("strong",{children:[a.positivity.toFixed(1),"%"]})]},`${a.virus}-${a.week}`))}):e.jsx("p",{className:"virology-empty",children:r.euNoPositivity})]})]})]})}):null]}),e.jsxs("footer",{className:"dashboard-footer","aria-label":r.coverageAria,children:[e.jsxs("div",{className:"footer-strip",role:"status","aria-live":"polite",children:[e.jsxs("span",{className:`footer-chip source ${zi}`,children:[Ai,S?` (${r.sourceLoading})`:""]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageNngyk,": ",fi]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageSari,": ",pi]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageErviss,": ",Be]}),e.jsxs("span",{className:`footer-chip ${Ee.length+$e.length?"warn":"ok"}`,children:[r.coverageMissing,": ",Ee.length,"/",$e.length]})]}),o.warnings.length?e.jsxs("p",{className:"footer-warnings-inline",children:[e.jsxs("strong",{children:[r.warningsTitle,":"]})," ",o.warnings.join(" · ")]}):null]})]})}Fi.createRoot(document.getElementById("root")).render(e.jsx(Vi.StrictMode,{children:e.jsx(Us,{})}));
