import{r as N,j as e,c as is,R as ts}from"./vendor-react-QK7G4MDf.js";import{o as Ae,s as Ne,c as ee,a as ve,r as ss}from"./vendor-zod-Rs9PvQDD.js";import{V as di}from"./vendor-CElDmkQT.js";import{u as ns,i as rs,a as as,b as os,c as ls,d as cs,e as us,f as ds,g as gs,h as hs,j as ms,k as ps,l as fs}from"./vendor-echarts-Cbwmcc-H.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();const bs={datasets:{NNGYK:{name:"NNGYK (Hungary)",description:"Aggregated national respiratory surveillance (ILI focus)."}},years:[2025],viruses:["ILI (flu-like illness)"],weekly:[{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:40,cases:2100,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:42,cases:2480,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:44,cases:3120,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:46,cases:3890,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:48,cases:4510,region:"National"}],sariWeekly:[{year:2025,week:40,admissions:94,icu:10},{year:2025,week:42,admissions:120,icu:14},{year:2025,week:44,admissions:180,icu:22},{year:2025,week:46,admissions:220,icu:28}],virologyDetections:[{year:2025,week:40,virus:"SARS-CoV-2",detections:20},{year:2025,week:46,virus:"Influenza A(H1N1pdm09)",detections:2},{year:2025,week:46,virus:"RSV",detections:1}],virologyPositivity:[{year:2025,week:40,virus:"SARS-CoV-2",positivity:19.4},{year:2025,week:46,virus:"Influenza",positivity:1.5},{year:2025,week:46,virus:"RSV",positivity:.7}],variants:[]},vs={2024:"2024-2025",2025:"2025-2026"},ys=Ae({dataset:Ne().optional(),year:ee.number(),virus:Ne().optional(),week:ee.number(),cases:ee.number().nullable().optional(),region:Ne().optional()}).passthrough(),ks=Ae({year:ee.number(),week:ee.number(),admissions:ee.number().nullable().optional(),icu:ee.number().nullable().optional()}).passthrough(),Pi=Ae({year:ee.number().optional(),week:ee.number(),virus:Ne().optional(),detections:ee.number().nullable().optional()}).passthrough(),Bi=Ae({year:ee.number().optional(),week:ee.number(),virus:Ne().optional(),positivity:ee.number().nullable().optional()}).passthrough(),vi=Ae({years:ve(ee.number()).default([]),weekly:ve(ys).default([]),sariWeekly:ve(ks).default([]),virologyDetections:ve(Pi).default([]),virologyPositivity:ve(Bi).default([]),ervissDetections:ve(Pi).default([]),ervissPositivity:ve(Bi).default([])}).passthrough(),xs=ss(Ne()).default({}),Hi="NNGYK",mt="ILI (flu-like illness)",ke="__all_viruses__",ie="__influenza_all__",Fe=28900,Te=40,pt=20,Ss=vi.parse(bs),Ns=xs.parse(vs);function Be(i){return{source:"bundled",respiratoryData:Ss,seasonLabels:Ns,iliAgeSplits:[],note:i}}function Yi(i){return i>=Te?i:i+53}function de(i,t){return Yi(i)-Yi(t)}function ft(i){return i>=Te||i<=pt}function bt(i,t,n){return ft(t)?i===n&&t>=Te||i===n+1&&t<=pt:!1}function _i(i,t){return!Number.isFinite(i)||!Number.isFinite(t)||!ft(t)?null:t>=Te?i:i-1}function ws(i){const t=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())),n=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-n);const s=t.getUTCFullYear(),l=new Date(Date.UTC(s,0,1)),a=Math.ceil(((t.getTime()-l.getTime())/864e5+1)/7);return{year:s,week:a}}function Ls(i=new Date){const{year:t,week:n}=ws(i);return n>=Te?t:t-1}function me(i){return`W${String(i).padStart(2,"0")}`}function gi(i,t){const n=i[String(t)];return n||`${t}-${t+1}`}function Ce(i){if(!i)return"";const t=String(i).normalize("NFKC").replace(/\u00a0/g," ").replace(/\s+/g," ").trim();return t?/^ili\s*\(\s*flu[-\s]*like illness\s*\)$/i.test(t)?mt:/^influenza$/i.test(t)?"Influenza":/^influenza\s+a$/i.test(t)?"Influenza A":/^influenza\s+b$/i.test(t)?"Influenza B":/^influenza\s+untyped$/i.test(t)?"Influenza (untyped)":/^influenza\s+a\s*\(\s*h1n1pdm09\s*\)$/i.test(t)||/^influenza\s+a\s*\(\s*h1pdm09\s*\)$/i.test(t)||/^influenza\s+a\s+h1n1pdm09$/i.test(t)||/^influenza\s+a\s+h1pdm09$/i.test(t)?"Influenza A(H1N1pdm09)":/^influenza\s+a\s*\(\s*h3\s*\)$/i.test(t)||/^influenza\s+a\s+h3$/i.test(t)?"Influenza A(H3)":/^influenza\s+a\s*\(\s*nt\s*\)$/i.test(t)||/^influenza\s+a\s+nt$/i.test(t)?"Influenza A(NT)":/^a\s*\(\s*h1\s*\)\s*pdm09$/i.test(t)?"Influenza A(H1N1pdm09)":/^a\s*\(\s*h3\s*\)$/i.test(t)?"Influenza A(H3)":/^a\s*\(\s*unknown\s*\)$/i.test(t)?"Influenza A(NT)":/^sars[-\s]*cov[-\s]*2$/i.test(t)?"SARS-CoV-2":/^rs[-\s]*v(i[íi]rus)?$/i.test(t)?"RSV":t:""}function js(i){return i===ie?!1:Ce(i).startsWith("Influenza")}function Is(i,t){const n=new Map;for(const l of i.virologyDetections){const a=Number(l.year);if(Number.isFinite(a)&&a!==t)continue;const d=Number(l.week);if(!Number.isFinite(d))continue;const u=Number(l.detections??0);if(!Number.isFinite(u))continue;const h=Ce(l.virus);if(!h)continue;const g=`${d}::${h}`,b=n.get(g);if(b){b.detections+=u;continue}n.set(g,{week:d,label:me(d),virus:h,detections:u})}const s=new Map;for(const l of n.values())js(l.virus)&&s.set(l.week,(s.get(l.week)??0)+l.detections);for(const[l,a]of s.entries())!Number.isFinite(a)||a<=0||n.set(`${l}::${ie}`,{week:l,label:me(l),virus:ie,detections:a});return Array.from(n.values()).sort((l,a)=>de(l.week,a.week)||l.virus.localeCompare(a.virus))}function zs(i,t){const n=new Map;for(const s of i.virologyPositivity){const l=Number(s.year);if(Number.isFinite(l)&&l!==t)continue;const a=Number(s.week);if(!Number.isFinite(a))continue;const d=Number(s.positivity??0);if(!Number.isFinite(d))continue;const u=Ce(s.virus);if(!u)continue;const h=`${a}::${u}`,g=n.get(h);(!g||d>g.positivity)&&n.set(h,{week:a,label:me(a),virus:u,positivity:d})}return Array.from(n.values()).sort((s,l)=>de(s.week,l.week)||s.virus.localeCompare(l.virus))}function As(i,t){const n=Is(i,t),s=zs(i,t),l=Array.from(new Set(n.map(u=>u.virus))).sort((u,h)=>u===ie?-1:h===ie?1:u.localeCompare(h)),a=Array.from(new Set(n.map(u=>u.week).concat(s.map(u=>u.week)).filter(u=>Number.isFinite(u)))),d=a.length?a.reduce((u,h)=>de(h,u)>0?h:u,a[0]):null;return{available:n.length>0||s.length>0,latestWeek:d,availableDetectionViruses:l,detectionRows:n,positivityRows:s}}function Ts(i,t){const n=new Map;for(const s of i.ervissDetections){const l=Number(s.year);if(!Number.isFinite(l))continue;const a=Number(s.week);if(!Number.isFinite(a)||!bt(l,a,t))continue;const d=Number(s.detections??0);if(!Number.isFinite(d))continue;const u=Ce(s.virus);if(!u)continue;const h=`${a}::${u}`,g=n.get(h);if(g){g.detections+=d;continue}n.set(h,{week:a,label:me(a),virus:u,detections:d})}return Array.from(n.values()).sort((s,l)=>de(s.week,l.week)||s.virus.localeCompare(l.virus))}function Cs(i,t){const n=new Map;for(const s of i.ervissPositivity){const l=Number(s.year);if(!Number.isFinite(l))continue;const a=Number(s.week);if(!Number.isFinite(a)||!bt(l,a,t))continue;const d=Number(s.positivity??0);if(!Number.isFinite(d))continue;const u=Ce(s.virus);if(!u)continue;const h=`${a}::${u}`,g=n.get(h);(!g||d>g.positivity)&&n.set(h,{week:a,label:me(a),virus:u,positivity:d})}return Array.from(n.values()).sort((s,l)=>de(s.week,l.week)||s.virus.localeCompare(l.virus))}function $s(i){const t=Array.from(new Set(i.ervissDetections.map(u=>_i(Number(u.year),Number(u.week))).concat(i.ervissPositivity.map(u=>_i(Number(u.year),Number(u.week)))).filter(u=>typeof u=="number"&&Number.isFinite(u)))).sort((u,h)=>u-h);if(!t.length)return{available:!1,availableYears:[],targetYear:null,latestWeek:null,detectionRows:[],positivityRows:[]};const n=Ls(),s=t.includes(n)?n:t[t.length-1],l=Ts(i,s),a=Cs(i,s),d=(()=>{const u=l.map(h=>h.week).concat(a.map(h=>h.week));return u.length?u.reduce((h,g)=>de(g,h)>0?g:h,u[0]):null})();return{available:l.length>0||a.length>0,availableYears:t,targetYear:s,latestWeek:d,detectionRows:l,positivityRows:a}}function hi(i,t){const n=new Map;for(const s of i.weekly){if((s.dataset??Hi)!==Hi||s.year!==t||s.virus!==mt)continue;const l=Number(s.week);if(!Number.isFinite(l))continue;const a=Number(s.cases??0);n.set(l,(n.get(l)??0)+(Number.isFinite(a)?a:0))}return Array.from(n.entries()).sort((s,l)=>de(s[0],l[0])).map(([s,l])=>({week:s,label:me(s),cases:l}))}function mi(i,t){const n=new Map;for(const s of i.sariWeekly){if(s.year!==t)continue;const l=Number(s.week);if(!Number.isFinite(l))continue;const a=Number(s.admissions??0),d=Number(s.icu??0),u=n.get(l)??{admissions:0,icu:0};u.admissions+=Number.isFinite(a)?a:0,u.icu+=Number.isFinite(d)?d:0,n.set(l,u)}return Array.from(n.entries()).sort((s,l)=>de(s[0],l[0])).map(([s,l])=>({week:s,label:me(s),admissions:l.admissions,icu:l.icu}))}function Es(i){const t=new Set(i.years);for(const n of i.weekly)t.add(Number(n.year));for(const n of i.sariWeekly)t.add(Number(n.year));return Array.from(t).filter(n=>Number.isFinite(n)).sort((n,s)=>n-s)}function xe(i,t){const n=new Map;for(const s of i){const l=Number(s.week);if(!Number.isFinite(l))continue;const a=Number(t(s));Number.isFinite(a)&&n.set(l,(n.get(l)??0)+a)}return n}function Ws(i){const t=new Set;for(const n of i)for(const s of n.keys())Number.isFinite(s)&&t.add(s);return Array.from(t).sort((n,s)=>de(n,s))}function Rs(i,t,n){for(let s=n.length-1;s>=0;s-=1){const l=n[s],a=i.get(l),d=t.get(l);if(!(typeof a!="number"||typeof d!="number")&&!(!Number.isFinite(a)||!Number.isFinite(d)||a===0))return(d-a)/a*100}return null}function Se(){return{points:[],latestDeltaPercent:null}}function ii(i,t,n){return{points:n.map(l=>{const a=i.has(l)?i.get(l)??null:null,d=t.has(l)?t.get(l)??null:null,u=typeof a=="number"?a:null,h=typeof d=="number"?d:null,g=u!=null&&h!=null&&Number.isFinite(u)&&Number.isFinite(h)&&u!==0?(h-u)/u*100:null;return{week:l,label:me(l),previous:a,current:d,deltaPercent:g}}),latestDeltaPercent:Rs(i,t,n)}}function Fs(i,t,n,s){const l=s.includes(n-1)?n-1:null,a=gi(t,n),d=l==null?null:gi(t,l);if(l==null)return{available:!1,compareYear:null,compareSeasonLabel:null,currentSeasonLabel:a,ili:Se(),sariAdmissions:Se(),sariIcu:Se()};const u=hi(i,l),h=hi(i,n),g=mi(i,l),b=mi(i,n),T=xe(u,x=>x.cases),f=xe(h,x=>x.cases),p=xe(g,x=>x.admissions),$=xe(b,x=>x.admissions),m=xe(g,x=>x.icu),S=xe(b,x=>x.icu),y=Ws([T,f,p,$,m,S]);return y.length?{available:!0,compareYear:l,compareSeasonLabel:d,currentSeasonLabel:a,ili:ii(T,f,y),sariAdmissions:ii(p,$,y),sariIcu:ii(m,S,y)}:{available:!1,compareYear:l,compareSeasonLabel:d,currentSeasonLabel:a,ili:Se(),sariAdmissions:Se(),sariIcu:Se()}}function Ds(i,t){const{respiratoryData:n,seasonLabels:s}=i,l=Es(n),a=l.length?l[l.length-1]:new Date().getFullYear(),d=typeof t=="number"&&Number.isFinite(t)&&l.includes(t)?t:a,u=hi(n,d),h=mi(n,d),g=As(n,d),b=$s(n),T=Fs(n,s,d,l),f=u.reduce((x,C)=>x+C.cases,0),p=u.reduce((x,C)=>!x||C.cases>x.cases?C:x,null),$=u.length?u[u.length-1]:null,m=h.length?h[h.length-1]:null,S=(()=>{if(u.length<2)return null;for(let x=1;x<u.length;x+=1)if(u[x].cases>=Fe&&u[x-1].cases<Fe)return u[x].week;return null})(),y=[];return u.length||y.push("No ILI rows for this season in loaded source."),h.length||y.push("No SARI rows for this season in loaded source."),g.available||y.push("No virology rows for this season in loaded source."),b.available||y.push("No EU/EEA ERVISS rows available."),i.note&&y.push(i.note),{selectedYear:d,seasonLabel:gi(s,d),availableYears:l,iliThreshold:Fe,iliSeries:u,sariSeries:h,virology:g,euVirology:b,historical:T,stats:{totalIliCases:f,peakIliWeek:(p==null?void 0:p.week)??null,peakIliCases:(p==null?void 0:p.cases)??null,latestWeek:($==null?void 0:$.week)??(m==null?void 0:m.week)??null,latestIliCases:($==null?void 0:$.cases)??0,latestSariAdmissions:(m==null?void 0:m.admissions)??null,latestSariIcu:(m==null?void 0:m.icu)??null,weeksAboveIliThreshold:u.filter(x=>x.cases>=Fe).length,firstIliThresholdCrossingWeek:S},warnings:y}}const Vs="modulepreload",Ms=function(i,t){return new URL(i,t).href},Ui={},vt=function(t,n,s){let l=Promise.resolve();if(n&&n.length>0){const d=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));l=Promise.allSettled(n.map(g=>{if(g=Ms(g,s),g in Ui)return;Ui[g]=!0;const b=g.endsWith(".css"),T=b?'[rel="stylesheet"]':"";if(!!s)for(let $=d.length-1;$>=0;$--){const m=d[$];if(m.href===g&&(!b||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${T}`))return;const p=document.createElement("link");if(p.rel=b?"stylesheet":Vs,b||(p.as="script"),p.crossOrigin="",p.href=g,h&&p.setAttribute("nonce",h),document.head.appendChild(p),b)return new Promise(($,m)=>{p.addEventListener("load",$),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return l.then(d=>{for(const u of d||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},Ps="NNGYK",Oi="ILI (flu-like illness)";function X(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Y(i){const t=typeof i=="number"?i:Number(i);return Number.isFinite(t)?t:null}function pi(i){if(typeof i!="string")return null;const t=i.trim();return t.length?t:null}function ze(i){const t=pi(i);if(!t)return Oi;const n=t.normalize("NFKC").replace(/\u00a0/g," ").replace(/\s+/g," ").trim();return/^ili\s*\(\s*flu[-\s]*like illness\s*\)$/i.test(n)?Oi:/^influenza$/i.test(n)?"Influenza":/^influenza\s+a$/i.test(n)?"Influenza A":/^influenza\s+b$/i.test(n)?"Influenza B":/^influenza\s+untyped$/i.test(n)?"Influenza (untyped)":/^influenza\s+a\s*\(\s*h1n1pdm09\s*\)$/i.test(n)||/^influenza\s+a\s*\(\s*h1pdm09\s*\)$/i.test(n)||/^a\s*\(\s*h1\s*\)\s*pdm09$/i.test(n)?"Influenza A(H1N1pdm09)":/^influenza\s+a\s*\(\s*h3\s*\)$/i.test(n)||/^a\s*\(\s*h3\s*\)$/i.test(n)?"Influenza A(H3)":/^influenza\s+a\s*\(\s*nt\s*\)$/i.test(n)||/^a\s*\(\s*unknown\s*\)$/i.test(n)?"Influenza A(NT)":/^sars[-\s]*cov[-\s]*2$/i.test(n)?"SARS-CoV-2":/^rs[-\s]*v(i[íi]rus)?$/i.test(n)?"RSV":n}function De(i){const t=Number(String(i).replace(",","."));return!Number.isFinite(t)||t<0||t>100?null:t}function Bs(i){var g;if(typeof i!="string")return null;const t=i.normalize("NFKC").replace(/\u00a0/g," ").replace(/\s+/g," ").trim();if(!t)return null;const n=((g=/Az influenzaszer[űu] megbeteged[ée]s[\s\S]{0,560}/i.exec(t))==null?void 0:g[0])??t.slice(0,900),s=/(\d{1,2}(?:[.,]\d+)?)%\S*\s*0-14[\s\S]{0,140}?(\d{1,2}(?:[.,]\d+)?)%\S*\s*15-34[\s\S]{0,140}?(\d{1,2}(?:[.,]\d+)?)%\S*[\s\S]{0,140}?35-59[\s\S]{0,140}?(\d{1,2}(?:[.,]\d+)?)%\S*[\s\S]{0,140}?60/i.exec(n);if(!s)return null;const l=De(s[1]),a=De(s[2]),d=De(s[3]),u=De(s[4]);if(l==null||a==null||d==null||u==null)return null;const h=l+a+d+u;return h<85||h>115?null:{age0to14:l,age15to34:a,age35to59:d,age60plus:u}}function Gi(i){return i>=40?i:i+53}function Ie(i,t){return Gi(i)-Gi(t)}function fi(i){try{return null}catch{return null}}async function yt(i){try{const t=await fetch(i,{cache:"no-cache"});return t.ok?await t.json():null}catch{return null}}async function Hs(){const i=fi("../../nngyk_all.json"),t=["./nngyk_all.json","/nngyk_all.json",...i?[i]:[]];for(const n of t){const s=await yt(n);if(s!=null)return{payload:s,location:n}}try{return{payload:(await vt(()=>import("./nngyk_all-6WdLRqwI.js"),[],import.meta.url)).default,location:"@nngyk-all"}}catch{return null}}async function Ys(){const t=["./erviss_data/erviss_sari.json","/erviss_data/erviss_sari.json","./erviss_sari.json","/erviss_sari.json",...[fi("../../erviss_data/erviss_sari.json"),fi("../../erviss_sari.json")].filter(n=>typeof n=="string")];for(const n of t){const s=await yt(n);if(s!=null)return{payload:s,location:n}}try{return{payload:(await vt(()=>import("./erviss_sari-BR0vDMot.js"),[],import.meta.url)).default,location:"@erviss-sari"}}catch{return null}}function _s(i,t){if(!Array.isArray(i))return null;const n=new Map,s=new Map,l=new Map,a=new Map,d=new Map,u=new Set,h=new Set;for(const f of i){if(!X(f))continue;const p=X(f.payload)?f.payload:null;if(!p)continue;const $=Array.isArray(p.weekly)?p.weekly:[],m=X(p.metadata)?p.metadata:null,S=Y(f.season_year)??Y(m==null?void 0:m.season_year)??Y(X($[0])?$[0].year:null),y=Y(f.week)??Y(X($[0])?$[0].week:null);if(S!=null&&y!=null){const A=Bs(p.raw_text);A&&d.set(`${S}::${y}`,{year:S,week:y,...A})}for(const A of $){if(!X(A))continue;const R=Y(A.year)??S,P=Y(A.week)??y;if(R==null||P==null)continue;const D=pi(A.dataset)??Ps,B=ze(A.virus),q=pi(A.region)??"National",ne=Y(A.cases)??0,ge=`${D}::${R}::${P}::${B}::${q}`,we=n.get(ge);we?we.cases+=ne:n.set(ge,{dataset:D,year:R,week:P,virus:B,cases:ne,region:q}),u.add(R),h.add(B)}const x=X(p.sari)?p.sari:null;if(x&&S!=null){const A=Y(x.week)??y,R=Y(x.admissions),P=Y(x.icu);if(A!=null&&(R!=null||P!=null)){const D=`${S}::${A}`,B=s.get(D)??{year:S,week:A,admissions:null,icu:null};R!=null&&(B.admissions=(B.admissions??0)+R),P!=null&&(B.icu=(B.icu??0)+P),s.set(D,B),u.add(S)}}const C=X(p.virology)?p.virology:null;if(C&&S!=null&&y!=null){const A=Array.isArray(C.detections)?C.detections:[],R=Array.isArray(C.positivity)?C.positivity:[];for(const P of A){if(!X(P))continue;const D=ze(P.virus),B=Y(P.detections);if(B==null)continue;const q=`${S}::${y}::${D}`,ne=l.get(q);ne?ne.detections+=B:l.set(q,{year:S,week:y,virus:D,detections:B})}for(const P of R){if(!X(P))continue;const D=ze(P.virus),B=Y(P.positivity);if(B==null)continue;const q=`${S}::${y}::${D}`,ne=a.get(q);(!ne||B>ne.positivity)&&a.set(q,{year:S,week:y,virus:D,positivity:B})}}}if(!n.size)return null;const g={},b=Array.from(u).sort((f,p)=>f-p);for(const f of b)g[String(f)]=`${f}-${f+1}`;return{source:"nngyk_all",respiratoryData:vi.parse({years:b,weekly:Array.from(n.values()).sort((f,p)=>f.year-p.year||Ie(f.week,p.week)||f.virus.localeCompare(p.virus)),sariWeekly:Array.from(s.values()).sort((f,p)=>f.year-p.year||Ie(f.week,p.week)),virologyDetections:Array.from(l.values()).sort((f,p)=>f.year-p.year||Ie(f.week,p.week)||f.virus.localeCompare(p.virus)),virologyPositivity:Array.from(a.values()).sort((f,p)=>f.year-p.year||Ie(f.week,p.week)||f.virus.localeCompare(p.virus)),ervissDetections:[],ervissPositivity:[],viruses:Array.from(h).sort((f,p)=>f.localeCompare(p)),datasets:{NNGYK:{name:"NNGYK (Hungary)",description:"Structured from parsed NNGYK bulletins (latest run)."}}}),seasonLabels:g,iliAgeSplits:Array.from(d.values()).sort((f,p)=>f.year-p.year||Ie(f.week,p.week)),note:`Loaded live bulletin extract from ${t}.`}}function bi(i,t){const n=i.note?`${i.note} ${t}`:t;return{...i,note:n}}function Us(i,t,n){if(!X(t))return null;const s=Y(t.latest_year),l=Array.isArray(t.detections)?t.detections:[],a=Array.isArray(t.positivity)?t.positivity:[],d=l.map(g=>{if(!X(g))return null;const b=Y(g.year)??s,T=Y(g.week),f=Y(g.detections),p=ze(g.virus);return b==null||T==null||f==null||!p?null:{year:b,week:T,virus:p,detections:f}}).filter(g=>g!==null).sort((g,b)=>g.year-b.year||g.week-b.week||g.virus.localeCompare(b.virus)),u=a.map(g=>{if(!X(g))return null;const b=Y(g.year)??s,T=Y(g.week),f=Y(g.positivity),p=ze(g.virus);return b==null||T==null||f==null||!p?null:{year:b,week:T,virus:p,positivity:f}}).filter(g=>g!==null).sort((g,b)=>g.year-b.year||g.week-b.week||g.virus.localeCompare(b.virus));if(!d.length&&!u.length)return null;const h=vi.parse({...i.respiratoryData,ervissDetections:d,ervissPositivity:u,datasets:{...X(i.respiratoryData.datasets)?i.respiratoryData.datasets:{},ERVISS:{name:"ERVISS (EU/EEA)",description:"EU/EEA SARI virological detections and positivity from ECDC ERVISS."}}});return bi({...i,respiratoryData:h},`Loaded ERVISS feed from ${n}.`)}async function Os(){const i=await Hs();let t;i?t=_s(i.payload,i.location)??Be("nngyk_all.json present but invalid for weekly aggregation; using bundled sample."):t=Be("nngyk_all.json not found; using bundled sample.");const n=await Ys();if(!n)return bi(t,"ERVISS feed not found.");const s=Us(t,n.payload,n.location);return s||bi(t,"ERVISS feed present but invalid.")}const Ki=new Intl.NumberFormat("en-US");function Gs(i,t="W"){const n=String(i).padStart(2,"0");return t==="W"?`W${n}`:`${t}${n}`}function Ks(i,t){const n=/^W(\d{1,2})$/i.exec(String(i??"").trim());if(!n)return i;const s=String(n[1]).padStart(2,"0");return t==="W"?`W${s}`:`${t}${s}`}function qs({points:i,threshold:t,compact:n,dark:s=!1,labels:l}){const a=s?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",markerLine:"rgba(148, 163, 184, 0.38)",markerLabel:"#cbd5e1",markerBg:"rgba(15, 23, 42, 0.88)",currentWeekLine:"rgba(125, 211, 252, 0.55)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",markerLine:"rgba(15, 23, 42, 0.16)",markerLabel:"#64748b",markerBg:"rgba(255, 255, 255, 0.85)",currentWeekLine:"rgba(37, 99, 235, 0.45)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},d=l??{iliCases:"ILI cases",alertThreshold:"Alert threshold",crossing:"Threshold crossing",noData:"No data",seasonStart:"Season start",holidays:"Holiday period"},u=(l==null?void 0:l.weekPrefix)??"W",h=[{week:40,text:d.seasonStart},{week:52,text:d.holidays},{week:1,text:d.holidays}],b=i.map(y=>y.label).map(y=>Ks(y,u)),T=i.map(y=>y.cases),f=b.length>0,p=f?b[b.length-1]:null,$=h.map(y=>{const x=Gs(y.week,u);return b.includes(x)?{name:y.text,xAxis:x}:null}).filter(y=>y!==null),m=[{name:d.iliCases,type:"line",data:f?T:[0],smooth:.24,showSymbol:!1,symbol:"circle",symbolSize:7,lineStyle:{width:3,color:s?"#7dd3fc":"#2563eb",cap:"round"},areaStyle:{color:new di(0,0,0,1,[{offset:0,color:s?"rgba(125, 211, 252, 0.42)":"rgba(59, 130, 246, 0.28)"},{offset:1,color:s?"rgba(56, 189, 248, 0.06)":"rgba(147, 197, 253, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3.6}},markLine:p?{symbol:["none","none"],silent:!0,lineStyle:{color:a.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:p}]}:void 0,z:3},{name:d.alertThreshold,type:"line",data:f?b.map(()=>t):[t],symbol:"none",itemStyle:{color:"#dc2626"},lineStyle:{color:"#dc2626",type:"dashed",width:2},emphasis:{lineStyle:{color:"#dc2626",width:2.2}},markLine:$.length?{symbol:["none","none"],silent:!0,lineStyle:{color:a.markerLine,width:1,type:"solid"},label:{color:a.markerLabel,formatter:"{b}",position:"insideStartTop",padding:[2,4],backgroundColor:a.markerBg,borderRadius:4},data:$}:void 0,z:5}];let S;if(n&&b.length>12){const y=Math.max(0,b.length-12);S=[{type:"inside",xAxisIndex:0,startValue:b[y],endValue:b[b.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:b[y],endValue:b[b.length-1],brushSelect:!1,showDataShadow:!1,borderColor:a.sliderBorder,fillerColor:a.sliderFill,moveHandleSize:6,textStyle:{color:a.sliderText}}]}return{animation:!1,aria:{enabled:!0},grid:{top:n?42:78,right:20,bottom:n&&S?58:36,left:54},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:a.currentWeekLine,type:"dashed",width:1.1}},backgroundColor:a.tooltipBg,borderColor:a.tooltipBorder,borderWidth:1,textStyle:{color:a.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:y=>{const x=Array.isArray(y)?y:[];if(!x.length)return"";const A=x[0].axisValueLabel??"",R=x.filter(P=>P.seriesName!==d.crossing).map(P=>{const D=P,B=Array.isArray(D.data)?D.data[1]:D.data,q=typeof B=="number"&&Number.isFinite(B)?Ki.format(B):"–";return`${D.marker??""} ${D.seriesName??""}: ${q}`}).join("<br/>");return R?`${A}<br/>${R}`:A}},legend:{show:!n,top:2,left:8,right:8,data:[d.iliCases,d.alertThreshold],itemWidth:14,itemHeight:8,itemGap:12,padding:[6,10],backgroundColor:a.legendBg,borderColor:a.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:a.legend,fontSize:12,lineHeight:16,fontWeight:600},icon:"circle"},xAxis:{type:"category",data:f?b:[d.noData],boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:a.axisLine}},axisLabel:{color:a.axisLabel,interval:n?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:a.axisLabel,formatter:y=>Ki.format(y)},splitLine:{lineStyle:{color:a.grid,type:[4,5]}}},dataZoom:S,series:m}}const qi=new Intl.NumberFormat("en-US");function Qi(i,t){const n=/^W(\d{1,2})$/i.exec(String(i??"").trim());if(!n)return i;const s=String(n[1]).padStart(2,"0");return t==="hu"?`H${s}`:`W${s}`}function he(i){if(i==null||!Number.isFinite(i))return"–";const t=Math.round(i*10)/10;return`${t>0?"+":""}${t.toLocaleString(void 0,{maximumFractionDigits:1})}%`}function ti({metric:i,compareSeasonLabel:t,currentSeasonLabel:n,compact:s,dark:l=!1,language:a="en",labels:d}){const u=l?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",baseline:"rgba(203, 213, 225, 0.58)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",baseline:"rgba(15, 23, 42, 0.52)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},h=d??{noData:"No data"},g=i.points.map(m=>m.label),b=i.points.map(m=>m.previous),T=i.points.map(m=>m.current),f=g.length>0,p=f?g[g.length-1]:null;let $;if(s&&g.length>12){const m=Math.max(0,g.length-12);$=[{type:"inside",xAxisIndex:0,startValue:g[m],endValue:g[g.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:g[m],endValue:g[g.length-1],brushSelect:!1,showDataShadow:!1,borderColor:u.sliderBorder,fillerColor:u.sliderFill,moveHandleSize:6,textStyle:{color:u.sliderText}}]}return{animation:!1,aria:{enabled:!0},grid:{top:s?36:72,right:18,bottom:s&&$?58:46,left:50},tooltip:{trigger:"axis",backgroundColor:u.tooltipBg,borderColor:u.tooltipBorder,borderWidth:1,textStyle:{color:u.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:m=>{const S=Array.isArray(m)?m:[];if(!S.length)return"";const y=S[0],x=Qi(y.axisValueLabel??"",a),C=S.map(A=>{const R=A,P=typeof R.data=="number"&&Number.isFinite(R.data)?qi.format(R.data):"–";return`${R.marker??""} ${R.seriesName??""}: ${P}`}).join("<br/>");return`${x}<br/>${C}`}},legend:{show:!s,top:2,left:8,right:8,itemWidth:12,itemHeight:8,itemGap:10,padding:[6,10],backgroundColor:u.legendBg,borderColor:u.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:u.legend,fontSize:12,lineHeight:16,fontWeight:600}},xAxis:{type:"category",data:f?g:[h.noData],axisLine:{lineStyle:{color:u.axisLine}},axisLabel:{color:u.axisLabel,interval:s?"auto":0,hideOverlap:!0,formatter:m=>Qi(String(m),a)}},yAxis:{type:"value",min:0,axisLabel:{color:u.axisLabel,formatter:m=>qi.format(m)},splitLine:{lineStyle:{color:u.grid,type:[4,5]}}},dataZoom:$,series:[{name:t,type:"line",data:f?b:[null],smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:u.baseline,width:2},itemStyle:{color:u.baseline},markLine:p?{symbol:["none","none"],silent:!0,lineStyle:{color:u.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:p}]}:void 0},{name:n,type:"line",data:f?T:[null],smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:"#2563eb",width:2.4},itemStyle:{color:"#2563eb"}}]}}const Zi=new Intl.NumberFormat("en-US"),Qs=new Intl.NumberFormat("en-US",{maximumFractionDigits:1});function Ji(i){return i>=40?i:i+53}function kt(i,t){return Ji(i)-Ji(t)}function xt(i,t){return i-t}function St(i,t){const n=String(i).padStart(2,"0");return t==="hu"?`H${n}`:`W${n}`}const Zs={"ILI (flu-like illness)":"ILI (influenzaszerű megbetegedés)",Influenza:"Influenza","Influenza A":"Influenza A","Influenza B":"Influenza B","Influenza A(H1N1pdm09)":"Influenza A(H1N1pdm09)","Influenza A(H3)":"Influenza A(H3)","Influenza A(NT)":"Influenza A(NT)",RSV:"RSV","SARS-CoV-2":"SARS-CoV-2",[ie]:"Influenza (összes)"},Js={influenza:{light:"#ec4899",dark:"#f472b6"},sarscov2:{light:"#2563eb",dark:"#60a5fa"},rsv:{light:"#14b8a6",dark:"#2dd4bf"},hmpv:{light:"#f97316",dark:"#fb923c"}},Xi={light:["#8b5cf6","#0ea5e9","#ef4444","#84cc16","#f59e0b"],dark:["#a78bfa","#38bdf8","#f87171","#a3e635","#fbbf24"]};function Xs(i){let t=0;for(let n=0;n<i.length;n+=1)t=t*31+i.charCodeAt(n)>>>0;return t}function en(i){const t=String(i??"").trim().toLowerCase();return t?t===ie.toLowerCase()||t.includes("influenza")||t.includes("flu-like")||t.startsWith("ili")?"influenza":t.includes("sars")||t.includes("cov")?"sarscov2":/\brsv\b/.test(t)?"rsv":t.includes("hmpv")||t.includes("metapneumo")?"hmpv":"other":"other"}function Nt(i,t=!1){const n=en(i);if(n!=="other"){const a=Js[n];return t?a.dark:a.light}const s=t?Xi.dark:Xi.light,l=String(i??"").trim()||"other";return s[Xs(l)%s.length]}function J(i,t="en"){return t==="hu"?Zs[i]??i:i===ie?"Influenza (all)":i}function wt(i,t,n){if(!t||i.length<=12)return;const s=Math.max(0,i.length-12);return[{type:"inside",xAxisIndex:0,startValue:i[s],endValue:i[i.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:i[s],endValue:i[i.length-1],brushSelect:!1,showDataShadow:!1,borderColor:n.sliderBorder,fillerColor:n.sliderFill,moveHandleSize:6,textStyle:{color:n.sliderText}}]}function et({rows:i,selectedVirus:t,compact:n,weekOrder:s="season",language:l="en",dark:a=!1}){const d=a?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",legendPage:"#93c5fd",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",legendPage:"#1d4ed8",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},u=s==="numeric"?xt:kt,h=Array.from(new Set(i.map(m=>m.week))).sort((m,S)=>u(m,S)),g=h.map(m=>St(m,l)),b=l==="hu"?"Nincs adat":"No data",T=t===ke?Array.from(new Set(i.map(m=>m.virus))).sort((m,S)=>m===ie?-1:S===ie?1:m.localeCompare(S)):[t],f=wt(g,n,d),p=g.length?g[g.length-1]:null,$=T.map((m,S)=>{const y=new Map;for(const C of i)C.virus===m&&y.set(C.week,C.detections);const x=Nt(m,a);return{name:J(m,l),type:"line",data:h.map(C=>y.get(C)??null),smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:x,width:2.2},itemStyle:{color:x},markLine:S===0&&p?{symbol:["none","none"],silent:!0,lineStyle:{color:d.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:p}]}:void 0}});return{animation:!1,aria:{enabled:!0},grid:{top:n?40:90,right:18,bottom:n&&f?58:36,left:48},tooltip:{trigger:"axis",backgroundColor:d.tooltipBg,borderColor:d.tooltipBorder,borderWidth:1,textStyle:{color:d.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:m=>{const S=Array.isArray(m)?m:[];if(!S.length)return"";const y=S[0].axisValueLabel??"",x=S.map(C=>{const A=C,R=typeof A.data=="number"&&Number.isFinite(A.data)?Zi.format(A.data):"–";return`${A.marker??""} ${A.seriesName??""}: ${R}`}).join("<br/>");return`${y}<br/>${x}`}},legend:{show:!n,type:"scroll",top:4,left:8,right:8,itemWidth:10,itemHeight:10,itemGap:10,padding:[6,10],backgroundColor:d.legendBg,borderColor:d.legendBorder,borderWidth:1,borderRadius:10,pageIconColor:d.legendPage,pageIconInactiveColor:d.axisLine,pageTextStyle:{color:d.axisLabel},textStyle:{color:d.legend,fontWeight:600,fontSize:12,lineHeight:16}},xAxis:{type:"category",data:g.length?g:[b],axisLine:{lineStyle:{color:d.axisLine}},axisLabel:{color:d.axisLabel,interval:n?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:d.axisLabel,formatter:m=>Zi.format(m)},splitLine:{lineStyle:{color:d.grid,type:[4,5]}}},dataZoom:f,series:$}}function it({rows:i,compact:t,weekOrder:n="season",language:s="en",dark:l=!1}){const a=l?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",legendPage:"#93c5fd",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",legendPage:"#1d4ed8",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},d=n==="numeric"?xt:kt,u=Array.from(new Set(i.map(m=>m.week))).sort((m,S)=>d(m,S)),h=u.map(m=>St(m,s)),g=s==="hu"?"Nincs adat":"No data",b=s==="hu"?" pozitivitás":" positivity",T=Array.from(new Set(i.map(m=>m.virus))).sort((m,S)=>m.localeCompare(S)),f=wt(h,t,a),p=h.length?h[h.length-1]:null,$=T.map((m,S)=>{const y=new Map;for(const C of i)C.virus===m&&y.set(C.week,C.positivity);const x=Nt(m,l);return{name:`${J(m,s)}${b}`,type:"line",data:u.map(C=>y.get(C)??null),smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:x,width:2.2},itemStyle:{color:x},markLine:S===0&&p?{symbol:["none","none"],silent:!0,lineStyle:{color:a.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:p}]}:void 0}});return{animation:!1,aria:{enabled:!0},grid:{top:t?40:90,right:18,bottom:t&&f?58:36,left:48},tooltip:{trigger:"axis",backgroundColor:a.tooltipBg,borderColor:a.tooltipBorder,borderWidth:1,textStyle:{color:a.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:m=>{const S=Array.isArray(m)?m:[];if(!S.length)return"";const y=S[0].axisValueLabel??"",x=S.map(C=>{const A=C,R=typeof A.data=="number"&&Number.isFinite(A.data)?`${Qs.format(A.data)}%`:"–";return`${A.marker??""} ${A.seriesName??""}: ${R}`}).join("<br/>");return`${y}<br/>${x}`}},legend:{show:!t,type:"scroll",top:4,left:8,right:8,itemWidth:10,itemHeight:10,itemGap:10,padding:[6,10],backgroundColor:a.legendBg,borderColor:a.legendBorder,borderWidth:1,borderRadius:10,pageIconColor:a.legendPage,pageIconInactiveColor:a.axisLine,pageTextStyle:{color:a.axisLabel},textStyle:{color:a.legend,fontWeight:600,fontSize:12,lineHeight:16}},xAxis:{type:"category",data:h.length?h:[g],axisLine:{lineStyle:{color:a.axisLine}},axisLabel:{color:a.axisLabel,interval:t?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:a.axisLabel,formatter:m=>`${m}%`},splitLine:{lineStyle:{color:a.grid,type:[4,5]}}},dataZoom:f,series:$}}ns([as,os,ls,cs,us,ds,gs,hs,ms,ps,fs]);function ce({title:i,subtitle:t,option:n}){const s=N.useRef(null),l=N.useRef(null);return N.useEffect(()=>{const a=s.current;if(!a)return;l.current||(l.current=rs(a,void 0,{renderer:"canvas"})),l.current.setOption(n,{notMerge:!0,lazyUpdate:!0}),l.current.resize();const d=()=>{var h;return(h=l.current)==null?void 0:h.resize()};let u=null;return typeof ResizeObserver<"u"?(u=new ResizeObserver(()=>d()),u.observe(a)):window.addEventListener("resize",d),()=>{if(u){u.disconnect();return}window.removeEventListener("resize",d)}},[n]),N.useEffect(()=>()=>{var a;(a=l.current)==null||a.dispose(),l.current=null},[]),e.jsxs("article",{className:"panel",children:[e.jsxs("header",{className:"panel-header",children:[e.jsx("h2",{children:i}),t?e.jsx("p",{children:t}):null]}),e.jsx("div",{className:"panel-chart",ref:s})]})}const Ve="NNGYK",ye="ILI (flu-like illness)",tt="rvd-lang",st="rvd-theme",tn=96e5,sn={en:{appTitle:"Seasonal Respiratory Pathogen Dashboard",appSubtitle:"Hungarian and European situation overview based on NNGYK and ECDC data",season:"Season",language:"Language",theme:"Theme",themeSystem:"System",themeDark:"Dark",themeLight:"Light",sectionCollapse:"Collapse",sectionExpand:"Expand",sourceTitle:"Data source",sourceLive:"Live source: nngyk_all.json",sourceFallback:"Fallback source: bundled sample",sourceLoading:"loading",sectionKicker:"Section",sectionHuTitle:"Hungarian situation",sectionHuNote:"NNGYK surveillance and sentinel indicators for the selected season.",sectionEuTitle:"European (EU/EEA) context",sectionEuNote:"ECDC ERVISS sentinel virology indicators.",alertsAria:"Key alerts",signalTitle:"Seasonal influenza threshold",signalEpidemicYes:"Influenza epidemic ongoing",signalEpidemicNo:"No influenza epidemic",signalAbove:"Above threshold",signalBelow:"Below threshold",fluTextAbove:"{week}: ILI activity ({cases} estimated cases) is above the alert threshold ({threshold}).",fluTextBelow:"{week}: ILI activity ({cases} estimated cases) remains below the alert threshold ({threshold}).",fluChipAbove:"Epidemic signal",fluChipBelow:"Below threshold",alertThreshold:"Alert threshold",crossingLabel:"Threshold crossing",alertsLoading:"Awaiting data",alertsLoadingPos:"Awaiting positivity data",alertsLoadingEuPos:"Awaiting EU/EEA positivity data",decisionTitle:"Weekly situation",decisionIncreasing:"Influenza pressure is increasing",decisionEasing:"Influenza pressure is easing",decisionStableHigh:"Influenza pressure remains high",decisionRisingBelow:"Influenza activity is rising",decisionStableLow:"No influenza epidemic signal",decisionConfidence:"Confidence",decisionFreshness:"Updated",decisionEvidenceIli:"View ILI and SARI charts",decisionEvidenceHuPositivity:"View sentinel positivity",decisionEvidenceEuPositivity:"View EU positivity",decisionConfidenceHigh:"High",decisionConfidenceMedium:"Moderate",decisionConfidenceLow:"Limited",coverageNngyk:"Coverage · NNGYK",coverageNngykNote:"Latest ILI week in selected season",coverageSari:"Coverage · SARI",coverageSariNote:"Latest SARI week in selected season",coverageErviss:"Coverage · ERVISS",coverageErvissNote:"Latest EU/EEA reporting week",coverageMissing:"Missing weeks (ILI/SARI)",coverageMissingNote:"Gaps within each season timeline",coverageAria:"Data coverage indicators",trendTitle:"Weekly trend signals",trendNote:"Weekly change in ILI cases and sentinel positivity.",trendAria:"Weekly trend signals",trendNoRecentChange:"No notable change",trendSurging:"Surging",trendDeclining:"Declining",trendFlat:"Flat",trendEmpty:"No recent ILI or positivity trend data.",rigorTitle:"Epidemiological rigor",rigorNote:"Comparable indicators using rates, baseline z-scores, age split and data-quality signals.",rigorAria:"Epidemiological rigor indicators",rigorIliRateCard:"ILI rate (per 100k)",rigorSariRateCard:"SARI admissions rate (per 100k)",rigorWoW:"WoW",rigorZScore:"Z-score vs baseline",rigorBaselineSample:"Baseline seasons",rigorBaselineMean:"Baseline mean",rigorAgeSplitTitle:"ILI age split (latest week)",rigorAgeMissing:"Age split is unavailable in the current data source.",rigorAge0to14:"Age 0-14",rigorAge15to34:"Age 15-34",rigorAge35to59:"Age 35-59",rigorAge60plus:"Age 60+",rigorQualityTitle:"Uncertainty and data quality",rigorQualityCoverage:"Coverage",rigorQualityBaseline:"Baseline robustness",rigorQualityAge:"Age split availability",rigorQualityGood:"Good",rigorQualityModerate:"Moderate",rigorQualityLimited:"Limited",rigorPer100kSuffix:"/100k",glanceTitle:"Season at a glance",glanceNote:"Growth and burden signals alongside peak and recent trend.",glanceAria:"Season at a glance",glanceIli:"Flu-like illness",glanceSari:"SARI hospitalizations",glanceIcu:"SARI ICU",glancePeak:"Peak",glanceLatest:"Latest",glanceSlope:"3-week trend",glanceWow:"WoW change",glanceWeeksAbove:"Weeks above threshold",glanceStdTitle:"Season-to-date burden",glanceStdIli:"ILI cumulative",glanceStdSari:"SARI cumulative",glanceSeverityTitle:"Severity ratios",glanceSeveritySari:"SARI as % of ILI",glanceSeverityIcu:"ICU as % of SARI",stdNoBaseline:"No baseline",stdMedian:"Median",stdLastSeason:"Last season",statsTotalIli:"Total ILI cases",statsPeakIli:"ILI peak week / cases",statsIliVsPrev:"Latest ILI vs previous season",statsIliVsPrevBaseline:"{season}: {value}",statsIliVsPrevNoBaseline:"No previous-season value for this week.",statsFirstCrossing:"First threshold crossing",statsWeeksAbove:"Weeks above threshold",statsLatestSari:"Latest SARI admissions / ICU cases",chartIli:"Flu-like illness",chartIliSubtitle:"Season {season} (threshold {threshold})",chartSari:"SARI hospital admissions",chartSariSubtitle:"Season {season}",leaderHuTitle:"Leading virus by positivity in Hungary",leaderEuTitle:"Leading virus by positivity in the EU/EEA",leaderHuText:"{week}: {virus} shows the highest sentinel positivity ({pos}%).",leaderEuText:"{week} ({year}): {virus} shows the highest EU/EEA sentinel positivity ({pos}%).",leadersAria:"Latest virology leaders",virologyTitle:"Sentinel virology",virologyWeek:"Latest: {week}",virologyFilter:"Detections filter",virologyAllViruses:"All viruses",virologyTopDetections:"Top detections",virologyTopPositivity:"Top positivity",virologyNoDetections:"No detections available.",virologyNoPositivity:"No positivity data available.",virologyDetectionsTrend:"Sentinel detections trend",virologyDetectionsSubtitle:"{week} focus",virologyPositivityTrend:"Sentinel positivity trend",euVirologyTitle:"EU/EEA ERVISS virology",euTopDetections:"Top EU detections",euTopPositivity:"Top EU positivity",euNoDetections:"No EU detections available.",euNoPositivity:"No EU positivity data available.",euDetectionsTrend:"EU detections trend",euPositivityTrend:"EU positivity trend",euTrendSubtitle:"Target NH respiratory season: {season}",tableTitle:"Respiratory viruses week-by-week in Hungary",tableNote:"Click Week or Cases to sort; includes matching SARI and positivity context.",tableBadge:"Accessible table view",tableAria:"Weekly table",tableScrollAria:"Scrollable table",tableWeek:"Week",tableVirus:"Virus",tableRegion:"Region",tableCases:"Cases",tableSariAdmissions:"SARI admissions",tableSariIcu:"SARI ICU",tableTopPositivity:"Top positivity",tableNoData:"No data available.",historicalTitle:"Historical season comparison",historicalEmptyHeader:"Select a season that has a prior year available to render comparison trends.",historicalIli:"ILI comparison",historicalSari:"SARI admissions comparison",historicalIcu:"SARI ICU comparison",historicalDelta:"Latest delta: {value}",historicalUnavailable:"Historical comparison is unavailable because the previous season is missing from the loaded data source.",warningsTitle:"Data warnings",noDataShort:"No data",regionNational:"National"},hu:{appTitle:"Szezonális Légúti Kórokozó Dashboard",appSubtitle:"A magyarországi és európai helyzetkép az NNGYK és ECDC adatai alapján",season:"Szezon",language:"Nyelv",theme:"Téma",themeSystem:"Rendszer",themeDark:"Sötét",themeLight:"Világos",sectionCollapse:"Összecsuk",sectionExpand:"Kinyit",sourceTitle:"Adatforrás",sourceLive:"Élő forrás: nngyk_all.json",sourceFallback:"Tartalék forrás: beépített minta",sourceLoading:"betöltés",sectionKicker:"Szekció",sectionHuTitle:"Magyarországi helyzet",sectionHuNote:"NNGYK rutinfelügyeleti és sentinel mutatók a kiválasztott szezonban.",sectionEuTitle:"Európai (EU/EGT) kitekintés",sectionEuNote:"ECDC ERVISS sentinel virológiai mutatók.",alertsAria:"Fő riasztások",signalTitle:"Szezonális influenzaküszöb",signalEpidemicYes:"Influenza járvány van",signalEpidemicNo:"Nincs influenza járvány",signalAbove:"Küszöb felett",signalBelow:"Küszöb alatt",fluTextAbove:"{week}: az ILI-aktivitás ({cases} becsült eset) meghaladja a riasztási küszöböt ({threshold}).",fluTextBelow:"{week}: az ILI-aktivitás ({cases} becsült eset) a riasztási küszöb ({threshold}) alatt marad.",fluChipAbove:"Járványjelzés",fluChipBelow:"Küszöb alatt",alertThreshold:"Riasztási küszöb",crossingLabel:"Küszöbátlépés",alertsLoading:"Adatok betöltése",alertsLoadingPos:"Pozitivitási adatok betöltése",alertsLoadingEuPos:"EU/EGT pozitivitási adatok betöltése",decisionTitle:"Heti helyzetkép",decisionIncreasing:"Az influenzaaktivitás erősödik",decisionEasing:"Az influenzaaktivitás gyengül",decisionStableHigh:"Az influenzaaktivitás továbbra is magas",decisionRisingBelow:"Az influenzaaktivitás emelkedik",decisionStableLow:"Nincs influenza járványjelzés",decisionConfidence:"Megbízhatóság",decisionFreshness:"Frissítés",decisionEvidenceIli:"ILI és SARI grafikon",decisionEvidenceHuPositivity:"Sentinel pozitivitás",decisionEvidenceEuPositivity:"EU pozitivitás",decisionConfidenceHigh:"Magas",decisionConfidenceMedium:"Közepes",decisionConfidenceLow:"Korlátozott",coverageNngyk:"Lefedettség · NNGYK",coverageNngykNote:"A kiválasztott szezon legfrissebb ILI hete",coverageSari:"Lefedettség · SARI",coverageSariNote:"A kiválasztott szezon legfrissebb SARI hete",coverageErviss:"Lefedettség · ERVISS",coverageErvissNote:"Legfrissebb EU/EGT jelentési hét",coverageMissing:"Hiányzó hetek (ILI/SARI)",coverageMissingNote:"Rések az egyes szezonidősorokban",coverageAria:"Adatlefedettségi jelzők",trendTitle:"Heti trendszignálok",trendNote:"Heti változás az ILI-esetszámban és a sentinel pozitivitásban.",trendAria:"Heti trendszignálok",trendNoRecentChange:"Nincs friss változás",trendSurging:"Erősödik",trendDeclining:"Gyengül",trendFlat:"Változatlan",trendEmpty:"Nincs friss ILI- vagy pozitivitási trendadat.",rigorTitle:"Epidemiológiai megalapozottság",rigorNote:"Összehasonlítható mutatók: 100 ezer főre vetített ráta, bázis z-score, korcsoporti megoszlás és adatminőségi jelzések.",rigorAria:"Epidemiológiai megalapozottsági mutatók",rigorIliRateCard:"ILI ráta (100 ezer főre)",rigorSariRateCard:"SARI felvételi ráta (100 ezer főre)",rigorWoW:"Heti változás",rigorZScore:"Z-score a bázishoz",rigorBaselineSample:"Bázis szezonok",rigorBaselineMean:"Bázis átlag",rigorAgeSplitTitle:"ILI korcsoporti megoszlás (legfrissebb hét)",rigorAgeMissing:"A korcsoporti megoszlás nem elérhető az aktuális adatforrásban.",rigorAge0to14:"0-14 év",rigorAge15to34:"15-34 év",rigorAge35to59:"35-59 év",rigorAge60plus:"60+ év",rigorQualityTitle:"Bizonytalanság és adatminőség",rigorQualityCoverage:"Lefedettség",rigorQualityBaseline:"Bázis megbízhatóság",rigorQualityAge:"Korcsoporti adat",rigorQualityGood:"Jó",rigorQualityModerate:"Közepes",rigorQualityLimited:"Korlátozott",rigorPer100kSuffix:"/100 ezer",glanceTitle:"Szezon pillanatkép",glanceNote:"Terhelési és növekedési jelzések a szezon alakulásáról.",glanceAria:"Szezon pillanatkép",glanceIli:"Influenzaszerű megbetegedés (ILI)",glanceSari:"SARI felvételek",glanceIcu:"SARI ICU",glancePeak:"Csúcs",glanceLatest:"Legfrissebb",glanceSlope:"3 hetes trend",glanceWow:"Heti változás",glanceWeeksAbove:"Küszöb feletti hetek",glanceStdTitle:"Szezon eddig",glanceStdIli:"ILI kumulatív",glanceStdSari:"SARI kumulatív",glanceSeverityTitle:"Súlyossági arányok",glanceSeveritySari:"SARI az ILI %-ában",glanceSeverityIcu:"ICU a SARI %-ában",stdNoBaseline:"Nincs összehasonlítás",stdMedian:"Medián",stdLastSeason:"Előző szezon",statsTotalIli:"Összes ILI eset",statsPeakIli:"ILI csúcs hét / eset",statsIliVsPrev:"Legfrissebb ILI vs előző szezon",statsIliVsPrevBaseline:"{season}: {value}",statsIliVsPrevNoBaseline:"Ehhez a héthez nincs előző szezonos érték.",statsFirstCrossing:"Első küszöbátlépés",statsWeeksAbove:"Küszöb feletti hetek",statsLatestSari:"Legfrissebb SARI felvételek / ICU",chartIli:"Influenzaszerű megbetegedés (ILI)",chartIliSubtitle:"Szezon: {season} (küszöb {threshold})",chartSari:"SARI kórházi felvételek",chartSariSubtitle:"Szezon: {season}",leaderHuTitle:"Legmagasabb sentinel pozitivitás (Magyarország)",leaderEuTitle:"Legmagasabb sentinel pozitivitás (EU/EGT)",leaderHuText:"{week}: {virus} mutatja a legmagasabb sentinel pozitivitást ({pos}%).",leaderEuText:"{week} ({year}): {virus} mutatja a legmagasabb EU/EGT sentinel pozitivitást ({pos}%).",leadersAria:"Legfrissebb virológiai vezetők",virologyTitle:"Sentinel virológia",virologyWeek:"Legfrissebb: {week}",virologyFilter:"Detekció szűrő",virologyAllViruses:"Összes vírus",virologyTopDetections:"Legmagasabb detekciók",virologyTopPositivity:"Legmagasabb pozitivitás",virologyNoDetections:"Nincs detekciós adat.",virologyNoPositivity:"Nincs pozitivitási adat.",virologyDetectionsTrend:"Sentinel detekciós trend",virologyDetectionsSubtitle:"{week} fókusz",virologyPositivityTrend:"Sentinel pozitivitási trend",euVirologyTitle:"EU/EGT ERVISS virológia",euTopDetections:"Legmagasabb EU detekciók",euTopPositivity:"Legmagasabb EU pozitivitás",euNoDetections:"Nincs EU detekciós adat.",euNoPositivity:"Nincs EU pozitivitási adat.",euDetectionsTrend:"EU detekciós trend",euPositivityTrend:"EU pozitivitási trend",euTrendSubtitle:"Cél NH légúti szezon: {season}",tableTitle:"Légúti vírusok heti bontásban (Magyarország)",tableNote:"Kattints a Hét vagy Esetszám oszlopra a rendezéshez; SARI és pozitivitási kontextussal.",tableBadge:"Akadálymentes táblázat",tableAria:"Heti táblázat",tableScrollAria:"Görgethető táblázat",tableWeek:"Hét",tableVirus:"Vírus",tableRegion:"Régió",tableCases:"Esetszám",tableSariAdmissions:"SARI felvételek",tableSariIcu:"SARI intenzív",tableTopPositivity:"Legmagasabb pozitivitás",tableNoData:"Nincs elérhető adat.",historicalTitle:"Történeti szezon összevetés",historicalEmptyHeader:"Válassz olyan szezont, amelyhez elérhető előző év.",historicalIli:"ILI összevetés",historicalSari:"SARI felvételek összevetése",historicalIcu:"SARI ICU összevetés",historicalDelta:"Legfrissebb eltérés: {value}",historicalUnavailable:"A történeti összevetés nem érhető el, mert hiányzik az előző szezon a betöltött adatforrásból.",warningsTitle:"Adat figyelmeztetések",noDataShort:"Nincs adat",regionNational:"Országos"}};function Me(i){return String(i??"").toLowerCase().startsWith("hu")?"hu":"en"}function nt(i){const t=String(i??"").toLowerCase();return t==="dark"?"dark":t==="light"?"light":"system"}function rt(i){return i==="dark"||i==="light"?i:typeof window>"u"||typeof window.matchMedia!="function"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Z(i,t){return i.replace(/\{(\w+)\}/g,(n,s)=>String(t[s]??""))}function O(i,t="en"){if(typeof i!="number"||!Number.isFinite(i))return"-";const n=String(i).padStart(2,"0");return t==="hu"?`Hét ${n}`:`W${n}`}function at(i,t){const n=/^W(\d{1,2})$/i.exec(String(i??"").trim());if(!n)return i;const s=String(Number(n[1])).padStart(2,"0");return t==="hu"?`H${s}`:`W${s}`}function nn(i){const t=String(i??"").trim().toLowerCase();return t?t===ie.toLowerCase()||t.includes("influenza")||t.includes("flu-like")||t.startsWith("ili")?"influenza":t.includes("sars")||t.includes("cov")?"sarscov2":/\brsv\b/.test(t)?"rsv":t.includes("hmpv")||t.includes("metapneumo")?"hmpv":"other":"other"}function rn(i){return`pathogen-${nn(i)}`}function an(i,t){const n=i+1;return t==="hu"?`${i}/${n}`:`${i}/${n}`}function si(i,t){return t>=40?i:i+1}function He(i){return i>=40?i:i+53}function _(i,t){return He(i)-He(t)}function on(i){return i<=53?i:i-53}function ot(i){const t=Array.from(new Set(i.map(u=>Number(u)).filter(u=>Number.isFinite(u))));if(t.length<2)return[];const n=t.slice().sort(_),s=He(n[0]),l=He(n[n.length-1]),a=new Set(t),d=[];for(let u=s;u<=l;u+=1){const h=on(u);a.has(h)||d.push(h)}return d}function ln(i){if(!i.length)return 0;const t=i.slice().sort((s,l)=>s-l),n=Math.floor(t.length/2);return t.length%2===0?Math.round((t[n-1]+t[n])/2):t[n]}function ni(i,t){return Number.isFinite(t)?i.filter(n=>Number.isFinite(n.week)&&Number.isFinite(n.value)).filter(n=>_(n.week,t)<=0).reduce((n,s)=>n+s.value,0):null}function ri(i){const t=i.filter(u=>Number.isFinite(u.week)&&Number.isFinite(u.value)).slice().sort((u,h)=>_(u.week,h.week));if(!t.length)return null;const n=t.reduce((u,h)=>h.value>u.value?h:u,t[0]),s=t[t.length-1],l=t.slice(Math.max(0,t.length-3)),a=l.length>=2?(l[l.length-1].value-l[0].value)/(l.length-1):null,d=n.value>0?s.value/n.value*100:null;return{peak:n,latest:s,pctOfPeak:d,slope:a}}function Pe(i){const t=i.filter(l=>Number.isFinite(l.week)&&Number.isFinite(l.value)).slice().sort((l,a)=>_(l.week,a.week));if(t.length<2)return null;const n=t[t.length-1].value,s=t[t.length-2].value;return!Number.isFinite(n)||!Number.isFinite(s)||s<=0?null:(n-s)/s*100}function lt(i,t,n,s){if(!Number.isFinite(n))return{currentTotal:null,baselineCount:0,median:null,lastSeason:null,percentile:null};const l=i(t),a=ni(l,Number(n));if(typeof a!="number"||!Number.isFinite(a))return{currentTotal:null,baselineCount:0,median:null,lastSeason:null,percentile:null};const d=s.filter(f=>f<t).sort((f,p)=>f-p),u=d.map(f=>ni(i(f),Number(n))).filter(f=>typeof f=="number"&&Number.isFinite(f)&&f>0),h=d.length?d[d.length-1]:null,g=h==null?null:(()=>{const f=ni(i(h),Number(n));return Number.isFinite(f)?f:null})(),b=u.length>=2?ln(u):null,T=u.length>=2?Math.round(u.filter(f=>f<=a).length/u.length*100):null;return{currentTotal:a,baselineCount:u.length,median:b,lastSeason:g,percentile:T}}function ct(i,t){if(!Number.isFinite(i.currentTotal))return"–";const n=Number(i.currentTotal).toLocaleString();if(!i.baselineCount)return`${n} (${t.noBaseline})`;const s=[];return i.baselineCount>=2&&Number.isFinite(i.median)?s.push(`${t.median} ${Number(i.median).toLocaleString()}`):Number.isFinite(i.lastSeason)&&s.push(`${t.lastSeason} ${Number(i.lastSeason).toLocaleString()}`),i.percentile!=null&&s.push(`P${i.percentile}`),s.length?`${n} (${s.join(", ")})`:n}function cn(i,t){if(!i.length||!t.length)return null;const n=new Map(i.map(g=>[g.week,g.value])),s=t.map(g=>g.week).filter(g=>Number.isFinite(g)&&n.has(g)).sort((g,b)=>_(g,b));if(!s.length)return null;const l=s[s.length-1],a=Number(n.get(l)??0),d=t.find(g=>g.week===l),u=Number((d==null?void 0:d.admissions)??0),h=Number((d==null?void 0:d.icu)??0);return!Number.isFinite(a)||a<=0||!Number.isFinite(u)||u<=0?null:{week:l,sariPercent:u/a*100,icuShare:Number.isFinite(h)&&u>0?h/u*100:null}}function ai(i,t){return i?`${O(i.week,t)}: ${Number(i.value).toLocaleString()}`:"–"}function oi(i,t){if(!i)return"–";const n=`${O(i.latest.week,t)}: ${Number(i.latest.value).toLocaleString()}`;return Number.isFinite(i.pctOfPeak)?`${n} (${Math.round(Number(i.pctOfPeak))}%)`:n}function li(i,t){if(!Number.isFinite(i))return"–";const n=Math.round(Number(i)),s=n>0?"+":"";return t==="hu"?`${s}${n.toLocaleString()}/hét`:`${s}${n.toLocaleString()}/week`}function ci(i){if(!Number.isFinite(i))return"0%";const t=Math.round(i);return`${t>0?"+":""}${t}%`}function Lt(i,t=tn){return!Number.isFinite(i)||!Number.isFinite(t)||t<=0?null:Number(i)/t*1e5}function ut(i){if(!i.length)return null;const t=Array.from(new Set(i.map(a=>a.week))).sort((a,d)=>_(a,d));if(!t.length)return null;const n=t[0],s=t[t.length-1],l=_(s,n)+1;return!Number.isFinite(l)||l<=0?null:Math.min(1,t.length/l)}function un(i,t,n,s,l){if(!Number.isFinite(i)||!Number.isFinite(t))return{zScore:null,baselineCount:0,baselineMean:null};const a=s.filter(g=>g<n).map(g=>{var b;return((b=l(g).find(T=>T.week===t))==null?void 0:b.value)??null}).filter(g=>Number.isFinite(g));if(!a.length)return{zScore:null,baselineCount:0,baselineMean:null};const d=a.reduce((g,b)=>g+b,0)/a.length;if(a.length<2)return{zScore:null,baselineCount:a.length,baselineMean:d};const u=a.reduce((g,b)=>g+(b-d)*(b-d),0)/a.length,h=Math.sqrt(u);return!Number.isFinite(h)||h===0?{zScore:Math.abs(Number(i)-d)<1e-9?0:null,baselineCount:a.length,baselineMean:d}:{zScore:(Number(i)-d)/h,baselineCount:a.length,baselineMean:d}}function dt(i,t,n,s){const l=i.filter(h=>Number.isFinite(h.week)&&Number.isFinite(h.value)).slice().sort((h,g)=>_(h.week,g.week)),a=l.length?l[l.length-1]:null,d=Pe(l),u=un((a==null?void 0:a.value)??null,(a==null?void 0:a.week)??null,t,n,s);return{latestWeek:(a==null?void 0:a.week)??null,latestValue:(a==null?void 0:a.value)??null,ratePer100k:a?Lt(a.value):null,weekOverWeekPercent:d,baseline:u}}function ui(i,t){return Number.isFinite(i)?`${Number(i).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})} ${t}`:"–"}function gt(i){if(!Number.isFinite(i))return"–";const t=Math.round(Number(i)*100)/100;return`${t>0?"+":""}${t.toFixed(2)}`}function dn(i){return i>=70?"high":i>=45?"medium":"low"}function ue(i){return rn(i)}function ht({virus:i}){const t=ue(i);return e.jsx("span",{className:`virus-icon ${t}`,"aria-hidden":"true",children:e.jsxs("svg",{viewBox:"0 0 24 24",focusable:"false",children:[e.jsx("circle",{cx:"12",cy:"12",r:"4.5"}),e.jsx("line",{x1:"12",y1:"2.5",x2:"12",y2:"5.8"}),e.jsx("line",{x1:"12",y1:"18.2",x2:"12",y2:"21.5"}),e.jsx("line",{x1:"2.5",y1:"12",x2:"5.8",y2:"12"}),e.jsx("line",{x1:"18.2",y1:"12",x2:"21.5",y2:"12"}),e.jsx("line",{x1:"5.3",y1:"5.3",x2:"7.8",y2:"7.8"}),e.jsx("line",{x1:"16.2",y1:"16.2",x2:"18.7",y2:"18.7"}),e.jsx("line",{x1:"18.7",y1:"5.3",x2:"16.2",y2:"7.8"}),e.jsx("line",{x1:"7.8",y1:"16.2",x2:"5.3",y2:"18.7"})]})})}function gn(i=820){const t=`(max-width: ${i}px)`,[n,s]=N.useState(()=>typeof window>"u"||typeof window.matchMedia!="function"?!1:window.matchMedia(t).matches);return N.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const l=window.matchMedia(t),a=d=>s(d.matches);return s(l.matches),l.addEventListener("change",a),()=>l.removeEventListener("change",a)},[t]),n}function hn(){var $i,Ei,Wi,Ri,Fi,Di,Vi;const i=gn(),[t,n]=N.useState(()=>Be()),[s,l]=N.useState(()=>{if(typeof window>"u")return"en";const o=new URL(window.location.href).searchParams.get("lang");if(o)return Me(o);const v=window.localStorage.getItem(tt);return Me(v||window.navigator.language)}),[a,d]=N.useState(()=>typeof window>"u"?"system":nt(window.localStorage.getItem(st))),[u,h]=N.useState(()=>rt("system")),[g,b]=N.useState(void 0),[T,f]=N.useState(ke),[p,$]=N.useState("week"),[m,S]=N.useState("asc"),[y,x]=N.useState(!0),[C,A]=N.useState(!0),[R,P]=N.useState(!0),[D,B]=N.useState(!0),[q,ne]=N.useState(!0),[ge,we]=N.useState(!0),r=sn[s],F=u==="dark";N.useEffect(()=>{if(typeof window>"u")return;document.documentElement.lang=s,window.localStorage.setItem(tt,s);const o=new URL(window.location.href);o.searchParams.set("lang",s),window.history.replaceState({},"",`${o.pathname}${o.search}${o.hash}`)},[s]),N.useEffect(()=>{if(typeof window>"u")return;window.localStorage.setItem(st,a);const o=()=>{const k=rt(a);h(k),document.documentElement.setAttribute("data-theme",k)};if(o(),a!=="system"||typeof window.matchMedia!="function")return;const v=window.matchMedia("(prefers-color-scheme: dark)"),I=()=>o();return v.addEventListener("change",I),()=>v.removeEventListener("change",I)},[a]),N.useEffect(()=>{let o=!0;return(async()=>{try{const v=await Os();if(!o)return;n(v)}catch{if(!o)return;n(Be("Runtime loading failed; using bundled sample."))}finally{o&&x(!1)}})(),()=>{o=!1}},[]);const c=N.useMemo(()=>Ds(t,g),[t,g]);N.useEffect(()=>{(g==null||!c.availableYears.includes(g))&&b(c.selectedYear)},[g,c.availableYears,c.selectedYear]),N.useEffect(()=>{T!==ke&&!c.virology.availableDetectionViruses.includes(T)&&f(ke)},[T,c.virology.availableDetectionViruses]);const jt=N.useMemo(()=>qs({points:c.iliSeries,threshold:c.iliThreshold,compact:i,dark:F,labels:{iliCases:r.glanceIli,alertThreshold:r.alertThreshold,crossing:r.crossingLabel,noData:r.noDataShort,seasonStart:s==="hu"?"Szezonkezdet":"Season start",holidays:s==="hu"?"Ünnepi időszak":"Holiday period",weekPrefix:s==="hu"?"H":"W"}}),[i,F,s,c.iliSeries,c.iliThreshold,r.alertThreshold,r.crossingLabel,r.glanceIli,r.noDataShort]),It=N.useMemo(()=>{const o=c.sariSeries.length>0,v=o?c.sariSeries[c.sariSeries.length-1].label:null,I=c.sariSeries.map(j=>j.admissions),k=c.sariSeries.map(j=>j.icu),L=F?{axisLabel:"#cbd5e1",axisLine:"rgba(148, 163, 184, 0.45)",grid:"rgba(148, 163, 184, 0.16)",legend:"#e2e8f0",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLabel:"#334155",axisLine:"rgba(15, 23, 42, 0.20)",grid:"rgba(15, 23, 42, 0.1)",legend:"#0f172a",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"};return{animation:!1,grid:{top:i?40:78,right:18,bottom:34,left:54},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:L.currentWeekLine,type:"dashed",width:1.1}},backgroundColor:L.tooltipBg,borderColor:L.tooltipBorder,borderWidth:1,textStyle:{color:L.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:j=>{const V=Array.isArray(j)?j:[];if(!V.length)return"";const U=V[0],w=at(U.axisValueLabel??"",s),z=V.map(G=>{const W=G,M=typeof W.data=="number"&&Number.isFinite(W.data)?W.data.toLocaleString():"–";return`${W.marker??""} ${W.seriesName??""}: ${M}`}).join("<br/>");return`${w}<br/>${z}`}},legend:{show:!i,top:2,left:8,right:8,itemWidth:12,itemHeight:8,itemGap:12,padding:[6,10],backgroundColor:L.legendBg,borderColor:L.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:L.legend,fontWeight:600,fontSize:12,lineHeight:16},icon:"circle"},xAxis:{type:"category",data:c.sariSeries.map(j=>j.label),boundaryGap:!1,axisLine:{lineStyle:{color:L.axisLine}},axisTick:{show:!1},axisLabel:{color:L.axisLabel,hideOverlap:!0,formatter:j=>at(String(j),s)}},yAxis:{type:"value",min:0,axisLabel:{color:L.axisLabel,formatter:j=>j.toLocaleString()},splitLine:{lineStyle:{color:L.grid,type:[4,5]}}},series:[{name:r.tableSariAdmissions,type:"line",data:o?I:[0],smooth:.22,showSymbol:!1,symbol:"circle",symbolSize:6,lineStyle:{width:2.8,color:F?"#7dd3fc":"#2563eb",cap:"round"},itemStyle:{color:F?"#7dd3fc":"#2563eb"},areaStyle:{color:new di(0,0,0,1,[{offset:0,color:F?"rgba(125, 211, 252, 0.34)":"rgba(59, 130, 246, 0.22)"},{offset:1,color:F?"rgba(56, 189, 248, 0.05)":"rgba(147, 197, 253, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3.4}},markLine:v?{symbol:["none","none"],silent:!0,lineStyle:{color:L.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:v}]}:void 0,z:4},{name:r.tableSariIcu,type:"line",data:o?k:[0],smooth:.2,showSymbol:!1,symbol:"circle",symbolSize:6,lineStyle:{width:2.4,color:F?"#fb923c":"#dc2626",cap:"round"},itemStyle:{color:F?"#fb923c":"#dc2626"},areaStyle:{color:new di(0,0,0,1,[{offset:0,color:F?"rgba(251, 146, 60, 0.24)":"rgba(248, 113, 113, 0.18)"},{offset:1,color:F?"rgba(249, 115, 22, 0.04)":"rgba(252, 165, 165, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3}},z:5}]}},[i,F,s,c.sariSeries,r.tableSariAdmissions,r.tableSariIcu]),zt=N.useMemo(()=>et({rows:c.virology.detectionRows,selectedVirus:T,compact:i,language:s,dark:F}),[i,F,s,T,c.virology.detectionRows]),At=N.useMemo(()=>it({rows:c.virology.positivityRows,compact:i,language:s,dark:F}),[i,F,s,c.virology.positivityRows]),Tt=N.useMemo(()=>et({rows:c.euVirology.detectionRows,selectedVirus:ke,compact:i,weekOrder:"season",language:s,dark:F}),[i,F,s,c.euVirology.detectionRows]),Ct=N.useMemo(()=>it({rows:c.euVirology.positivityRows,compact:i,weekOrder:"season",language:s,dark:F}),[i,F,s,c.euVirology.positivityRows]),yi=N.useMemo(()=>{if(c.virology.latestWeek==null)return[];const o=c.virology.detectionRows.filter(k=>k.week===c.virology.latestWeek).filter(k=>T===ke||k.virus===T).slice().sort((k,L)=>L.detections-k.detections),v=o.find(k=>k.virus===ie);return[...v?[v]:[],...o.filter(k=>k.virus!==ie)].slice(0,6)},[T,c.virology.detectionRows,c.virology.latestWeek]),ki=N.useMemo(()=>c.virology.latestWeek==null?[]:c.virology.positivityRows.filter(o=>o.week===c.virology.latestWeek).slice().sort((o,v)=>v.positivity-o.positivity).slice(0,6),[c.virology.latestWeek,c.virology.positivityRows]),xi=N.useMemo(()=>c.euVirology.latestWeek==null?[]:c.euVirology.detectionRows.filter(o=>o.week===c.euVirology.latestWeek).slice().sort((o,v)=>v.detections-o.detections).slice(0,6),[c.euVirology.detectionRows,c.euVirology.latestWeek]),Si=N.useMemo(()=>c.euVirology.latestWeek==null?[]:c.euVirology.positivityRows.filter(o=>o.week===c.euVirology.latestWeek).slice().sort((o,v)=>v.positivity-o.positivity).slice(0,6),[c.euVirology.latestWeek,c.euVirology.positivityRows]),Ni=N.useMemo(()=>!c.historical.available||!c.historical.compareSeasonLabel?null:ti({metric:c.historical.ili,compareSeasonLabel:c.historical.compareSeasonLabel,currentSeasonLabel:c.historical.currentSeasonLabel,compact:i,dark:F,language:s,labels:{noData:r.noDataShort}}),[i,F,s,c.historical,r.noDataShort]),wi=N.useMemo(()=>!c.historical.available||!c.historical.compareSeasonLabel?null:ti({metric:c.historical.sariAdmissions,compareSeasonLabel:c.historical.compareSeasonLabel,currentSeasonLabel:c.historical.currentSeasonLabel,compact:i,dark:F,language:s,labels:{noData:r.noDataShort}}),[i,F,s,c.historical,r.noDataShort]),Li=N.useMemo(()=>!c.historical.available||!c.historical.compareSeasonLabel?null:ti({metric:c.historical.sariIcu,compareSeasonLabel:c.historical.compareSeasonLabel,currentSeasonLabel:c.historical.currentSeasonLabel,compact:i,dark:F,language:s,labels:{noData:r.noDataShort}}),[i,F,s,c.historical,r.noDataShort]),re=N.useMemo(()=>{if(!c.virology.positivityRows.length)return null;const o=c.virology.positivityRows.reduce((k,L)=>_(L.week,k)>0?L.week:k,c.virology.positivityRows[0].week),v=c.virology.positivityRows.filter(k=>k.week===o);if(!v.length)return null;const I=v.reduce((k,L)=>L.positivity>k.positivity?L:k,v[0]);return{week:o,virus:I.virus,positivity:I.positivity}},[c.virology.positivityRows]),te=N.useMemo(()=>{if(c.euVirology.targetYear==null||!c.euVirology.positivityRows.length)return null;const o=c.euVirology.positivityRows.reduce((k,L)=>_(L.week,k)>0?L.week:k,c.euVirology.positivityRows[0].week),v=c.euVirology.positivityRows.filter(k=>k.week===o);if(!v.length)return null;const I=v.reduce((k,L)=>L.positivity>k.positivity?L:k,v[0]);return{year:si(c.euVirology.targetYear,o),week:o,virus:I.virus,positivity:I.positivity}},[c.euVirology.positivityRows,c.euVirology.targetYear]),$t=c.iliSeries.length?O(c.iliSeries[c.iliSeries.length-1].week,s):"–",Et=c.sariSeries.length?O(c.sariSeries[c.sariSeries.length-1].week,s):"–",Ye=N.useMemo(()=>ot(c.iliSeries.map(o=>o.week)),[c.iliSeries]),_e=N.useMemo(()=>ot(c.sariSeries.map(o=>o.week)),[c.sariSeries]),H=N.useMemo(()=>{const o=c.iliSeries.map(z=>({week:z.week,value:z.cases})),v=c.sariSeries.map(z=>({week:z.week,value:z.admissions})),I=c.sariSeries.map(z=>({week:z.week,value:z.icu})),k=ri(o),L=ri(v),j=ri(I),V=z=>{const G=new Map;for(const W of t.respiratoryData.weekly){const M=Number(W.year);if(!Number.isFinite(M)||M!==z||(W.dataset??Ve)!==Ve||(W.virus??ye)!==ye)continue;const be=Number(W.week);if(!Number.isFinite(be))continue;const je=Number(W.cases??0);Number.isFinite(je)&&G.set(be,(G.get(be)??0)+je)}return Array.from(G.entries()).sort((W,M)=>_(W[0],M[0])).map(([W,M])=>({week:W,value:M}))},U=z=>{const G=new Map;for(const W of t.respiratoryData.sariWeekly){const M=Number(W.year);if(!Number.isFinite(M)||M!==z)continue;const ae=Number(W.week);if(!Number.isFinite(ae))continue;const fe=Number(W.admissions??0);Number.isFinite(fe)&&G.set(ae,(G.get(ae)??0)+fe)}return Array.from(G.entries()).sort((W,M)=>_(W[0],M[0])).map(([W,M])=>({week:W,value:M}))},w=cn(o,c.sariSeries.map(z=>({week:z.week,admissions:z.admissions,icu:z.icu})));return{iliGlance:k,sariGlance:L,icuGlance:j,iliWow:Pe(o),sariWow:Pe(v),icuWow:Pe(I),weeksAboveThreshold:o.filter(z=>z.value>=c.iliThreshold).length,iliSeasonToDate:lt(V,c.selectedYear,(k==null?void 0:k.latest.week)??null,c.availableYears),sariSeasonToDate:lt(U,c.selectedYear,(L==null?void 0:L.latest.week)??null,c.availableYears),severity:w}},[t.respiratoryData.sariWeekly,t.respiratoryData.weekly,c.availableYears,c.iliSeries,c.iliThreshold,c.sariSeries,c.selectedYear]),E=N.useMemo(()=>{const o=oe=>{const le=new Map;for(const K of t.respiratoryData.weekly){const se=Number(K.year);if(!Number.isFinite(se)||se!==oe||(K.dataset??Ve)!==Ve||(K.virus??ye)!==ye)continue;const ei=Number(K.week);if(!Number.isFinite(ei))continue;const Mi=Number(K.cases??0);Number.isFinite(Mi)&&le.set(ei,(le.get(ei)??0)+Mi)}return Array.from(le.entries()).sort((K,se)=>_(K[0],se[0])).map(([K,se])=>({week:K,value:se}))},v=oe=>{const le=new Map;for(const K of t.respiratoryData.sariWeekly){const se=Number(K.year);if(!Number.isFinite(se)||se!==oe)continue;const Re=Number(K.week);if(!Number.isFinite(Re))continue;const Xe=Number(K.admissions??0);Number.isFinite(Xe)&&le.set(Re,(le.get(Re)??0)+Xe)}return Array.from(le.entries()).sort((K,se)=>_(K[0],se[0])).map(([K,se])=>({week:K,value:se}))},I=o(c.selectedYear),k=v(c.selectedYear),L=dt(I,c.selectedYear,c.availableYears,o),j=dt(k,c.selectedYear,c.availableYears,v),V=t.iliAgeSplits.filter(oe=>oe.year===c.selectedYear).slice().sort((oe,le)=>_(oe.week,le.week)),U=L.latestWeek,w=V.find(oe=>oe.week===U)??(V.length?V[V.length-1]:null),z=ut(I),G=ut(k),W=z!=null&&G!=null?(z+G)/2:z??G,M=Math.min(L.baseline.baselineCount,j.baseline.baselineCount),ae=w!=null,fe=W==null?"limited":W>=.9?"good":W>=.75?"moderate":"limited",be=M>=5?"good":M>=3?"moderate":"limited";return{iliMetric:L,sariMetric:j,ageSplit:w,quality:{coverageRatio:W,baselineCount:M,ageSplitAvailable:ae,coverageLevel:fe,baselineLevel:be,ageLevel:ae?"good":"limited"}}},[t.iliAgeSplits,t.respiratoryData.sariWeekly,t.respiratoryData.weekly,c.availableYears,c.selectedYear]),Q=N.useMemo(()=>{const o=c.iliSeries.length?c.iliSeries[c.iliSeries.length-1]:null;if(!o)return null;const v=c.historical.ili.points.find(j=>j.week===o.week)??null,I=v&&typeof v.previous=="number"&&Number.isFinite(v.previous)?v.previous:null,k=I!=null&&I!==0?(o.cases-I)/I*100:null,L=k==null?"flat":k>0?"surging":k<0?"declining":"flat";return{week:o.week,currentCases:o.cases,previousCases:I,deltaPercent:k,direction:L}},[c.historical.ili.points,c.iliSeries]),Ue=N.useMemo(()=>{const o=[],v=c.iliSeries.map(w=>({week:w.week,value:w.cases})).filter(w=>Number.isFinite(w.week)&&Number.isFinite(w.value)).sort((w,z)=>_(w.week,z.week)),I=v[v.length-1],k=v[v.length-2];if(I&&k){const w=k.value>0?(I.value-k.value)/k.value*100:0,z=w>0?"surging":w<0?"declining":"flat";o.push({virus:ye,label:ci(w),change:w,week:I.week,direction:z})}const L=c.virology.positivityRows.filter(w=>w.virus!==ie).filter(w=>Number.isFinite(w.week)&&Number.isFinite(w.positivity));if(!L.length)return o;const j=L.reduce((w,z)=>_(z.week,w)>0?z.week:w,L[0].week),V=L.filter(w=>w.week===j).slice().sort((w,z)=>z.positivity-w.positivity).map(w=>w.virus),U=new Map;for(const w of L){const z=U.get(w.virus)??[];z.push({week:w.week,positivity:w.positivity}),U.set(w.virus,z)}for(const w of V){if(o.length>=4)break;const z=U.get(w);if(!z||z.length<2)continue;const G=z.slice().sort((be,je)=>_(be.week,je.week)),W=G[G.length-1],M=G[G.length-2];if(!W||!M)continue;const ae=M.positivity>0?(W.positivity-M.positivity)/M.positivity*100:0,fe=ae>0?"surging":ae<0?"declining":"flat";o.push({virus:w,label:ci(ae),change:ae,week:W.week,direction:fe})}return o.slice(0,4)},[c.iliSeries,c.virology.positivityRows]),Oe=N.useMemo(()=>{const o=new Map;for(const v of c.virology.positivityRows){const I=o.get(v.week);(!I||v.positivity>I.positivity)&&o.set(v.week,{virus:v.virus,positivity:v.positivity})}return o},[c.virology.positivityRows]),ji=N.useMemo(()=>{const o=new Map(c.iliSeries.map(j=>[j.week,j.cases])),v=new Map(c.sariSeries.map(j=>[j.week,{admissions:j.admissions,icu:j.icu}])),I=new Set;for(const j of o.keys())I.add(j);for(const j of v.keys())I.add(j);for(const j of Oe.keys())I.add(j);for(const j of c.virology.detectionRows)I.add(j.week);const k=Array.from(I).map(j=>{const V=v.get(j),U=Oe.get(j);return{week:j,virus:ye,region:"National",cases:o.get(j)??null,sariAdmissions:(V==null?void 0:V.admissions)??null,sariIcu:(V==null?void 0:V.icu)??null,topPositivityVirus:(U==null?void 0:U.virus)??null,topPositivity:(U==null?void 0:U.positivity)??null}}),L=m==="asc"?1:-1;return k.sort((j,V)=>{if(p==="week"){const w=_(j.week,V.week);if(w!==0)return w*L}else{const w=Number(j.cases??0)-Number(V.cases??0);if(w!==0)return w*L}const U=_(j.week,V.week);return U!==0?U:j.virus.localeCompare(V.virus)})},[c.iliSeries,c.sariSeries,c.virology.detectionRows,p,m,Oe]),Wt=p==="week"?m==="asc"?"ascending":"descending":"none",Rt=p==="cases"?m==="asc"?"ascending":"descending":"none",Ft=p==="week"?m==="asc"?"▲":"▼":"",Dt=p==="cases"?m==="asc"?"▲":"▼":"",$e=o=>{if(p===o){S(v=>v==="asc"?"desc":"asc");return}$(o),S("asc")},Le=c.stats.latestIliCases>=c.iliThreshold,Vt=Le?"critical":"ok",Mt=Le?r.signalEpidemicYes:r.signalEpidemicNo,Pt=Z(Le?r.fluTextAbove:r.fluTextBelow,{week:O(c.stats.latestWeek,s),cases:c.stats.latestIliCases.toLocaleString(),threshold:c.iliThreshold.toLocaleString()}),Ge=Ue.find(o=>o.virus===ye)??null,Bt=(()=>{const o=Ge==null?void 0:Ge.change;return Le?o!=null&&o>=8?r.decisionIncreasing:o!=null&&o<=-8?r.decisionEasing:r.decisionStableHigh:o!=null&&o>=12?r.decisionRisingBelow:r.decisionStableLow})(),Ke=o=>o==="high"?r.decisionConfidenceHigh:o==="medium"?r.decisionConfidenceMedium:r.decisionConfidenceLow,qe=({hasData:o,missingWeeks:v,warningCount:I})=>{let k=100;return y&&(k-=28),o||(k-=30),k-=Math.min(26,v*6),k-=Math.min(24,I*8),dn(k)},Ii=Ye.length+_e.length,zi=qe({hasData:c.iliSeries.length>1,missingWeeks:Ii,warningCount:c.warnings.length}),Ai=qe({hasData:re!=null&&c.virology.latestWeek!=null,missingWeeks:Math.ceil(Ii/2),warningCount:c.warnings.length}),Ti=qe({hasData:te!=null&&c.euVirology.latestWeek!=null,missingWeeks:0,warningCount:c.warnings.length}),Ht=Ke(zi),Yt=Ke(Ai),_t=Ke(Ti),Ee=(o,v=0)=>{if(typeof window>"u")return;const I=document.getElementById(o);if(I){I.scrollIntoView({behavior:"smooth",block:"start"});return}v>=10||window.setTimeout(()=>Ee(o,v+1),80)},Qe=o=>{if(o==="hu-ili-sari-charts"){ne(!0),Ee(o);return}if(o==="hu-sentinel-positivity"){ne(!0),A(!0),Ee(o);return}we(!0),Ee(o)},Ut=t.source==="nngyk_all"?"live":"sample",Ot=t.source==="nngyk_all"?r.sourceLive:r.sourceFallback,We=c.virology.latestWeek==null?"–":O(c.virology.latestWeek,s),Ci=c.euVirology.targetYear==null?"–":an(c.euVirology.targetYear,s),Ze=c.euVirology.targetYear!=null&&c.euVirology.latestWeek!=null?s==="hu"?`${si(c.euVirology.targetYear,c.euVirology.latestWeek)} · ${O(c.euVirology.latestWeek,s)}`:`${si(c.euVirology.targetYear,c.euVirology.latestWeek)}-${O(c.euVirology.latestWeek,s)}`:"–",Gt=re?Z(r.leaderHuText,{week:O(re.week,s),virus:J(re.virus,s),pos:re.positivity.toFixed(1)}):r.alertsLoadingPos,Kt=re?J(re.virus,s):r.noDataShort,qt=ue(re==null?void 0:re.virus),Qt=te?Z(r.leaderEuText,{week:O(te.week,s),year:te.year,virus:J(te.virus,s),pos:te.positivity.toFixed(1)}):r.alertsLoadingEuPos,Zt=te?J(te.virus,s):r.noDataShort,Jt=ue(te==null?void 0:te.virus),Je=o=>o==="good"?r.rigorQualityGood:o==="moderate"?r.rigorQualityModerate:r.rigorQualityLimited,pe=o=>o==="good"?"ok":"warn",Xt=E.quality.coverageRatio==null?"–":`${Math.round(E.quality.coverageRatio*100).toLocaleString()}%`,es=E.iliMetric.baseline.baselineCount>0?E.iliMetric.baseline.baselineCount.toLocaleString():"–";return e.jsxs("div",{className:`app-shell theme-${u}`,children:[e.jsxs("header",{className:"topbar",children:[e.jsxs("div",{children:[e.jsx("h1",{children:r.appTitle}),e.jsx("p",{className:"subtitle",children:r.appSubtitle})]}),e.jsxs("div",{className:"controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"year-select",children:r.season}),e.jsx("select",{id:"year-select",value:c.selectedYear,onChange:o=>b(Number(o.target.value)),children:c.availableYears.map(o=>e.jsxs("option",{value:o,children:[o,"-",o+1]},o))})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"lang-select",children:r.language}),e.jsxs("select",{id:"lang-select",value:s,onChange:o=>l(Me(o.target.value)),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hu",children:"Magyar"})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"theme-select",children:r.theme}),e.jsxs("select",{id:"theme-select",value:a,onChange:o=>d(nt(o.target.value)),children:[e.jsx("option",{value:"system",children:r.themeSystem}),e.jsx("option",{value:"dark",children:r.themeDark}),e.jsx("option",{value:"light",children:r.themeLight})]})]})]})]}),e.jsxs("section",{className:"alerts-grid","aria-label":r.alertsAria,children:[e.jsxs("article",{className:`alert-card primary epidemic ${Vt}`,role:"status","aria-live":"polite",children:[e.jsx("span",{className:"alert-kicker",children:r.decisionTitle}),e.jsxs("h2",{children:[Le?e.jsx("span",{className:"alert-status-icon","aria-hidden":"true",children:"!"}):null,e.jsx("span",{children:Bt})]}),e.jsx("p",{className:"alert-standfirst",children:Mt}),e.jsx("p",{children:Pt}),e.jsxs("div",{className:"alert-meta",children:[e.jsxs("span",{className:`alert-meta-chip confidence-${zi}`,children:[r.decisionConfidence,": ",Ht]}),e.jsxs("span",{className:"alert-meta-chip",children:[r.decisionFreshness,": ",O(c.stats.latestWeek,s)]})]}),e.jsx("button",{type:"button",className:"alert-evidence-btn",onClick:()=>Qe("hu-ili-sari-charts"),children:r.decisionEvidenceIli})]}),e.jsxs("article",{className:`alert-card leader summary ${qt}`,role:"status","aria-live":"polite",children:[e.jsx("h2",{children:r.leaderHuTitle}),e.jsxs("div",{className:"alert-emphasis-row",children:[re?e.jsx(ht,{virus:re.virus}):null,e.jsx("strong",{className:"alert-emphasis",children:Kt})]}),e.jsx("p",{children:Gt}),e.jsxs("div",{className:"alert-meta",children:[e.jsxs("span",{className:`alert-meta-chip confidence-${Ai}`,children:[r.decisionConfidence,": ",Yt]}),e.jsxs("span",{className:"alert-meta-chip",children:[r.decisionFreshness,": ",We]})]}),e.jsx("button",{type:"button",className:"alert-evidence-btn",onClick:()=>Qe("hu-sentinel-positivity"),children:r.decisionEvidenceHuPositivity})]}),e.jsxs("article",{className:`alert-card leader summary ${Jt}`,role:"status","aria-live":"polite",children:[e.jsx("h2",{children:r.leaderEuTitle}),e.jsxs("div",{className:"alert-emphasis-row",children:[te?e.jsx(ht,{virus:te.virus}):null,e.jsx("strong",{className:"alert-emphasis",children:Zt})]}),e.jsx("p",{children:Qt}),e.jsxs("div",{className:"alert-meta",children:[e.jsxs("span",{className:`alert-meta-chip confidence-${Ti}`,children:[r.decisionConfidence,": ",_t]}),e.jsxs("span",{className:"alert-meta-chip",children:[r.decisionFreshness,": ",Ze]})]}),e.jsx("button",{type:"button",className:"alert-evidence-btn",onClick:()=>Qe("eu-positivity-chart"),children:r.decisionEvidenceEuPositivity})]})]}),e.jsxs("section",{className:"region-block hu-block","aria-label":r.sectionHuTitle,children:[e.jsxs("section",{className:"region-divider hu","aria-label":r.sectionHuTitle,children:[e.jsxs("div",{className:"region-divider-main",children:[e.jsx("span",{className:"region-divider-kicker",children:r.sectionKicker}),e.jsxs("div",{children:[e.jsx("h2",{children:r.sectionHuTitle}),e.jsx("p",{children:r.sectionHuNote})]})]}),e.jsxs("button",{type:"button",className:"section-toggle region-toggle","aria-expanded":q,"aria-controls":"hu-region-content","aria-label":`${q?r.sectionCollapse:r.sectionExpand}: ${r.sectionHuTitle}`,onClick:()=>ne(o=>!o),children:[e.jsx("span",{className:`section-toggle-icon ${q?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:q?r.sectionCollapse:r.sectionExpand})]})]}),q?e.jsxs("div",{id:"hu-region-content",className:"region-content",children:[e.jsxs("section",{className:"briefing-grid",children:[e.jsxs("section",{className:"surge-section","aria-label":r.trendAria,children:[e.jsxs("header",{className:"surge-header",children:[e.jsx("h2",{children:r.trendTitle}),e.jsx("p",{children:r.trendNote})]}),e.jsx("ul",{className:"surge-list",children:Ue.length?Ue.map(o=>e.jsxs("li",{className:`surge-item trend-${o.direction}`,children:[e.jsxs("div",{children:[e.jsxs("span",{className:`pathogen-name ${ue(o.virus)}`,children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),e.jsx("strong",{children:J(o.virus,s)})]}),e.jsx("span",{children:o.week!=null?O(o.week,s):"–"})]}),e.jsx("span",{className:"pill",children:o.label})]},`${o.virus}-${o.week??"na"}`)):e.jsx("li",{className:"surge-empty",children:r.trendEmpty})})]}),e.jsxs("section",{className:"stats-grid briefing-stats-grid",children:[e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsTotalIli}),e.jsx("strong",{children:c.stats.totalIliCases.toLocaleString()})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsPeakIli}),e.jsxs("strong",{children:[O(c.stats.peakIliWeek,s)," / ",(($i=c.stats.peakIliCases)==null?void 0:$i.toLocaleString())??"-"]})]}),e.jsxs("article",{className:"stat-card stat-card-ili-compare",children:[e.jsxs("div",{className:"stat-card-ili-head",children:[e.jsx("h3",{children:r.statsIliVsPrev}),e.jsx("span",{className:"stat-week-chip",children:Q?O(Q.week,s):"–"})]}),e.jsxs("div",{className:"stat-card-ili-main",children:[e.jsx("strong",{children:Q?Q.currentCases.toLocaleString():"–"}),(Q==null?void 0:Q.deltaPercent)!=null&&Q.previousCases!=null?e.jsx("span",{className:`stat-delta-pill trend-${Q.direction}`,children:ci(Q.deltaPercent)}):null]}),e.jsx("p",{className:"stat-compare-baseline",children:(Q==null?void 0:Q.deltaPercent)!=null&&Q.previousCases!=null?Z(r.statsIliVsPrevBaseline,{season:c.historical.compareSeasonLabel??String(c.selectedYear-1),value:Q.previousCases.toLocaleString()}):r.statsIliVsPrevNoBaseline})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsFirstCrossing}),e.jsx("strong",{children:O(c.stats.firstIliThresholdCrossingWeek,s)})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsWeeksAbove}),e.jsx("strong",{children:c.stats.weeksAboveIliThreshold.toLocaleString()})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsLatestSari}),e.jsxs("strong",{children:[c.stats.latestSariAdmissions??"-"," / ",c.stats.latestSariIcu??"-"]})]})]})]}),e.jsxs("section",{id:"hu-ili-sari-charts",className:"charts-grid",children:[e.jsx(ce,{title:r.chartIli,subtitle:Z(r.chartIliSubtitle,{season:c.seasonLabel,threshold:c.iliThreshold.toLocaleString()}),option:jt}),e.jsx(ce,{title:r.chartSari,subtitle:Z(r.chartSariSubtitle,{season:c.seasonLabel}),option:It})]}),e.jsxs("section",{className:"historical-section",children:[e.jsxs("header",{className:"historical-header",children:[e.jsx("h2",{children:r.historicalTitle}),c.historical.available&&c.historical.compareSeasonLabel?e.jsx("p",{children:s==="hu"?`${c.historical.currentSeasonLabel} összevetve: ${c.historical.compareSeasonLabel}`:`${c.historical.currentSeasonLabel} vs ${c.historical.compareSeasonLabel}`}):e.jsx("p",{children:r.historicalEmptyHeader})]}),c.historical.available&&c.historical.compareSeasonLabel&&Ni&&wi&&Li?e.jsxs("div",{className:"historical-grid",children:[e.jsx(ce,{title:r.historicalIli,subtitle:Z(r.historicalDelta,{value:he(c.historical.ili.latestDeltaPercent)}),option:Ni}),e.jsx(ce,{title:r.historicalSari,subtitle:Z(r.historicalDelta,{value:he(c.historical.sariAdmissions.latestDeltaPercent)}),option:wi}),e.jsx(ce,{title:r.historicalIcu,subtitle:Z(r.historicalDelta,{value:he(c.historical.sariIcu.latestDeltaPercent)}),option:Li})]}):e.jsx("article",{className:"historical-empty",children:r.historicalUnavailable})]}),e.jsxs("section",{className:"virology-section collapsible-section",children:[e.jsxs("header",{className:"virology-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.virologyTitle}),e.jsx("p",{children:Z(r.virologyWeek,{week:We})})]}),e.jsxs("div",{className:"virology-header-actions",children:[e.jsxs("div",{className:"virology-controls",children:[e.jsx("label",{htmlFor:"virology-virus-select",children:r.virologyFilter}),e.jsxs("select",{id:"virology-virus-select",value:T,onChange:o=>f(o.target.value),children:[e.jsx("option",{value:ke,children:r.virologyAllViruses}),c.virology.availableDetectionViruses.map(o=>e.jsx("option",{value:o,children:J(o,s)},o))]})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":C,"aria-controls":"sentinel-virology-content","aria-label":`${C?r.sectionCollapse:r.sectionExpand}: ${r.virologyTitle}`,onClick:()=>A(o=>!o),children:[e.jsx("span",{className:`section-toggle-icon ${C?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:C?r.sectionCollapse:r.sectionExpand})]})]})]}),C?e.jsxs("div",{id:"sentinel-virology-content",className:"section-content",children:[e.jsxs("div",{className:"virology-grid",children:[e.jsx(ce,{title:r.virologyDetectionsTrend,subtitle:Z(r.virologyDetectionsSubtitle,{week:We}),option:zt}),e.jsx("div",{id:"hu-sentinel-positivity",children:e.jsx(ce,{title:r.virologyPositivityTrend,subtitle:Z(r.virologyDetectionsSubtitle,{week:We}),option:At})})]}),e.jsxs("div",{className:"virology-lists",children:[e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.virologyTopDetections}),yi.length?e.jsx("ul",{children:yi.map(o=>e.jsxs("li",{className:ue(o.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),J(o.virus,s)]}),e.jsx("strong",{children:o.detections.toLocaleString()})]},`${o.virus}-${o.week}`))}):e.jsx("p",{className:"virology-empty",children:r.virologyNoDetections})]}),e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.virologyTopPositivity}),ki.length?e.jsx("ul",{children:ki.map(o=>e.jsxs("li",{className:ue(o.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),J(o.virus,s)]}),e.jsxs("strong",{children:[o.positivity.toFixed(1),"%"]})]},`${o.virus}-${o.week}`))}):e.jsx("p",{className:"virology-empty",children:r.virologyNoPositivity})]})]})]}):null]}),e.jsxs("section",{className:"glance-section collapsible-section","aria-label":r.glanceAria,children:[e.jsxs("header",{className:"glance-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.glanceTitle}),e.jsx("p",{children:r.glanceNote})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":R,"aria-controls":"season-glance-content","aria-label":`${R?r.sectionCollapse:r.sectionExpand}: ${r.glanceTitle}`,onClick:()=>P(o=>!o),children:[e.jsx("span",{className:`section-toggle-icon ${R?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:R?r.sectionCollapse:r.sectionExpand})]})]}),R?e.jsxs("div",{id:"season-glance-content",className:"glance-grid",children:[e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceIli}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:ai(((Ei=H.iliGlance)==null?void 0:Ei.peak)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:oi(H.iliGlance,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:li(((Wi=H.iliGlance)==null?void 0:Wi.slope)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:he(H.iliWow)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWeeksAbove}),e.jsx("span",{className:"glance-value",children:c.iliSeries.length?H.weeksAboveThreshold.toLocaleString():"–"})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceSari}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:ai(((Ri=H.sariGlance)==null?void 0:Ri.peak)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:oi(H.sariGlance,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:li(((Fi=H.sariGlance)==null?void 0:Fi.slope)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:he(H.sariWow)})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceIcu}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:ai(((Di=H.icuGlance)==null?void 0:Di.peak)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:oi(H.icuGlance,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:li(((Vi=H.icuGlance)==null?void 0:Vi.slope)??null,s)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:he(H.icuWow)})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceStdTitle}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceStdIli}),e.jsx("span",{className:"glance-value",children:ct(H.iliSeasonToDate,{noBaseline:r.stdNoBaseline,median:r.stdMedian,lastSeason:r.stdLastSeason})})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceStdSari}),e.jsx("span",{className:"glance-value",children:ct(H.sariSeasonToDate,{noBaseline:r.stdNoBaseline,median:r.stdMedian,lastSeason:r.stdLastSeason})})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceSeverityTitle}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSeveritySari}),e.jsx("span",{className:"glance-value",children:H.severity?`${O(H.severity.week,s)}: ${H.severity.sariPercent.toFixed(1)}%`:"–"})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSeverityIcu}),e.jsx("span",{className:"glance-value",children:H.severity&&Number.isFinite(H.severity.icuShare)?`${O(H.severity.week,s)}: ${Number(H.severity.icuShare).toFixed(1)}%`:"–"})]})]})]}):null]}),e.jsxs("section",{className:"quality-section","aria-label":r.rigorAria,children:[e.jsxs("header",{className:"quality-header",children:[e.jsx("h2",{children:r.rigorTitle}),e.jsx("p",{children:r.rigorNote})]}),e.jsxs("div",{className:"quality-grid",children:[e.jsxs("article",{className:`quality-card ${pe(E.iliMetric.baseline.zScore!=null&&Math.abs(E.iliMetric.baseline.zScore)>=2?"moderate":"good")}`,children:[e.jsx("h3",{children:r.rigorIliRateCard}),e.jsx("strong",{children:ui(E.iliMetric.ratePer100k,r.rigorPer100kSuffix)}),e.jsxs("p",{children:[r.rigorWoW,": ",he(E.iliMetric.weekOverWeekPercent)," · ",r.rigorZScore,":"," ",gt(E.iliMetric.baseline.zScore)]}),e.jsxs("p",{children:[r.rigorBaselineSample,": ",es,E.iliMetric.baseline.baselineMean!=null?` · ${r.rigorBaselineMean}: ${ui(Lt(E.iliMetric.baseline.baselineMean),r.rigorPer100kSuffix)}`:""]})]}),e.jsxs("article",{className:`quality-card ${pe(E.sariMetric.baseline.zScore!=null&&Math.abs(E.sariMetric.baseline.zScore)>=2?"moderate":"good")}`,children:[e.jsx("h3",{children:r.rigorSariRateCard}),e.jsx("strong",{children:ui(E.sariMetric.ratePer100k,r.rigorPer100kSuffix)}),e.jsxs("p",{children:[r.rigorWoW,": ",he(E.sariMetric.weekOverWeekPercent)," · ",r.rigorZScore,":"," ",gt(E.sariMetric.baseline.zScore)]}),e.jsxs("p",{children:[r.rigorBaselineSample,": ",E.sariMetric.baseline.baselineCount.toLocaleString()]})]}),e.jsxs("article",{className:`quality-card ${pe(E.quality.ageLevel)}`,children:[e.jsx("h3",{children:r.rigorAgeSplitTitle}),E.ageSplit?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:O(E.ageSplit.week,s)}),e.jsxs("div",{className:"age-split-grid",children:[e.jsxs("span",{children:[r.rigorAge0to14,": ",E.ageSplit.age0to14.toFixed(1),"%"]}),e.jsxs("span",{children:[r.rigorAge15to34,": ",E.ageSplit.age15to34.toFixed(1),"%"]}),e.jsxs("span",{children:[r.rigorAge35to59,": ",E.ageSplit.age35to59.toFixed(1),"%"]}),e.jsxs("span",{children:[r.rigorAge60plus,": ",E.ageSplit.age60plus.toFixed(1),"%"]})]})]}):e.jsx("p",{children:r.rigorAgeMissing})]}),e.jsxs("article",{className:`quality-card ${pe(E.quality.coverageLevel)}`,children:[e.jsx("h3",{children:r.rigorQualityTitle}),e.jsxs("div",{className:"rigor-quality-list",children:[e.jsxs("span",{className:`rigor-pill ${pe(E.quality.coverageLevel)}`,children:[r.rigorQualityCoverage,": ",Je(E.quality.coverageLevel)," (",Xt,")"]}),e.jsxs("span",{className:`rigor-pill ${pe(E.quality.baselineLevel)}`,children:[r.rigorQualityBaseline,": ",Je(E.quality.baselineLevel)," (n=",E.quality.baselineCount,")"]}),e.jsxs("span",{className:`rigor-pill ${pe(E.quality.ageLevel)}`,children:[r.rigorQualityAge,": ",Je(E.quality.ageLevel)]})]})]})]})]}),e.jsxs("section",{className:"table-section collapsible-section","aria-label":r.tableAria,children:[e.jsxs("header",{className:"table-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.tableTitle}),e.jsx("p",{children:r.tableNote})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":D,"aria-controls":"weekly-table-content","aria-label":`${D?r.sectionCollapse:r.sectionExpand}: ${r.tableTitle}`,onClick:()=>B(o=>!o),children:[e.jsx("span",{className:`section-toggle-icon ${D?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:D?r.sectionCollapse:r.sectionExpand})]})]}),D?e.jsx("div",{id:"weekly-table-content",className:"table-scroll",role:"region","aria-label":r.tableScrollAria,children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{scope:"col",className:"sortable",tabIndex:0,"aria-sort":Wt,onClick:()=>$e("week"),onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),$e("week"))},children:[e.jsx("span",{children:r.tableWeek}),e.jsx("span",{className:"sort-indicator","aria-hidden":"true",children:Ft})]}),e.jsx("th",{scope:"col",children:r.tableVirus}),e.jsx("th",{scope:"col",children:r.tableRegion}),e.jsxs("th",{scope:"col",className:"sortable",tabIndex:0,"aria-sort":Rt,onClick:()=>$e("cases"),onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),$e("cases"))},children:[e.jsx("span",{children:r.tableCases}),e.jsx("span",{className:"sort-indicator","aria-hidden":"true",children:Dt})]}),e.jsx("th",{scope:"col",children:r.tableSariAdmissions}),e.jsx("th",{scope:"col",children:r.tableSariIcu}),e.jsx("th",{scope:"col",children:r.tableTopPositivity})]})}),e.jsx("tbody",{children:ji.length?ji.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:O(o.week,s)}),e.jsx("td",{children:J(o.virus,s)}),e.jsx("td",{children:o.region==="National"?r.regionNational:o.region}),e.jsx("td",{children:Number.isFinite(o.cases)?Number(o.cases).toLocaleString():"–"}),e.jsx("td",{children:Number.isFinite(o.sariAdmissions)?Number(o.sariAdmissions).toLocaleString():"–"}),e.jsx("td",{children:Number.isFinite(o.sariIcu)?Number(o.sariIcu).toLocaleString():"–"}),e.jsx("td",{children:o.topPositivityVirus&&Number.isFinite(o.topPositivity)?e.jsxs("span",{className:`table-top-positivity ${ue(o.topPositivityVirus)}`,children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),e.jsxs("span",{children:[J(o.topPositivityVirus,s)," (",Number(o.topPositivity).toFixed(1),"%)"]})]}):"–"})]},o.week)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:r.tableNoData})})})]})}):null]})]}):null]}),e.jsxs("section",{className:"region-block eu-block","aria-label":r.sectionEuTitle,children:[e.jsxs("section",{className:"region-divider eu","aria-label":r.sectionEuTitle,children:[e.jsxs("div",{className:"region-divider-main",children:[e.jsx("span",{className:"region-divider-kicker",children:r.sectionKicker}),e.jsxs("div",{children:[e.jsx("h2",{children:r.sectionEuTitle}),e.jsx("p",{children:r.sectionEuNote})]})]}),e.jsxs("button",{type:"button",className:"section-toggle region-toggle","aria-expanded":ge,"aria-controls":"eu-region-content","aria-label":`${ge?r.sectionCollapse:r.sectionExpand}: ${r.sectionEuTitle}`,onClick:()=>we(o=>!o),children:[e.jsx("span",{className:`section-toggle-icon ${ge?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:ge?r.sectionCollapse:r.sectionExpand})]})]}),ge?e.jsx("div",{id:"eu-region-content",className:"region-content",children:e.jsxs("section",{className:"virology-section eu-section",children:[e.jsx("header",{className:"virology-header",children:e.jsxs("div",{children:[e.jsx("h2",{children:r.euVirologyTitle}),e.jsx("p",{children:Z(r.virologyWeek,{week:Ze})})]})}),e.jsxs("div",{className:"virology-grid",children:[e.jsx(ce,{title:r.euDetectionsTrend,subtitle:Z(r.euTrendSubtitle,{season:Ci}),option:Tt}),e.jsx("div",{id:"eu-positivity-chart",children:e.jsx(ce,{title:r.euPositivityTrend,subtitle:Z(r.euTrendSubtitle,{season:Ci}),option:Ct})})]}),e.jsxs("div",{className:"virology-lists eu-summary-lists",children:[e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.euTopDetections}),xi.length?e.jsx("ul",{children:xi.map(o=>e.jsxs("li",{className:ue(o.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),J(o.virus,s)]}),e.jsx("strong",{children:o.detections.toLocaleString()})]},`${o.virus}-${o.week}`))}):e.jsx("p",{className:"virology-empty",children:r.euNoDetections})]}),e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.euTopPositivity}),Si.length?e.jsx("ul",{children:Si.map(o=>e.jsxs("li",{className:ue(o.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),J(o.virus,s)]}),e.jsxs("strong",{children:[o.positivity.toFixed(1),"%"]})]},`${o.virus}-${o.week}`))}):e.jsx("p",{className:"virology-empty",children:r.euNoPositivity})]})]})]})}):null]}),e.jsxs("footer",{className:"dashboard-footer","aria-label":r.coverageAria,children:[e.jsxs("div",{className:"footer-strip",role:"status","aria-live":"polite",children:[e.jsxs("span",{className:`footer-chip source ${Ut}`,children:[Ot,y?` (${r.sourceLoading})`:""]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageNngyk,": ",$t]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageSari,": ",Et]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageErviss,": ",Ze]}),e.jsxs("span",{className:`footer-chip ${Ye.length+_e.length?"warn":"ok"}`,children:[r.coverageMissing,": ",Ye.length,"/",_e.length]})]}),c.warnings.length?e.jsxs("p",{className:"footer-warnings-inline",children:[e.jsxs("strong",{children:[r.warningsTitle,":"]})," ",c.warnings.join(" · ")]}):null]})]})}is.createRoot(document.getElementById("root")).render(e.jsx(ts.StrictMode,{children:e.jsx(hn,{})}));
