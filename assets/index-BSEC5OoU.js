import{r as S,j as e,c as Ns,R as ws}from"./vendor-react-QK7G4MDf.js";import{o as be,s as he,c as Q,a as le,r as Ls}from"./vendor-zod-Rs9PvQDD.js";import{V as He}from"./vendor-CElDmkQT.js";import{u as js,i as Is,a as zs,b as As,c as Ts,d as $s,e as Es,f as Cs,g as Ws,h as Rs,j as Ds,k as Vs,l as Fs}from"./vendor-echarts-Cbwmcc-H.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();const Ps={datasets:{NNGYK:{name:"NNGYK (Hungary)",description:"Aggregated national respiratory surveillance (ILI focus)."}},years:[2025],viruses:["ILI (flu-like illness)"],weekly:[{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:40,cases:2100,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:42,cases:2480,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:44,cases:3120,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:46,cases:3890,region:"National"},{dataset:"NNGYK",year:2025,virus:"ILI (flu-like illness)",week:48,cases:4510,region:"National"}],sariWeekly:[{year:2025,week:40,admissions:94,icu:10},{year:2025,week:42,admissions:120,icu:14},{year:2025,week:44,admissions:180,icu:22},{year:2025,week:46,admissions:220,icu:28}],virologyDetections:[{year:2025,week:40,virus:"SARS-CoV-2",detections:20},{year:2025,week:46,virus:"Influenza A(H1N1pdm09)",detections:2},{year:2025,week:46,virus:"RSV",detections:1}],virologyPositivity:[{year:2025,week:40,virus:"SARS-CoV-2",positivity:19.4},{year:2025,week:46,virus:"Influenza",positivity:1.5},{year:2025,week:46,virus:"RSV",positivity:.7}],variants:[]},Bs={2024:"2024-2025",2025:"2025-2026"},Ms=be({dataset:he().optional(),year:Q.number(),virus:he().optional(),week:Q.number(),cases:Q.number().nullable().optional(),region:he().optional()}).passthrough(),Hs=be({year:Q.number(),week:Q.number(),admissions:Q.number().nullable().optional(),icu:Q.number().nullable().optional()}).passthrough(),ft=be({year:Q.number().optional(),week:Q.number(),virus:he().optional(),detections:Q.number().nullable().optional()}).passthrough(),bt=be({year:Q.number().optional(),week:Q.number(),virus:he().optional(),positivity:Q.number().nullable().optional()}).passthrough(),qe=be({years:le(Q.number()).default([]),weekly:le(Ms).default([]),sariWeekly:le(Hs).default([]),virologyDetections:le(ft).default([]),virologyPositivity:le(bt).default([]),ervissDetections:le(ft).default([]),ervissPositivity:le(bt).default([])}).passthrough(),_s=Ls(he()).default({}),vt="NNGYK",Ht="ILI (flu-like illness)",ce="__all_viruses__",X="__influenza_all__",we=28900,ve=40,_t=20,Ys=qe.parse(Ps),Us=_s.parse(Bs);function ze(t){return{source:"bundled",respiratoryData:Ys,seasonLabels:Us,note:t}}function yt(t){return t>=ve?t:t+53}function re(t,s){return yt(t)-yt(s)}function Yt(t){return t>=ve||t<=_t}function Ut(t,s,n){return Yt(s)?t===n&&s>=ve||t===n+1&&s<=_t:!1}function kt(t,s){return!Number.isFinite(t)||!Number.isFinite(s)||!Yt(s)?null:s>=ve?t:t-1}function Os(t){const s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),n=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-n);const i=s.getUTCFullYear(),a=new Date(Date.UTC(i,0,1)),l=Math.ceil(((s.getTime()-a.getTime())/864e5+1)/7);return{year:i,week:l}}function Gs(t=new Date){const{year:s,week:n}=Os(t);return n>=ve?s:s-1}function oe(t){return`W${String(t).padStart(2,"0")}`}function _e(t,s){const n=t[String(s)];return n||`${s}-${s+1}`}function ye(t){if(!t)return"";const s=String(t).normalize("NFKC").replace(/\u00a0/g," ").replace(/\s+/g," ").trim();return s?/^ili\s*\(\s*flu[-\s]*like illness\s*\)$/i.test(s)?Ht:/^influenza$/i.test(s)?"Influenza":/^influenza\s+a$/i.test(s)?"Influenza A":/^influenza\s+b$/i.test(s)?"Influenza B":/^influenza\s+untyped$/i.test(s)?"Influenza (untyped)":/^influenza\s+a\s*\(\s*h1n1pdm09\s*\)$/i.test(s)||/^influenza\s+a\s*\(\s*h1pdm09\s*\)$/i.test(s)||/^influenza\s+a\s+h1n1pdm09$/i.test(s)||/^influenza\s+a\s+h1pdm09$/i.test(s)?"Influenza A(H1N1pdm09)":/^influenza\s+a\s*\(\s*h3\s*\)$/i.test(s)||/^influenza\s+a\s+h3$/i.test(s)?"Influenza A(H3)":/^influenza\s+a\s*\(\s*nt\s*\)$/i.test(s)||/^influenza\s+a\s+nt$/i.test(s)?"Influenza A(NT)":/^a\s*\(\s*h1\s*\)\s*pdm09$/i.test(s)?"Influenza A(H1N1pdm09)":/^a\s*\(\s*h3\s*\)$/i.test(s)?"Influenza A(H3)":/^a\s*\(\s*unknown\s*\)$/i.test(s)?"Influenza A(NT)":/^sars[-\s]*cov[-\s]*2$/i.test(s)?"SARS-CoV-2":/^rs[-\s]*v(i[íi]rus)?$/i.test(s)?"RSV":s:""}function Ks(t){return t===X?!1:ye(t).startsWith("Influenza")}function qs(t,s){const n=new Map;for(const a of t.virologyDetections){const l=Number(a.year);if(Number.isFinite(l)&&l!==s)continue;const d=Number(a.week);if(!Number.isFinite(d))continue;const u=Number(a.detections??0);if(!Number.isFinite(u))continue;const m=ye(a.virus);if(!m)continue;const g=`${d}::${m}`,b=n.get(g);if(b){b.detections+=u;continue}n.set(g,{week:d,label:oe(d),virus:m,detections:u})}const i=new Map;for(const a of n.values())Ks(a.virus)&&i.set(a.week,(i.get(a.week)??0)+a.detections);for(const[a,l]of i.entries())!Number.isFinite(l)||l<=0||n.set(`${a}::${X}`,{week:a,label:oe(a),virus:X,detections:l});return Array.from(n.values()).sort((a,l)=>re(a.week,l.week)||a.virus.localeCompare(l.virus))}function Zs(t,s){const n=new Map;for(const i of t.virologyPositivity){const a=Number(i.year);if(Number.isFinite(a)&&a!==s)continue;const l=Number(i.week);if(!Number.isFinite(l))continue;const d=Number(i.positivity??0);if(!Number.isFinite(d))continue;const u=ye(i.virus);if(!u)continue;const m=`${l}::${u}`,g=n.get(m);(!g||d>g.positivity)&&n.set(m,{week:l,label:oe(l),virus:u,positivity:d})}return Array.from(n.values()).sort((i,a)=>re(i.week,a.week)||i.virus.localeCompare(a.virus))}function Js(t,s){const n=qs(t,s),i=Zs(t,s),a=Array.from(new Set(n.map(u=>u.virus))).sort((u,m)=>u===X?-1:m===X?1:u.localeCompare(m)),l=Array.from(new Set(n.map(u=>u.week).concat(i.map(u=>u.week)).filter(u=>Number.isFinite(u)))),d=l.length?l.reduce((u,m)=>re(m,u)>0?m:u,l[0]):null;return{available:n.length>0||i.length>0,latestWeek:d,availableDetectionViruses:a,detectionRows:n,positivityRows:i}}function Qs(t,s){const n=new Map;for(const i of t.ervissDetections){const a=Number(i.year);if(!Number.isFinite(a))continue;const l=Number(i.week);if(!Number.isFinite(l)||!Ut(a,l,s))continue;const d=Number(i.detections??0);if(!Number.isFinite(d))continue;const u=ye(i.virus);if(!u)continue;const m=`${l}::${u}`,g=n.get(m);if(g){g.detections+=d;continue}n.set(m,{week:l,label:oe(l),virus:u,detections:d})}return Array.from(n.values()).sort((i,a)=>re(i.week,a.week)||i.virus.localeCompare(a.virus))}function Xs(t,s){const n=new Map;for(const i of t.ervissPositivity){const a=Number(i.year);if(!Number.isFinite(a))continue;const l=Number(i.week);if(!Number.isFinite(l)||!Ut(a,l,s))continue;const d=Number(i.positivity??0);if(!Number.isFinite(d))continue;const u=ye(i.virus);if(!u)continue;const m=`${l}::${u}`,g=n.get(m);(!g||d>g.positivity)&&n.set(m,{week:l,label:oe(l),virus:u,positivity:d})}return Array.from(n.values()).sort((i,a)=>re(i.week,a.week)||i.virus.localeCompare(a.virus))}function ei(t){const s=Array.from(new Set(t.ervissDetections.map(u=>kt(Number(u.year),Number(u.week))).concat(t.ervissPositivity.map(u=>kt(Number(u.year),Number(u.week)))).filter(u=>typeof u=="number"&&Number.isFinite(u)))).sort((u,m)=>u-m);if(!s.length)return{available:!1,availableYears:[],targetYear:null,latestWeek:null,detectionRows:[],positivityRows:[]};const n=Gs(),i=s.includes(n)?n:s[s.length-1],a=Qs(t,i),l=Xs(t,i),d=(()=>{const u=a.map(m=>m.week).concat(l.map(m=>m.week));return u.length?u.reduce((m,g)=>re(g,m)>0?g:m,u[0]):null})();return{available:a.length>0||l.length>0,availableYears:s,targetYear:i,latestWeek:d,detectionRows:a,positivityRows:l}}function Ye(t,s){const n=new Map;for(const i of t.weekly){if((i.dataset??vt)!==vt||i.year!==s||i.virus!==Ht)continue;const a=Number(i.week);if(!Number.isFinite(a))continue;const l=Number(i.cases??0);n.set(a,(n.get(a)??0)+(Number.isFinite(l)?l:0))}return Array.from(n.entries()).sort((i,a)=>re(i[0],a[0])).map(([i,a])=>({week:i,label:oe(i),cases:a}))}function Ue(t,s){const n=new Map;for(const i of t.sariWeekly){if(i.year!==s)continue;const a=Number(i.week);if(!Number.isFinite(a))continue;const l=Number(i.admissions??0),d=Number(i.icu??0),u=n.get(a)??{admissions:0,icu:0};u.admissions+=Number.isFinite(l)?l:0,u.icu+=Number.isFinite(d)?d:0,n.set(a,u)}return Array.from(n.entries()).sort((i,a)=>re(i[0],a[0])).map(([i,a])=>({week:i,label:oe(i),admissions:a.admissions,icu:a.icu}))}function ti(t){const s=new Set(t.years);for(const n of t.weekly)s.add(Number(n.year));for(const n of t.sariWeekly)s.add(Number(n.year));return Array.from(s).filter(n=>Number.isFinite(n)).sort((n,i)=>n-i)}function ue(t,s){const n=new Map;for(const i of t){const a=Number(i.week);if(!Number.isFinite(a))continue;const l=Number(s(i));Number.isFinite(l)&&n.set(a,(n.get(a)??0)+l)}return n}function si(t){const s=new Set;for(const n of t)for(const i of n.keys())Number.isFinite(i)&&s.add(i);return Array.from(s).sort((n,i)=>re(n,i))}function ii(t,s,n){for(let i=n.length-1;i>=0;i-=1){const a=n[i],l=t.get(a),d=s.get(a);if(!(typeof l!="number"||typeof d!="number")&&!(!Number.isFinite(l)||!Number.isFinite(d)||l===0))return(d-l)/l*100}return null}function de(){return{points:[],latestDeltaPercent:null}}function Ee(t,s,n){return{points:n.map(a=>{const l=t.has(a)?t.get(a)??null:null,d=s.has(a)?s.get(a)??null:null,u=typeof l=="number"?l:null,m=typeof d=="number"?d:null,g=u!=null&&m!=null&&Number.isFinite(u)&&Number.isFinite(m)&&u!==0?(m-u)/u*100:null;return{week:a,label:oe(a),previous:l,current:d,deltaPercent:g}}),latestDeltaPercent:ii(t,s,n)}}function ni(t,s,n,i){const a=i.includes(n-1)?n-1:null,l=_e(s,n),d=a==null?null:_e(s,a);if(a==null)return{available:!1,compareYear:null,compareSeasonLabel:null,currentSeasonLabel:l,ili:de(),sariAdmissions:de(),sariIcu:de()};const u=Ye(t,a),m=Ye(t,n),g=Ue(t,a),b=Ue(t,n),f=ue(u,y=>y.cases),p=ue(m,y=>y.cases),v=ue(g,y=>y.admissions),E=ue(b,y=>y.admissions),h=ue(g,y=>y.icu),w=ue(b,y=>y.icu),x=si([f,p,v,E,h,w]);return x.length?{available:!0,compareYear:a,compareSeasonLabel:d,currentSeasonLabel:l,ili:Ee(f,p,x),sariAdmissions:Ee(v,E,x),sariIcu:Ee(h,w,x)}:{available:!1,compareYear:a,compareSeasonLabel:d,currentSeasonLabel:l,ili:de(),sariAdmissions:de(),sariIcu:de()}}function ri(t,s){const{respiratoryData:n,seasonLabels:i}=t,a=ti(n),l=a.length?a[a.length-1]:new Date().getFullYear(),d=typeof s=="number"&&Number.isFinite(s)&&a.includes(s)?s:l,u=Ye(n,d),m=Ue(n,d),g=Js(n,d),b=ei(n),f=ni(n,i,d,a),p=u.reduce((y,j)=>y+j.cases,0),v=u.reduce((y,j)=>!y||j.cases>y.cases?j:y,null),E=u.length?u[u.length-1]:null,h=m.length?m[m.length-1]:null,w=(()=>{if(u.length<2)return null;for(let y=1;y<u.length;y+=1)if(u[y].cases>=we&&u[y-1].cases<we)return u[y].week;return null})(),x=[];return u.length||x.push("No ILI rows for this season in loaded source."),m.length||x.push("No SARI rows for this season in loaded source."),g.available||x.push("No virology rows for this season in loaded source."),b.available||x.push("No EU/EEA ERVISS rows available."),t.note&&x.push(t.note),{selectedYear:d,seasonLabel:_e(i,d),availableYears:a,iliThreshold:we,iliSeries:u,sariSeries:m,virology:g,euVirology:b,historical:f,stats:{totalIliCases:p,peakIliWeek:(v==null?void 0:v.week)??null,peakIliCases:(v==null?void 0:v.cases)??null,latestWeek:(E==null?void 0:E.week)??(h==null?void 0:h.week)??null,latestIliCases:(E==null?void 0:E.cases)??0,latestSariAdmissions:(h==null?void 0:h.admissions)??null,latestSariIcu:(h==null?void 0:h.icu)??null,weeksAboveIliThreshold:u.filter(y=>y.cases>=we).length,firstIliThresholdCrossingWeek:w},warnings:x}}const ai="modulepreload",oi=function(t,s){return new URL(t,s).href},xt={},Ot=function(s,n,i){let a=Promise.resolve();if(n&&n.length>0){const d=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),m=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(n.map(g=>{if(g=oi(g,i),g in xt)return;xt[g]=!0;const b=g.endsWith(".css"),f=b?'[rel="stylesheet"]':"";if(!!i)for(let E=d.length-1;E>=0;E--){const h=d[E];if(h.href===g&&(!b||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${f}`))return;const v=document.createElement("link");if(v.rel=b?"stylesheet":ai,b||(v.as="script"),v.crossOrigin="",v.href=g,m&&v.setAttribute("nonce",m),document.head.appendChild(v),b)return new Promise((E,h)=>{v.addEventListener("load",E),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return a.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return s().catch(l)})},li="NNGYK",St="ILI (flu-like illness)";function Z(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function P(t){const s=typeof t=="number"?t:Number(t);return Number.isFinite(s)?s:null}function Oe(t){if(typeof t!="string")return null;const s=t.trim();return s.length?s:null}function fe(t){const s=Oe(t);if(!s)return St;const n=s.normalize("NFKC").replace(/\u00a0/g," ").replace(/\s+/g," ").trim();return/^ili\s*\(\s*flu[-\s]*like illness\s*\)$/i.test(n)?St:/^influenza$/i.test(n)?"Influenza":/^influenza\s+a$/i.test(n)?"Influenza A":/^influenza\s+b$/i.test(n)?"Influenza B":/^influenza\s+untyped$/i.test(n)?"Influenza (untyped)":/^influenza\s+a\s*\(\s*h1n1pdm09\s*\)$/i.test(n)||/^influenza\s+a\s*\(\s*h1pdm09\s*\)$/i.test(n)||/^a\s*\(\s*h1\s*\)\s*pdm09$/i.test(n)?"Influenza A(H1N1pdm09)":/^influenza\s+a\s*\(\s*h3\s*\)$/i.test(n)||/^a\s*\(\s*h3\s*\)$/i.test(n)?"Influenza A(H3)":/^influenza\s+a\s*\(\s*nt\s*\)$/i.test(n)||/^a\s*\(\s*unknown\s*\)$/i.test(n)?"Influenza A(NT)":/^sars[-\s]*cov[-\s]*2$/i.test(n)?"SARS-CoV-2":/^rs[-\s]*v(i[íi]rus)?$/i.test(n)?"RSV":n}function Nt(t){return t>=40?t:t+53}function Le(t,s){return Nt(t)-Nt(s)}function Ge(t){try{return null}catch{return null}}async function Gt(t){try{const s=await fetch(t,{cache:"no-cache"});return s.ok?await s.json():null}catch{return null}}async function ci(){const t=Ge("../../nngyk_all.json"),s=["./nngyk_all.json","/nngyk_all.json",...t?[t]:[]];for(const n of s){const i=await Gt(n);if(i!=null)return{payload:i,location:n}}try{return{payload:(await Ot(()=>import("./nngyk_all-6WdLRqwI.js"),[],import.meta.url)).default,location:"@nngyk-all"}}catch{return null}}async function ui(){const s=["./erviss_data/erviss_sari.json","/erviss_data/erviss_sari.json","./erviss_sari.json","/erviss_sari.json",...[Ge("../../erviss_data/erviss_sari.json"),Ge("../../erviss_sari.json")].filter(n=>typeof n=="string")];for(const n of s){const i=await Gt(n);if(i!=null)return{payload:i,location:n}}try{return{payload:(await Ot(()=>import("./erviss_sari-BR0vDMot.js"),[],import.meta.url)).default,location:"@erviss-sari"}}catch{return null}}function di(t,s){if(!Array.isArray(t))return null;const n=new Map,i=new Map,a=new Map,l=new Map,d=new Set,u=new Set;for(const f of t){if(!Z(f))continue;const p=Z(f.payload)?f.payload:null;if(!p)continue;const v=Array.isArray(p.weekly)?p.weekly:[],E=Z(p.metadata)?p.metadata:null,h=P(f.season_year)??P(E==null?void 0:E.season_year)??P(Z(v[0])?v[0].year:null),w=P(f.week)??P(Z(v[0])?v[0].week:null);for(const j of v){if(!Z(j))continue;const W=P(j.year)??h,T=P(j.week)??w;if(W==null||T==null)continue;const B=Oe(j.dataset)??li,C=fe(j.virus),G=Oe(j.region)??"National",Y=P(j.cases)??0,ke=`${B}::${W}::${T}::${C}::${G}`,ae=n.get(ke);ae?ae.cases+=Y:n.set(ke,{dataset:B,year:W,week:T,virus:C,cases:Y,region:G}),d.add(W),u.add(C)}const x=Z(p.sari)?p.sari:null;if(x&&h!=null){const j=P(x.week)??w,W=P(x.admissions),T=P(x.icu);if(j!=null&&(W!=null||T!=null)){const B=`${h}::${j}`,C=i.get(B)??{year:h,week:j,admissions:null,icu:null};W!=null&&(C.admissions=(C.admissions??0)+W),T!=null&&(C.icu=(C.icu??0)+T),i.set(B,C),d.add(h)}}const y=Z(p.virology)?p.virology:null;if(y&&h!=null&&w!=null){const j=Array.isArray(y.detections)?y.detections:[],W=Array.isArray(y.positivity)?y.positivity:[];for(const T of j){if(!Z(T))continue;const B=fe(T.virus),C=P(T.detections);if(C==null)continue;const G=`${h}::${w}::${B}`,Y=a.get(G);Y?Y.detections+=C:a.set(G,{year:h,week:w,virus:B,detections:C})}for(const T of W){if(!Z(T))continue;const B=fe(T.virus),C=P(T.positivity);if(C==null)continue;const G=`${h}::${w}::${B}`,Y=l.get(G);(!Y||C>Y.positivity)&&l.set(G,{year:h,week:w,virus:B,positivity:C})}}}if(!n.size)return null;const m={},g=Array.from(d).sort((f,p)=>f-p);for(const f of g)m[String(f)]=`${f}-${f+1}`;return{source:"nngyk_all",respiratoryData:qe.parse({years:g,weekly:Array.from(n.values()).sort((f,p)=>f.year-p.year||Le(f.week,p.week)||f.virus.localeCompare(p.virus)),sariWeekly:Array.from(i.values()).sort((f,p)=>f.year-p.year||Le(f.week,p.week)),virologyDetections:Array.from(a.values()).sort((f,p)=>f.year-p.year||Le(f.week,p.week)||f.virus.localeCompare(p.virus)),virologyPositivity:Array.from(l.values()).sort((f,p)=>f.year-p.year||Le(f.week,p.week)||f.virus.localeCompare(p.virus)),ervissDetections:[],ervissPositivity:[],viruses:Array.from(u).sort((f,p)=>f.localeCompare(p)),datasets:{NNGYK:{name:"NNGYK (Hungary)",description:"Structured from parsed NNGYK bulletins (latest run)."}}}),seasonLabels:m,note:`Loaded live bulletin extract from ${s}.`}}function Ke(t,s){const n=t.note?`${t.note} ${s}`:s;return{...t,note:n}}function gi(t,s,n){if(!Z(s))return null;const i=P(s.latest_year),a=Array.isArray(s.detections)?s.detections:[],l=Array.isArray(s.positivity)?s.positivity:[],d=a.map(g=>{if(!Z(g))return null;const b=P(g.year)??i,f=P(g.week),p=P(g.detections),v=fe(g.virus);return b==null||f==null||p==null||!v?null:{year:b,week:f,virus:v,detections:p}}).filter(g=>g!==null).sort((g,b)=>g.year-b.year||g.week-b.week||g.virus.localeCompare(b.virus)),u=l.map(g=>{if(!Z(g))return null;const b=P(g.year)??i,f=P(g.week),p=P(g.positivity),v=fe(g.virus);return b==null||f==null||p==null||!v?null:{year:b,week:f,virus:v,positivity:p}}).filter(g=>g!==null).sort((g,b)=>g.year-b.year||g.week-b.week||g.virus.localeCompare(b.virus));if(!d.length&&!u.length)return null;const m=qe.parse({...t.respiratoryData,ervissDetections:d,ervissPositivity:u,datasets:{...Z(t.respiratoryData.datasets)?t.respiratoryData.datasets:{},ERVISS:{name:"ERVISS (EU/EEA)",description:"EU/EEA SARI virological detections and positivity from ECDC ERVISS."}}});return Ke({...t,respiratoryData:m},`Loaded ERVISS feed from ${n}.`)}async function hi(){const t=await ci();let s;t?s=di(t.payload,t.location)??ze("nngyk_all.json present but invalid for weekly aggregation; using bundled sample."):s=ze("nngyk_all.json not found; using bundled sample.");const n=await ui();if(!n)return Ke(s,"ERVISS feed not found.");const i=gi(s,n.payload,n.location);return i||Ke(s,"ERVISS feed present but invalid.")}const wt=new Intl.NumberFormat("en-US");function mi(t,s="W"){const n=String(t).padStart(2,"0");return s==="W"?`W${n}`:`${s}${n}`}function pi(t,s){const n=/^W(\d{1,2})$/i.exec(String(t??"").trim());if(!n)return t;const i=String(n[1]).padStart(2,"0");return s==="W"?`W${i}`:`${s}${i}`}function fi({points:t,threshold:s,compact:n,dark:i=!1,labels:a}){const l=i?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",markerLine:"rgba(148, 163, 184, 0.38)",markerLabel:"#cbd5e1",markerBg:"rgba(15, 23, 42, 0.88)",currentWeekLine:"rgba(125, 211, 252, 0.55)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",markerLine:"rgba(15, 23, 42, 0.16)",markerLabel:"#64748b",markerBg:"rgba(255, 255, 255, 0.85)",currentWeekLine:"rgba(37, 99, 235, 0.45)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},d=a??{iliCases:"ILI cases",alertThreshold:"Alert threshold",crossing:"Threshold crossing",noData:"No data",seasonStart:"Season start",holidays:"Holiday period"},u=(a==null?void 0:a.weekPrefix)??"W",m=[{week:40,text:d.seasonStart},{week:52,text:d.holidays},{week:1,text:d.holidays}],b=t.map(x=>x.label).map(x=>pi(x,u)),f=t.map(x=>x.cases),p=b.length>0,v=p?b[b.length-1]:null,E=m.map(x=>{const y=mi(x.week,u);return b.includes(y)?{name:x.text,xAxis:y}:null}).filter(x=>x!==null),h=[{name:d.iliCases,type:"line",data:p?f:[0],smooth:.24,showSymbol:!1,symbol:"circle",symbolSize:7,lineStyle:{width:3,color:i?"#7dd3fc":"#2563eb",cap:"round"},areaStyle:{color:new He(0,0,0,1,[{offset:0,color:i?"rgba(125, 211, 252, 0.42)":"rgba(59, 130, 246, 0.28)"},{offset:1,color:i?"rgba(56, 189, 248, 0.06)":"rgba(147, 197, 253, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3.6}},markLine:v?{symbol:["none","none"],silent:!0,lineStyle:{color:l.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:v}]}:void 0,z:3},{name:d.alertThreshold,type:"line",data:p?b.map(()=>s):[s],symbol:"none",itemStyle:{color:"#dc2626"},lineStyle:{color:"#dc2626",type:"dashed",width:2},emphasis:{lineStyle:{color:"#dc2626",width:2.2}},markLine:E.length?{symbol:["none","none"],silent:!0,lineStyle:{color:l.markerLine,width:1,type:"solid"},label:{color:l.markerLabel,formatter:"{b}",position:"insideStartTop",padding:[2,4],backgroundColor:l.markerBg,borderRadius:4},data:E}:void 0,z:5}];let w;if(n&&b.length>12){const x=Math.max(0,b.length-12);w=[{type:"inside",xAxisIndex:0,startValue:b[x],endValue:b[b.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:b[x],endValue:b[b.length-1],brushSelect:!1,showDataShadow:!1,borderColor:l.sliderBorder,fillerColor:l.sliderFill,moveHandleSize:6,textStyle:{color:l.sliderText}}]}return{animation:!1,aria:{enabled:!0},grid:{top:n?42:78,right:20,bottom:n&&w?58:36,left:54},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:l.currentWeekLine,type:"dashed",width:1.1}},backgroundColor:l.tooltipBg,borderColor:l.tooltipBorder,borderWidth:1,textStyle:{color:l.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:x=>{const y=Array.isArray(x)?x:[];if(!y.length)return"";const W=y[0].axisValueLabel??"",T=y.filter(B=>B.seriesName!==d.crossing).map(B=>{const C=B,G=Array.isArray(C.data)?C.data[1]:C.data,Y=typeof G=="number"&&Number.isFinite(G)?wt.format(G):"–";return`${C.marker??""} ${C.seriesName??""}: ${Y}`}).join("<br/>");return T?`${W}<br/>${T}`:W}},legend:{show:!n,top:2,left:8,right:8,data:[d.iliCases,d.alertThreshold],itemWidth:14,itemHeight:8,itemGap:12,padding:[6,10],backgroundColor:l.legendBg,borderColor:l.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:l.legend,fontSize:12,lineHeight:16,fontWeight:600},icon:"circle"},xAxis:{type:"category",data:p?b:[d.noData],boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:l.axisLine}},axisLabel:{color:l.axisLabel,interval:n?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:l.axisLabel,formatter:x=>wt.format(x)},splitLine:{lineStyle:{color:l.grid,type:[4,5]}}},dataZoom:w,series:h}}const Lt=new Intl.NumberFormat("en-US");function jt(t,s){const n=/^W(\d{1,2})$/i.exec(String(t??"").trim());if(!n)return t;const i=String(n[1]).padStart(2,"0");return s==="hu"?`H${i}`:`W${i}`}function ge(t){if(t==null||!Number.isFinite(t))return"–";const s=Math.round(t*10)/10;return`${s>0?"+":""}${s.toLocaleString(void 0,{maximumFractionDigits:1})}%`}function Ce({metric:t,compareSeasonLabel:s,currentSeasonLabel:n,compact:i,dark:a=!1,language:l="en",labels:d}){const u=a?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",baseline:"rgba(203, 213, 225, 0.58)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",baseline:"rgba(15, 23, 42, 0.52)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},m=d??{noData:"No data"},g=t.points.map(h=>h.label),b=t.points.map(h=>h.previous),f=t.points.map(h=>h.current),p=g.length>0,v=p?g[g.length-1]:null;let E;if(i&&g.length>12){const h=Math.max(0,g.length-12);E=[{type:"inside",xAxisIndex:0,startValue:g[h],endValue:g[g.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:g[h],endValue:g[g.length-1],brushSelect:!1,showDataShadow:!1,borderColor:u.sliderBorder,fillerColor:u.sliderFill,moveHandleSize:6,textStyle:{color:u.sliderText}}]}return{animation:!1,aria:{enabled:!0},grid:{top:i?36:72,right:18,bottom:i&&E?58:46,left:50},tooltip:{trigger:"axis",backgroundColor:u.tooltipBg,borderColor:u.tooltipBorder,borderWidth:1,textStyle:{color:u.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:h=>{const w=Array.isArray(h)?h:[];if(!w.length)return"";const x=w[0],y=jt(x.axisValueLabel??"",l),j=w.map(W=>{const T=W,B=typeof T.data=="number"&&Number.isFinite(T.data)?Lt.format(T.data):"–";return`${T.marker??""} ${T.seriesName??""}: ${B}`}).join("<br/>");return`${y}<br/>${j}`}},legend:{show:!i,top:2,left:8,right:8,itemWidth:12,itemHeight:8,itemGap:10,padding:[6,10],backgroundColor:u.legendBg,borderColor:u.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:u.legend,fontSize:12,lineHeight:16,fontWeight:600}},xAxis:{type:"category",data:p?g:[m.noData],axisLine:{lineStyle:{color:u.axisLine}},axisLabel:{color:u.axisLabel,interval:i?"auto":0,hideOverlap:!0,formatter:h=>jt(String(h),l)}},yAxis:{type:"value",min:0,axisLabel:{color:u.axisLabel,formatter:h=>Lt.format(h)},splitLine:{lineStyle:{color:u.grid,type:[4,5]}}},dataZoom:E,series:[{name:s,type:"line",data:p?b:[null],smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:u.baseline,width:2},itemStyle:{color:u.baseline},markLine:v?{symbol:["none","none"],silent:!0,lineStyle:{color:u.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:v}]}:void 0},{name:n,type:"line",data:p?f:[null],smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:"#2563eb",width:2.4},itemStyle:{color:"#2563eb"}}]}}const It=new Intl.NumberFormat("en-US"),bi=new Intl.NumberFormat("en-US",{maximumFractionDigits:1});function zt(t){return t>=40?t:t+53}function Kt(t,s){return zt(t)-zt(s)}function qt(t,s){return t-s}function Zt(t,s){const n=String(t).padStart(2,"0");return s==="hu"?`H${n}`:`W${n}`}const vi={"ILI (flu-like illness)":"ILI (influenzaszerű megbetegedés)",Influenza:"Influenza","Influenza A":"Influenza A","Influenza B":"Influenza B","Influenza A(H1N1pdm09)":"Influenza A(H1N1pdm09)","Influenza A(H3)":"Influenza A(H3)","Influenza A(NT)":"Influenza A(NT)",RSV:"RSV","SARS-CoV-2":"SARS-CoV-2",[X]:"Influenza (összes)"},yi={influenza:{light:"#ec4899",dark:"#f472b6"},sarscov2:{light:"#2563eb",dark:"#60a5fa"},rsv:{light:"#14b8a6",dark:"#2dd4bf"},hmpv:{light:"#f97316",dark:"#fb923c"}},At={light:["#8b5cf6","#0ea5e9","#ef4444","#84cc16","#f59e0b"],dark:["#a78bfa","#38bdf8","#f87171","#a3e635","#fbbf24"]};function ki(t){let s=0;for(let n=0;n<t.length;n+=1)s=s*31+t.charCodeAt(n)>>>0;return s}function xi(t){const s=String(t??"").trim().toLowerCase();return s?s===X.toLowerCase()||s.includes("influenza")||s.includes("flu-like")||s.startsWith("ili")?"influenza":s.includes("sars")||s.includes("cov")?"sarscov2":/\brsv\b/.test(s)?"rsv":s.includes("hmpv")||s.includes("metapneumo")?"hmpv":"other":"other"}function Jt(t,s=!1){const n=xi(t);if(n!=="other"){const l=yi[n];return s?l.dark:l.light}const i=s?At.dark:At.light,a=String(t??"").trim()||"other";return i[ki(a)%i.length]}function q(t,s="en"){return s==="hu"?vi[t]??t:t===X?"Influenza (all)":t}function Qt(t,s,n){if(!s||t.length<=12)return;const i=Math.max(0,t.length-12);return[{type:"inside",xAxisIndex:0,startValue:t[i],endValue:t[t.length-1]},{type:"slider",xAxisIndex:0,bottom:8,height:18,startValue:t[i],endValue:t[t.length-1],brushSelect:!1,showDataShadow:!1,borderColor:n.sliderBorder,fillerColor:n.sliderFill,moveHandleSize:6,textStyle:{color:n.sliderText}}]}function Tt({rows:t,selectedVirus:s,compact:n,weekOrder:i="season",language:a="en",dark:l=!1}){const d=l?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",legendPage:"#93c5fd",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",legendPage:"#1d4ed8",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},u=i==="numeric"?qt:Kt,m=Array.from(new Set(t.map(h=>h.week))).sort((h,w)=>u(h,w)),g=m.map(h=>Zt(h,a)),b=a==="hu"?"Nincs adat":"No data",f=s===ce?Array.from(new Set(t.map(h=>h.virus))).sort((h,w)=>h===X?-1:w===X?1:h.localeCompare(w)):[s],p=Qt(g,n,d),v=g.length?g[g.length-1]:null,E=f.map((h,w)=>{const x=new Map;for(const j of t)j.virus===h&&x.set(j.week,j.detections);const y=Jt(h,l);return{name:q(h,a),type:"line",data:m.map(j=>x.get(j)??null),smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:y,width:2.2},itemStyle:{color:y},markLine:w===0&&v?{symbol:["none","none"],silent:!0,lineStyle:{color:d.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:v}]}:void 0}});return{animation:!1,aria:{enabled:!0},grid:{top:n?40:90,right:18,bottom:n&&p?58:36,left:48},tooltip:{trigger:"axis",backgroundColor:d.tooltipBg,borderColor:d.tooltipBorder,borderWidth:1,textStyle:{color:d.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:h=>{const w=Array.isArray(h)?h:[];if(!w.length)return"";const x=w[0].axisValueLabel??"",y=w.map(j=>{const W=j,T=typeof W.data=="number"&&Number.isFinite(W.data)?It.format(W.data):"–";return`${W.marker??""} ${W.seriesName??""}: ${T}`}).join("<br/>");return`${x}<br/>${y}`}},legend:{show:!n,type:"scroll",top:4,left:8,right:8,itemWidth:10,itemHeight:10,itemGap:10,padding:[6,10],backgroundColor:d.legendBg,borderColor:d.legendBorder,borderWidth:1,borderRadius:10,pageIconColor:d.legendPage,pageIconInactiveColor:d.axisLine,pageTextStyle:{color:d.axisLabel},textStyle:{color:d.legend,fontWeight:600,fontSize:12,lineHeight:16}},xAxis:{type:"category",data:g.length?g:[b],axisLine:{lineStyle:{color:d.axisLine}},axisLabel:{color:d.axisLabel,interval:n?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:d.axisLabel,formatter:h=>It.format(h)},splitLine:{lineStyle:{color:d.grid,type:[4,5]}}},dataZoom:p,series:E}}function $t({rows:t,compact:s,weekOrder:n="season",language:i="en",dark:a=!1}){const l=a?{axisLine:"rgba(148, 163, 184, 0.45)",axisLabel:"#cbd5e1",legend:"#e2e8f0",grid:"rgba(148, 163, 184, 0.16)",sliderBorder:"rgba(148, 163, 184, 0.35)",sliderFill:"rgba(59, 130, 246, 0.35)",sliderText:"#cbd5e1",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",legendPage:"#93c5fd",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLine:"rgba(15, 23, 42, 0.20)",axisLabel:"#334155",legend:"#0f172a",grid:"rgba(15, 23, 42, 0.1)",sliderBorder:"rgba(15, 23, 42, 0.18)",sliderFill:"rgba(37, 99, 235, 0.20)",sliderText:"#475569",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",legendPage:"#1d4ed8",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"},d=n==="numeric"?qt:Kt,u=Array.from(new Set(t.map(h=>h.week))).sort((h,w)=>d(h,w)),m=u.map(h=>Zt(h,i)),g=i==="hu"?"Nincs adat":"No data",b=i==="hu"?" pozitivitás":" positivity",f=Array.from(new Set(t.map(h=>h.virus))).sort((h,w)=>h.localeCompare(w)),p=Qt(m,s,l),v=m.length?m[m.length-1]:null,E=f.map((h,w)=>{const x=new Map;for(const j of t)j.virus===h&&x.set(j.week,j.positivity);const y=Jt(h,a);return{name:`${q(h,i)}${b}`,type:"line",data:u.map(j=>x.get(j)??null),smooth:.25,connectNulls:!1,symbolSize:5,lineStyle:{color:y,width:2.2},itemStyle:{color:y},markLine:w===0&&v?{symbol:["none","none"],silent:!0,lineStyle:{color:l.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:v}]}:void 0}});return{animation:!1,aria:{enabled:!0},grid:{top:s?40:90,right:18,bottom:s&&p?58:36,left:48},tooltip:{trigger:"axis",backgroundColor:l.tooltipBg,borderColor:l.tooltipBorder,borderWidth:1,textStyle:{color:l.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:h=>{const w=Array.isArray(h)?h:[];if(!w.length)return"";const x=w[0].axisValueLabel??"",y=w.map(j=>{const W=j,T=typeof W.data=="number"&&Number.isFinite(W.data)?`${bi.format(W.data)}%`:"–";return`${W.marker??""} ${W.seriesName??""}: ${T}`}).join("<br/>");return`${x}<br/>${y}`}},legend:{show:!s,type:"scroll",top:4,left:8,right:8,itemWidth:10,itemHeight:10,itemGap:10,padding:[6,10],backgroundColor:l.legendBg,borderColor:l.legendBorder,borderWidth:1,borderRadius:10,pageIconColor:l.legendPage,pageIconInactiveColor:l.axisLine,pageTextStyle:{color:l.axisLabel},textStyle:{color:l.legend,fontWeight:600,fontSize:12,lineHeight:16}},xAxis:{type:"category",data:m.length?m:[g],axisLine:{lineStyle:{color:l.axisLine}},axisLabel:{color:l.axisLabel,interval:s?"auto":0,hideOverlap:!0}},yAxis:{type:"value",min:0,axisLabel:{color:l.axisLabel,formatter:h=>`${h}%`},splitLine:{lineStyle:{color:l.grid,type:[4,5]}}},dataZoom:p,series:E}}js([zs,As,Ts,$s,Es,Cs,Ws,Rs,Ds,Vs,Fs]);function ie({title:t,subtitle:s,option:n}){const i=S.useRef(null),a=S.useRef(null);return S.useEffect(()=>{const l=i.current;if(!l)return;a.current||(a.current=Is(l,void 0,{renderer:"canvas"})),a.current.setOption(n,{notMerge:!0,lazyUpdate:!0}),a.current.resize();const d=()=>{var m;return(m=a.current)==null?void 0:m.resize()};let u=null;return typeof ResizeObserver<"u"?(u=new ResizeObserver(()=>d()),u.observe(l)):window.addEventListener("resize",d),()=>{if(u){u.disconnect();return}window.removeEventListener("resize",d)}},[n]),S.useEffect(()=>()=>{var l;(l=a.current)==null||l.dispose(),a.current=null},[]),e.jsxs("article",{className:"panel",children:[e.jsxs("header",{className:"panel-header",children:[e.jsx("h2",{children:t}),s?e.jsx("p",{children:s}):null]}),e.jsx("div",{className:"panel-chart",ref:i})]})}const Et="NNGYK",je="ILI (flu-like illness)",Ct="rvd-lang",Wt="rvd-theme",Si={en:{appTitle:"Seasonal Respiratory Pathogen Dashboard",appSubtitle:"Hungarian and European situation overview based on NNGYK and ECDC data",season:"Season",language:"Language",theme:"Theme",themeSystem:"System",themeDark:"Dark",themeLight:"Light",sectionCollapse:"Collapse",sectionExpand:"Expand",sourceTitle:"Data source",sourceLive:"Live source: nngyk_all.json",sourceFallback:"Fallback source: bundled sample",sourceLoading:"loading",sectionKicker:"Section",sectionHuTitle:"Hungarian situation",sectionHuNote:"NNGYK surveillance and sentinel indicators for the selected season.",sectionEuTitle:"European (EU/EEA) context",sectionEuNote:"ECDC ERVISS sentinel virology indicators.",alertsAria:"Key alerts",signalTitle:"Seasonal influenza threshold",signalEpidemicYes:"Influenza epidemic ongoing",signalEpidemicNo:"No influenza epidemic",signalAbove:"Above threshold",signalBelow:"Below threshold",fluTextAbove:"{week}: ILI activity ({cases} estimated cases) is above the alert threshold ({threshold}).",fluTextBelow:"{week}: ILI activity ({cases} estimated cases) remains below the alert threshold ({threshold}).",fluChipAbove:"Epidemic signal",fluChipBelow:"Below threshold",alertThreshold:"Alert threshold",crossingLabel:"Threshold crossing",alertsLoading:"Awaiting data",alertsLoadingPos:"Awaiting positivity data",alertsLoadingEuPos:"Awaiting EU/EEA positivity data",coverageNngyk:"Coverage · NNGYK",coverageNngykNote:"Latest ILI week in selected season",coverageSari:"Coverage · SARI",coverageSariNote:"Latest SARI week in selected season",coverageErviss:"Coverage · ERVISS",coverageErvissNote:"Latest EU/EEA reporting week",coverageMissing:"Missing weeks (ILI/SARI)",coverageMissingNote:"Gaps within each season timeline",coverageAria:"Data coverage indicators",trendTitle:"Weekly trend signals",trendNote:"Weekly change in ILI cases and sentinel positivity.",trendAria:"Weekly trend signals",trendNoRecentChange:"No notable change",trendSurging:"Surging",trendDeclining:"Declining",trendFlat:"Flat",trendEmpty:"No recent ILI or positivity trend data.",glanceTitle:"Season at a glance",glanceNote:"Growth and burden signals alongside peak and recent trend.",glanceAria:"Season at a glance",glanceIli:"Flu-like illness",glanceSari:"SARI hospitalizations",glanceIcu:"SARI ICU",glancePeak:"Peak",glanceLatest:"Latest",glanceSlope:"3-week trend",glanceWow:"WoW change",glanceWeeksAbove:"Weeks above threshold",glanceStdTitle:"Season-to-date burden",glanceStdIli:"ILI cumulative",glanceStdSari:"SARI cumulative",glanceSeverityTitle:"Severity ratios",glanceSeveritySari:"SARI as % of ILI",glanceSeverityIcu:"ICU as % of SARI",stdNoBaseline:"No baseline",stdMedian:"Median",stdLastSeason:"Last season",statsTotalIli:"Total ILI cases",statsPeakIli:"ILI peak week / cases",statsIliVsPrev:"Latest ILI vs previous season",statsIliVsPrevBaseline:"{season}: {value}",statsIliVsPrevNoBaseline:"No previous-season value for this week.",statsFirstCrossing:"First threshold crossing",statsWeeksAbove:"Weeks above threshold",statsLatestSari:"Latest SARI admissions / ICU cases",chartIli:"Flu-like illness",chartIliSubtitle:"Season {season} (threshold {threshold})",chartSari:"SARI hospital admissions",chartSariSubtitle:"Season {season}",leaderHuTitle:"Leading virus by positivity in Hungary",leaderEuTitle:"Leading virus by positivity in the EU/EEA",leaderHuText:"{week}: {virus} shows the highest sentinel positivity ({pos}%).",leaderEuText:"{week} ({year}): {virus} shows the highest EU/EEA sentinel positivity ({pos}%).",leadersAria:"Latest virology leaders",virologyTitle:"Sentinel virology",virologyWeek:"Latest: {week}",virologyFilter:"Detections filter",virologyAllViruses:"All viruses",virologyTopDetections:"Top detections",virologyTopPositivity:"Top positivity",virologyNoDetections:"No detections available.",virologyNoPositivity:"No positivity data available.",virologyDetectionsTrend:"Sentinel detections trend",virologyDetectionsSubtitle:"{week} focus",virologyPositivityTrend:"Sentinel positivity trend",euVirologyTitle:"EU/EEA ERVISS virology",euTopDetections:"Top EU detections",euTopPositivity:"Top EU positivity",euNoDetections:"No EU detections available.",euNoPositivity:"No EU positivity data available.",euDetectionsTrend:"EU detections trend",euPositivityTrend:"EU positivity trend",euTrendSubtitle:"Target NH respiratory season: {season}",tableTitle:"Respiratory viruses week-by-week in Hungary",tableNote:"Click Week or Cases to sort; includes matching SARI and positivity context.",tableBadge:"Accessible table view",tableAria:"Weekly table",tableScrollAria:"Scrollable table",tableWeek:"Week",tableVirus:"Virus",tableRegion:"Region",tableCases:"Cases",tableSariAdmissions:"SARI admissions",tableSariIcu:"SARI ICU",tableTopPositivity:"Top positivity",tableNoData:"No data available.",historicalTitle:"Historical season comparison",historicalEmptyHeader:"Select a season that has a prior year available to render comparison trends.",historicalIli:"ILI comparison",historicalSari:"SARI admissions comparison",historicalIcu:"SARI ICU comparison",historicalDelta:"Latest delta: {value}",historicalUnavailable:"Historical comparison is unavailable because the previous season is missing from the loaded data source.",warningsTitle:"Data warnings",noDataShort:"No data",regionNational:"National"},hu:{appTitle:"Szezonális Légúti Kórokozó Dashboard",appSubtitle:"A magyarországi és európai helyzetkép az NNGYK és ECDC adatai alapján",season:"Szezon",language:"Nyelv",theme:"Téma",themeSystem:"Rendszer",themeDark:"Sötét",themeLight:"Világos",sectionCollapse:"Összecsuk",sectionExpand:"Kinyit",sourceTitle:"Adatforrás",sourceLive:"Élő forrás: nngyk_all.json",sourceFallback:"Tartalék forrás: beépített minta",sourceLoading:"betöltés",sectionKicker:"Szekció",sectionHuTitle:"Magyarországi helyzet",sectionHuNote:"NNGYK rutinfelügyeleti és sentinel mutatók a kiválasztott szezonban.",sectionEuTitle:"Európai (EU/EGT) kitekintés",sectionEuNote:"ECDC ERVISS sentinel virológiai mutatók.",alertsAria:"Fő riasztások",signalTitle:"Szezonális influenzaküszöb",signalEpidemicYes:"Influenza járvány van",signalEpidemicNo:"Nincs influenza járvány",signalAbove:"Küszöb felett",signalBelow:"Küszöb alatt",fluTextAbove:"{week}: az ILI-aktivitás ({cases} becsült eset) meghaladja a riasztási küszöböt ({threshold}).",fluTextBelow:"{week}: az ILI-aktivitás ({cases} becsült eset) a riasztási küszöb ({threshold}) alatt marad.",fluChipAbove:"Járványjelzés",fluChipBelow:"Küszöb alatt",alertThreshold:"Riasztási küszöb",crossingLabel:"Küszöbátlépés",alertsLoading:"Adatok betöltése",alertsLoadingPos:"Pozitivitási adatok betöltése",alertsLoadingEuPos:"EU/EGT pozitivitási adatok betöltése",coverageNngyk:"Lefedettség · NNGYK",coverageNngykNote:"A kiválasztott szezon legfrissebb ILI hete",coverageSari:"Lefedettség · SARI",coverageSariNote:"A kiválasztott szezon legfrissebb SARI hete",coverageErviss:"Lefedettség · ERVISS",coverageErvissNote:"Legfrissebb EU/EGT jelentési hét",coverageMissing:"Hiányzó hetek (ILI/SARI)",coverageMissingNote:"Rések az egyes szezonidősorokban",coverageAria:"Adatlefedettségi jelzők",trendTitle:"Heti trendszignálok",trendNote:"Heti változás az ILI-esetszámban és a sentinel pozitivitásban.",trendAria:"Heti trendszignálok",trendNoRecentChange:"Nincs friss változás",trendSurging:"Erősödik",trendDeclining:"Gyengül",trendFlat:"Változatlan",trendEmpty:"Nincs friss ILI- vagy pozitivitási trendadat.",glanceTitle:"Szezon pillanatkép",glanceNote:"Terhelési és növekedési jelzések a szezon alakulásáról.",glanceAria:"Szezon pillanatkép",glanceIli:"Influenzaszerű megbetegedés (ILI)",glanceSari:"SARI felvételek",glanceIcu:"SARI ICU",glancePeak:"Csúcs",glanceLatest:"Legfrissebb",glanceSlope:"3 hetes trend",glanceWow:"Heti változás",glanceWeeksAbove:"Küszöb feletti hetek",glanceStdTitle:"Szezon eddig",glanceStdIli:"ILI kumulatív",glanceStdSari:"SARI kumulatív",glanceSeverityTitle:"Súlyossági arányok",glanceSeveritySari:"SARI az ILI %-ában",glanceSeverityIcu:"ICU a SARI %-ában",stdNoBaseline:"Nincs összehasonlítás",stdMedian:"Medián",stdLastSeason:"Előző szezon",statsTotalIli:"Összes ILI eset",statsPeakIli:"ILI csúcs hét / eset",statsIliVsPrev:"Legfrissebb ILI vs előző szezon",statsIliVsPrevBaseline:"{season}: {value}",statsIliVsPrevNoBaseline:"Ehhez a héthez nincs előző szezonos érték.",statsFirstCrossing:"Első küszöbátlépés",statsWeeksAbove:"Küszöb feletti hetek",statsLatestSari:"Legfrissebb SARI felvételek / ICU",chartIli:"Influenzaszerű megbetegedés (ILI)",chartIliSubtitle:"Szezon: {season} (küszöb {threshold})",chartSari:"SARI kórházi felvételek",chartSariSubtitle:"Szezon: {season}",leaderHuTitle:"Legmagasabb sentinel pozitivitás (Magyarország)",leaderEuTitle:"Legmagasabb sentinel pozitivitás (EU/EGT)",leaderHuText:"{week}: {virus} mutatja a legmagasabb sentinel pozitivitást ({pos}%).",leaderEuText:"{week} ({year}): {virus} mutatja a legmagasabb EU/EGT sentinel pozitivitást ({pos}%).",leadersAria:"Legfrissebb virológiai vezetők",virologyTitle:"Sentinel virológia",virologyWeek:"Legfrissebb: {week}",virologyFilter:"Detekció szűrő",virologyAllViruses:"Összes vírus",virologyTopDetections:"Legmagasabb detekciók",virologyTopPositivity:"Legmagasabb pozitivitás",virologyNoDetections:"Nincs detekciós adat.",virologyNoPositivity:"Nincs pozitivitási adat.",virologyDetectionsTrend:"Sentinel detekciós trend",virologyDetectionsSubtitle:"{week} fókusz",virologyPositivityTrend:"Sentinel pozitivitási trend",euVirologyTitle:"EU/EGT ERVISS virológia",euTopDetections:"Legmagasabb EU detekciók",euTopPositivity:"Legmagasabb EU pozitivitás",euNoDetections:"Nincs EU detekciós adat.",euNoPositivity:"Nincs EU pozitivitási adat.",euDetectionsTrend:"EU detekciós trend",euPositivityTrend:"EU pozitivitási trend",euTrendSubtitle:"Cél NH légúti szezon: {season}",tableTitle:"Légúti vírusok heti bontásban (Magyarország)",tableNote:"Kattints a Hét vagy Esetszám oszlopra a rendezéshez; SARI és pozitivitási kontextussal.",tableBadge:"Akadálymentes táblázat",tableAria:"Heti táblázat",tableScrollAria:"Görgethető táblázat",tableWeek:"Hét",tableVirus:"Vírus",tableRegion:"Régió",tableCases:"Esetszám",tableSariAdmissions:"SARI felvételek",tableSariIcu:"SARI intenzív",tableTopPositivity:"Legmagasabb pozitivitás",tableNoData:"Nincs elérhető adat.",historicalTitle:"Történeti szezon összevetés",historicalEmptyHeader:"Válassz olyan szezont, amelyhez elérhető előző év.",historicalIli:"ILI összevetés",historicalSari:"SARI felvételek összevetése",historicalIcu:"SARI ICU összevetés",historicalDelta:"Legfrissebb eltérés: {value}",historicalUnavailable:"A történeti összevetés nem érhető el, mert hiányzik az előző szezon a betöltött adatforrásból.",warningsTitle:"Adat figyelmeztetések",noDataShort:"Nincs adat",regionNational:"Országos"}};function Ie(t){return String(t??"").toLowerCase().startsWith("hu")?"hu":"en"}function Rt(t){const s=String(t??"").toLowerCase();return s==="dark"?"dark":s==="light"?"light":"system"}function Dt(t){return t==="dark"||t==="light"?t:typeof window>"u"||typeof window.matchMedia!="function"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function O(t,s){return t.replace(/\{(\w+)\}/g,(n,i)=>String(s[i]??""))}function _(t,s="en"){if(typeof t!="number"||!Number.isFinite(t))return"-";const n=String(t).padStart(2,"0");return s==="hu"?`Hét ${n}`:`W${n}`}function Vt(t,s){const n=/^W(\d{1,2})$/i.exec(String(t??"").trim());if(!n)return t;const i=String(Number(n[1])).padStart(2,"0");return s==="hu"?`H${i}`:`W${i}`}function Ni(t){const s=String(t??"").trim().toLowerCase();return s?s===X.toLowerCase()||s.includes("influenza")||s.includes("flu-like")||s.startsWith("ili")?"influenza":s.includes("sars")||s.includes("cov")?"sarscov2":/\brsv\b/.test(s)?"rsv":s.includes("hmpv")||s.includes("metapneumo")?"hmpv":"other":"other"}function wi(t){return`pathogen-${Ni(t)}`}function Li(t,s){const n=t+1;return s==="hu"?`${t}/${n}`:`${t}/${n}`}function We(t,s){return s>=40?t:t+1}function Ae(t){return t>=40?t:t+53}function J(t,s){return Ae(t)-Ae(s)}function ji(t){return t<=53?t:t-53}function Ft(t){const s=Array.from(new Set(t.map(u=>Number(u)).filter(u=>Number.isFinite(u))));if(s.length<2)return[];const n=s.slice().sort(J),i=Ae(n[0]),a=Ae(n[n.length-1]),l=new Set(s),d=[];for(let u=i;u<=a;u+=1){const m=ji(u);l.has(m)||d.push(m)}return d}function Ii(t){if(!t.length)return 0;const s=t.slice().sort((i,a)=>i-a),n=Math.floor(s.length/2);return s.length%2===0?Math.round((s[n-1]+s[n])/2):s[n]}function Re(t,s){return Number.isFinite(s)?t.filter(n=>Number.isFinite(n.week)&&Number.isFinite(n.value)).filter(n=>J(n.week,s)<=0).reduce((n,i)=>n+i.value,0):null}function De(t){const s=t.filter(u=>Number.isFinite(u.week)&&Number.isFinite(u.value)).slice().sort((u,m)=>J(u.week,m.week));if(!s.length)return null;const n=s.reduce((u,m)=>m.value>u.value?m:u,s[0]),i=s[s.length-1],a=s.slice(Math.max(0,s.length-3)),l=a.length>=2?(a[a.length-1].value-a[0].value)/(a.length-1):null,d=n.value>0?i.value/n.value*100:null;return{peak:n,latest:i,pctOfPeak:d,slope:l}}function Ve(t){const s=t.filter(a=>Number.isFinite(a.week)&&Number.isFinite(a.value)).slice().sort((a,l)=>J(a.week,l.week));if(s.length<2)return null;const n=s[s.length-1].value,i=s[s.length-2].value;return!Number.isFinite(n)||!Number.isFinite(i)||i<=0?null:(n-i)/i*100}function Pt(t,s,n,i){if(!Number.isFinite(n))return{currentTotal:null,baselineCount:0,median:null,lastSeason:null,percentile:null};const a=t(s),l=Re(a,Number(n));if(typeof l!="number"||!Number.isFinite(l))return{currentTotal:null,baselineCount:0,median:null,lastSeason:null,percentile:null};const d=i.filter(p=>p<s).sort((p,v)=>p-v),u=d.map(p=>Re(t(p),Number(n))).filter(p=>typeof p=="number"&&Number.isFinite(p)&&p>0),m=d.length?d[d.length-1]:null,g=m==null?null:(()=>{const p=Re(t(m),Number(n));return Number.isFinite(p)?p:null})(),b=u.length>=2?Ii(u):null,f=u.length>=2?Math.round(u.filter(p=>p<=l).length/u.length*100):null;return{currentTotal:l,baselineCount:u.length,median:b,lastSeason:g,percentile:f}}function Bt(t,s){if(!Number.isFinite(t.currentTotal))return"–";const n=Number(t.currentTotal).toLocaleString();if(!t.baselineCount)return`${n} (${s.noBaseline})`;const i=[];return t.baselineCount>=2&&Number.isFinite(t.median)?i.push(`${s.median} ${Number(t.median).toLocaleString()}`):Number.isFinite(t.lastSeason)&&i.push(`${s.lastSeason} ${Number(t.lastSeason).toLocaleString()}`),t.percentile!=null&&i.push(`P${t.percentile}`),i.length?`${n} (${i.join(", ")})`:n}function zi(t,s){if(!t.length||!s.length)return null;const n=new Map(t.map(g=>[g.week,g.value])),i=s.map(g=>g.week).filter(g=>Number.isFinite(g)&&n.has(g)).sort((g,b)=>J(g,b));if(!i.length)return null;const a=i[i.length-1],l=Number(n.get(a)??0),d=s.find(g=>g.week===a),u=Number((d==null?void 0:d.admissions)??0),m=Number((d==null?void 0:d.icu)??0);return!Number.isFinite(l)||l<=0||!Number.isFinite(u)||u<=0?null:{week:a,sariPercent:u/l*100,icuShare:Number.isFinite(m)&&u>0?m/u*100:null}}function Fe(t,s){return t?`${_(t.week,s)}: ${Number(t.value).toLocaleString()}`:"–"}function Pe(t,s){if(!t)return"–";const n=`${_(t.latest.week,s)}: ${Number(t.latest.value).toLocaleString()}`;return Number.isFinite(t.pctOfPeak)?`${n} (${Math.round(Number(t.pctOfPeak))}%)`:n}function Be(t,s){if(!Number.isFinite(t))return"–";const n=Math.round(Number(t)),i=n>0?"+":"";return s==="hu"?`${i}${n.toLocaleString()}/hét`:`${i}${n.toLocaleString()}/week`}function Me(t){if(!Number.isFinite(t))return"0%";const s=Math.round(t);return`${s>0?"+":""}${s}%`}function ne(t){return wi(t)}function Mt({virus:t}){const s=ne(t);return e.jsx("span",{className:`virus-icon ${s}`,"aria-hidden":"true",children:e.jsxs("svg",{viewBox:"0 0 24 24",focusable:"false",children:[e.jsx("circle",{cx:"12",cy:"12",r:"4.5"}),e.jsx("line",{x1:"12",y1:"2.5",x2:"12",y2:"5.8"}),e.jsx("line",{x1:"12",y1:"18.2",x2:"12",y2:"21.5"}),e.jsx("line",{x1:"2.5",y1:"12",x2:"5.8",y2:"12"}),e.jsx("line",{x1:"18.2",y1:"12",x2:"21.5",y2:"12"}),e.jsx("line",{x1:"5.3",y1:"5.3",x2:"7.8",y2:"7.8"}),e.jsx("line",{x1:"16.2",y1:"16.2",x2:"18.7",y2:"18.7"}),e.jsx("line",{x1:"18.7",y1:"5.3",x2:"16.2",y2:"7.8"}),e.jsx("line",{x1:"7.8",y1:"16.2",x2:"5.3",y2:"18.7"})]})})}function Ai(t=820){const s=`(max-width: ${t}px)`,[n,i]=S.useState(()=>typeof window>"u"||typeof window.matchMedia!="function"?!1:window.matchMedia(s).matches);return S.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const a=window.matchMedia(s),l=d=>i(d.matches);return i(a.matches),a.addEventListener("change",l),()=>a.removeEventListener("change",l)},[s]),n}function Ti(){var ct,ut,dt,gt,ht,mt,pt;const t=Ai(),[s,n]=S.useState(()=>ze()),[i,a]=S.useState(()=>{if(typeof window>"u")return"en";const c=new URL(window.location.href).searchParams.get("lang");if(c)return Ie(c);const k=window.localStorage.getItem(Ct);return Ie(k||window.navigator.language)}),[l,d]=S.useState(()=>typeof window>"u"?"system":Rt(window.localStorage.getItem(Wt))),[u,m]=S.useState(()=>Dt("system")),[g,b]=S.useState(void 0),[f,p]=S.useState(ce),[v,E]=S.useState("week"),[h,w]=S.useState("asc"),[x,y]=S.useState(!0),[j,W]=S.useState(!0),[T,B]=S.useState(!0),[C,G]=S.useState(!0),[Y,ke]=S.useState(!0),[ae,Xt]=S.useState(!0),r=Si[i],D=u==="dark";S.useEffect(()=>{if(typeof window>"u")return;document.documentElement.lang=i,window.localStorage.setItem(Ct,i);const c=new URL(window.location.href);c.searchParams.set("lang",i),window.history.replaceState({},"",`${c.pathname}${c.search}${c.hash}`)},[i]),S.useEffect(()=>{if(typeof window>"u")return;window.localStorage.setItem(Wt,l);const c=()=>{const N=Dt(l);m(N),document.documentElement.setAttribute("data-theme",N)};if(c(),l!=="system"||typeof window.matchMedia!="function")return;const k=window.matchMedia("(prefers-color-scheme: dark)"),$=()=>c();return k.addEventListener("change",$),()=>k.removeEventListener("change",$)},[l]),S.useEffect(()=>{let c=!0;return(async()=>{try{const k=await hi();if(!c)return;n(k)}catch{if(!c)return;n(ze("Runtime loading failed; using bundled sample."))}finally{c&&y(!1)}})(),()=>{c=!1}},[]);const o=S.useMemo(()=>ri(s,g),[s,g]);S.useEffect(()=>{(g==null||!o.availableYears.includes(g))&&b(o.selectedYear)},[g,o.availableYears,o.selectedYear]),S.useEffect(()=>{f!==ce&&!o.virology.availableDetectionViruses.includes(f)&&p(ce)},[f,o.virology.availableDetectionViruses]);const es=S.useMemo(()=>fi({points:o.iliSeries,threshold:o.iliThreshold,compact:t,dark:D,labels:{iliCases:r.glanceIli,alertThreshold:r.alertThreshold,crossing:r.crossingLabel,noData:r.noDataShort,seasonStart:i==="hu"?"Szezonkezdet":"Season start",holidays:i==="hu"?"Ünnepi időszak":"Holiday period",weekPrefix:i==="hu"?"H":"W"}}),[t,D,i,o.iliSeries,o.iliThreshold,r.alertThreshold,r.crossingLabel,r.glanceIli,r.noDataShort]),ts=S.useMemo(()=>{const c=o.sariSeries.length>0,k=c?o.sariSeries[o.sariSeries.length-1].label:null,$=o.sariSeries.map(I=>I.admissions),N=o.sariSeries.map(I=>I.icu),z=D?{axisLabel:"#cbd5e1",axisLine:"rgba(148, 163, 184, 0.45)",grid:"rgba(148, 163, 184, 0.16)",legend:"#e2e8f0",legendBg:"rgba(15, 23, 42, 0.82)",legendBorder:"rgba(148, 163, 184, 0.32)",currentWeekLine:"rgba(125, 211, 252, 0.55)",tooltipBg:"rgba(15, 23, 42, 0.96)",tooltipBorder:"rgba(148, 163, 184, 0.48)",tooltipText:"#e2e8f0"}:{axisLabel:"#334155",axisLine:"rgba(15, 23, 42, 0.20)",grid:"rgba(15, 23, 42, 0.1)",legend:"#0f172a",legendBg:"rgba(248, 250, 252, 0.92)",legendBorder:"rgba(148, 163, 184, 0.38)",currentWeekLine:"rgba(37, 99, 235, 0.45)",tooltipBg:"rgba(15, 23, 42, 0.94)",tooltipBorder:"rgba(30, 41, 59, 0.24)",tooltipText:"#f8fafc"};return{animation:!1,grid:{top:t?40:78,right:18,bottom:34,left:54},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:z.currentWeekLine,type:"dashed",width:1.1}},backgroundColor:z.tooltipBg,borderColor:z.tooltipBorder,borderWidth:1,textStyle:{color:z.tooltipText,fontWeight:600},extraCssText:"box-shadow: 0 14px 30px rgba(2, 6, 23, 0.28);",formatter:I=>{const M=Array.isArray(I)?I:[];if(!M.length)return"";const H=M[0],L=Vt(H.axisValueLabel??"",i),A=M.map(K=>{const R=K,F=typeof R.data=="number"&&Number.isFinite(R.data)?R.data.toLocaleString():"–";return`${R.marker??""} ${R.seriesName??""}: ${F}`}).join("<br/>");return`${L}<br/>${A}`}},legend:{show:!t,top:2,left:8,right:8,itemWidth:12,itemHeight:8,itemGap:12,padding:[6,10],backgroundColor:z.legendBg,borderColor:z.legendBorder,borderWidth:1,borderRadius:10,textStyle:{color:z.legend,fontWeight:600,fontSize:12,lineHeight:16},icon:"circle"},xAxis:{type:"category",data:o.sariSeries.map(I=>I.label),boundaryGap:!1,axisLine:{lineStyle:{color:z.axisLine}},axisTick:{show:!1},axisLabel:{color:z.axisLabel,hideOverlap:!0,formatter:I=>Vt(String(I),i)}},yAxis:{type:"value",min:0,axisLabel:{color:z.axisLabel,formatter:I=>I.toLocaleString()},splitLine:{lineStyle:{color:z.grid,type:[4,5]}}},series:[{name:r.tableSariAdmissions,type:"line",data:c?$:[0],smooth:.22,showSymbol:!1,symbol:"circle",symbolSize:6,lineStyle:{width:2.8,color:D?"#7dd3fc":"#2563eb",cap:"round"},itemStyle:{color:D?"#7dd3fc":"#2563eb"},areaStyle:{color:new He(0,0,0,1,[{offset:0,color:D?"rgba(125, 211, 252, 0.34)":"rgba(59, 130, 246, 0.22)"},{offset:1,color:D?"rgba(56, 189, 248, 0.05)":"rgba(147, 197, 253, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3.4}},markLine:k?{symbol:["none","none"],silent:!0,lineStyle:{color:z.currentWeekLine,width:1.3,type:"dashed"},label:{show:!1},data:[{xAxis:k}]}:void 0,z:4},{name:r.tableSariIcu,type:"line",data:c?N:[0],smooth:.2,showSymbol:!1,symbol:"circle",symbolSize:6,lineStyle:{width:2.4,color:D?"#fb923c":"#dc2626",cap:"round"},itemStyle:{color:D?"#fb923c":"#dc2626"},areaStyle:{color:new He(0,0,0,1,[{offset:0,color:D?"rgba(251, 146, 60, 0.24)":"rgba(248, 113, 113, 0.18)"},{offset:1,color:D?"rgba(249, 115, 22, 0.04)":"rgba(252, 165, 165, 0.03)"}])},emphasis:{focus:"series",lineStyle:{width:3}},z:5}]}},[t,D,i,o.sariSeries,r.tableSariAdmissions,r.tableSariIcu]),ss=S.useMemo(()=>Tt({rows:o.virology.detectionRows,selectedVirus:f,compact:t,language:i,dark:D}),[t,D,i,f,o.virology.detectionRows]),is=S.useMemo(()=>$t({rows:o.virology.positivityRows,compact:t,language:i,dark:D}),[t,D,i,o.virology.positivityRows]),ns=S.useMemo(()=>Tt({rows:o.euVirology.detectionRows,selectedVirus:ce,compact:t,weekOrder:"season",language:i,dark:D}),[t,D,i,o.euVirology.detectionRows]),rs=S.useMemo(()=>$t({rows:o.euVirology.positivityRows,compact:t,weekOrder:"season",language:i,dark:D}),[t,D,i,o.euVirology.positivityRows]),Ze=S.useMemo(()=>{if(o.virology.latestWeek==null)return[];const c=o.virology.detectionRows.filter(N=>N.week===o.virology.latestWeek).filter(N=>f===ce||N.virus===f).slice().sort((N,z)=>z.detections-N.detections),k=c.find(N=>N.virus===X);return[...k?[k]:[],...c.filter(N=>N.virus!==X)].slice(0,6)},[f,o.virology.detectionRows,o.virology.latestWeek]),Je=S.useMemo(()=>o.virology.latestWeek==null?[]:o.virology.positivityRows.filter(c=>c.week===o.virology.latestWeek).slice().sort((c,k)=>k.positivity-c.positivity).slice(0,6),[o.virology.latestWeek,o.virology.positivityRows]),Qe=S.useMemo(()=>o.euVirology.latestWeek==null?[]:o.euVirology.detectionRows.filter(c=>c.week===o.euVirology.latestWeek).slice().sort((c,k)=>k.detections-c.detections).slice(0,6),[o.euVirology.detectionRows,o.euVirology.latestWeek]),Xe=S.useMemo(()=>o.euVirology.latestWeek==null?[]:o.euVirology.positivityRows.filter(c=>c.week===o.euVirology.latestWeek).slice().sort((c,k)=>k.positivity-c.positivity).slice(0,6),[o.euVirology.latestWeek,o.euVirology.positivityRows]),et=S.useMemo(()=>!o.historical.available||!o.historical.compareSeasonLabel?null:Ce({metric:o.historical.ili,compareSeasonLabel:o.historical.compareSeasonLabel,currentSeasonLabel:o.historical.currentSeasonLabel,compact:t,dark:D,language:i,labels:{noData:r.noDataShort}}),[t,D,i,o.historical,r.noDataShort]),tt=S.useMemo(()=>!o.historical.available||!o.historical.compareSeasonLabel?null:Ce({metric:o.historical.sariAdmissions,compareSeasonLabel:o.historical.compareSeasonLabel,currentSeasonLabel:o.historical.currentSeasonLabel,compact:t,dark:D,language:i,labels:{noData:r.noDataShort}}),[t,D,i,o.historical,r.noDataShort]),st=S.useMemo(()=>!o.historical.available||!o.historical.compareSeasonLabel?null:Ce({metric:o.historical.sariIcu,compareSeasonLabel:o.historical.compareSeasonLabel,currentSeasonLabel:o.historical.currentSeasonLabel,compact:t,dark:D,language:i,labels:{noData:r.noDataShort}}),[t,D,i,o.historical,r.noDataShort]),te=S.useMemo(()=>{if(!o.virology.positivityRows.length)return null;const c=o.virology.positivityRows.reduce((N,z)=>J(z.week,N)>0?z.week:N,o.virology.positivityRows[0].week),k=o.virology.positivityRows.filter(N=>N.week===c);if(!k.length)return null;const $=k.reduce((N,z)=>z.positivity>N.positivity?z:N,k[0]);return{week:c,virus:$.virus,positivity:$.positivity}},[o.virology.positivityRows]),ee=S.useMemo(()=>{if(o.euVirology.targetYear==null||!o.euVirology.positivityRows.length)return null;const c=o.euVirology.positivityRows.reduce((N,z)=>J(z.week,N)>0?z.week:N,o.euVirology.positivityRows[0].week),k=o.euVirology.positivityRows.filter(N=>N.week===c);if(!k.length)return null;const $=k.reduce((N,z)=>z.positivity>N.positivity?z:N,k[0]);return{year:We(o.euVirology.targetYear,c),week:c,virus:$.virus,positivity:$.positivity}},[o.euVirology.positivityRows,o.euVirology.targetYear]),as=o.iliSeries.length?_(o.iliSeries[o.iliSeries.length-1].week,i):"–",os=o.sariSeries.length?_(o.sariSeries[o.sariSeries.length-1].week,i):"–",it=S.useMemo(()=>Ft(o.iliSeries.map(c=>c.week)),[o.iliSeries]),nt=S.useMemo(()=>Ft(o.sariSeries.map(c=>c.week)),[o.sariSeries]),V=S.useMemo(()=>{const c=o.iliSeries.map(A=>({week:A.week,value:A.cases})),k=o.sariSeries.map(A=>({week:A.week,value:A.admissions})),$=o.sariSeries.map(A=>({week:A.week,value:A.icu})),N=De(c),z=De(k),I=De($),M=A=>{const K=new Map;for(const R of s.respiratoryData.weekly){const F=Number(R.year);if(!Number.isFinite(F)||F!==A||(R.dataset??Et)!==Et||(R.virus??je)!==je)continue;const pe=Number(R.week);if(!Number.isFinite(pe))continue;const Ne=Number(R.cases??0);Number.isFinite(Ne)&&K.set(pe,(K.get(pe)??0)+Ne)}return Array.from(K.entries()).sort((R,F)=>J(R[0],F[0])).map(([R,F])=>({week:R,value:F}))},H=A=>{const K=new Map;for(const R of s.respiratoryData.sariWeekly){const F=Number(R.year);if(!Number.isFinite(F)||F!==A)continue;const se=Number(R.week);if(!Number.isFinite(se))continue;const me=Number(R.admissions??0);Number.isFinite(me)&&K.set(se,(K.get(se)??0)+me)}return Array.from(K.entries()).sort((R,F)=>J(R[0],F[0])).map(([R,F])=>({week:R,value:F}))},L=zi(c,o.sariSeries.map(A=>({week:A.week,admissions:A.admissions,icu:A.icu})));return{iliGlance:N,sariGlance:z,icuGlance:I,iliWow:Ve(c),sariWow:Ve(k),icuWow:Ve($),weeksAboveThreshold:c.filter(A=>A.value>=o.iliThreshold).length,iliSeasonToDate:Pt(M,o.selectedYear,(N==null?void 0:N.latest.week)??null,o.availableYears),sariSeasonToDate:Pt(H,o.selectedYear,(z==null?void 0:z.latest.week)??null,o.availableYears),severity:L}},[s.respiratoryData.sariWeekly,s.respiratoryData.weekly,o.availableYears,o.iliSeries,o.iliThreshold,o.sariSeries,o.selectedYear]),U=S.useMemo(()=>{const c=o.iliSeries.length?o.iliSeries[o.iliSeries.length-1]:null;if(!c)return null;const k=o.historical.ili.points.find(I=>I.week===c.week)??null,$=k&&typeof k.previous=="number"&&Number.isFinite(k.previous)?k.previous:null,N=$!=null&&$!==0?(c.cases-$)/$*100:null,z=N==null?"flat":N>0?"surging":N<0?"declining":"flat";return{week:c.week,currentCases:c.cases,previousCases:$,deltaPercent:N,direction:z}},[o.historical.ili.points,o.iliSeries]),rt=S.useMemo(()=>{const c=[],k=o.iliSeries.map(L=>({week:L.week,value:L.cases})).filter(L=>Number.isFinite(L.week)&&Number.isFinite(L.value)).sort((L,A)=>J(L.week,A.week)),$=k[k.length-1],N=k[k.length-2];if($&&N){const L=N.value>0?($.value-N.value)/N.value*100:0,A=L>0?"surging":L<0?"declining":"flat";c.push({virus:je,label:Me(L),change:L,week:$.week,direction:A})}const z=o.virology.positivityRows.filter(L=>L.virus!==X).filter(L=>Number.isFinite(L.week)&&Number.isFinite(L.positivity));if(!z.length)return c;const I=z.reduce((L,A)=>J(A.week,L)>0?A.week:L,z[0].week),M=z.filter(L=>L.week===I).slice().sort((L,A)=>A.positivity-L.positivity).map(L=>L.virus),H=new Map;for(const L of z){const A=H.get(L.virus)??[];A.push({week:L.week,positivity:L.positivity}),H.set(L.virus,A)}for(const L of M){if(c.length>=4)break;const A=H.get(L);if(!A||A.length<2)continue;const K=A.slice().sort((pe,Ne)=>J(pe.week,Ne.week)),R=K[K.length-1],F=K[K.length-2];if(!R||!F)continue;const se=F.positivity>0?(R.positivity-F.positivity)/F.positivity*100:0,me=se>0?"surging":se<0?"declining":"flat";c.push({virus:L,label:Me(se),change:se,week:R.week,direction:me})}return c.slice(0,4)},[o.iliSeries,o.virology.positivityRows]),Te=S.useMemo(()=>{const c=new Map;for(const k of o.virology.positivityRows){const $=c.get(k.week);(!$||k.positivity>$.positivity)&&c.set(k.week,{virus:k.virus,positivity:k.positivity})}return c},[o.virology.positivityRows]),at=S.useMemo(()=>{const c=new Map(o.iliSeries.map(I=>[I.week,I.cases])),k=new Map(o.sariSeries.map(I=>[I.week,{admissions:I.admissions,icu:I.icu}])),$=new Set;for(const I of c.keys())$.add(I);for(const I of k.keys())$.add(I);for(const I of Te.keys())$.add(I);for(const I of o.virology.detectionRows)$.add(I.week);const N=Array.from($).map(I=>{const M=k.get(I),H=Te.get(I);return{week:I,virus:je,region:"National",cases:c.get(I)??null,sariAdmissions:(M==null?void 0:M.admissions)??null,sariIcu:(M==null?void 0:M.icu)??null,topPositivityVirus:(H==null?void 0:H.virus)??null,topPositivity:(H==null?void 0:H.positivity)??null}}),z=h==="asc"?1:-1;return N.sort((I,M)=>{if(v==="week"){const L=J(I.week,M.week);if(L!==0)return L*z}else{const L=Number(I.cases??0)-Number(M.cases??0);if(L!==0)return L*z}const H=J(I.week,M.week);return H!==0?H:I.virus.localeCompare(M.virus)})},[o.iliSeries,o.sariSeries,o.virology.detectionRows,v,h,Te]),ls=v==="week"?h==="asc"?"ascending":"descending":"none",cs=v==="cases"?h==="asc"?"ascending":"descending":"none",us=v==="week"?h==="asc"?"▲":"▼":"",ds=v==="cases"?h==="asc"?"▲":"▼":"",xe=c=>{if(v===c){w(k=>k==="asc"?"desc":"asc");return}E(c),w("asc")},Se=o.stats.latestIliCases>=o.iliThreshold,gs=Se?"critical":"ok",hs=Se?r.signalEpidemicYes:r.signalEpidemicNo,ms=O(Se?r.fluTextAbove:r.fluTextBelow,{week:_(o.stats.latestWeek,i),cases:o.stats.latestIliCases.toLocaleString(),threshold:o.iliThreshold.toLocaleString()}),ps=s.source==="nngyk_all"?"live":"sample",fs=s.source==="nngyk_all"?r.sourceLive:r.sourceFallback,$e=o.virology.latestWeek==null?"–":_(o.virology.latestWeek,i),ot=o.euVirology.targetYear==null?"–":Li(o.euVirology.targetYear,i),lt=o.euVirology.targetYear!=null&&o.euVirology.latestWeek!=null?i==="hu"?`${We(o.euVirology.targetYear,o.euVirology.latestWeek)} · ${_(o.euVirology.latestWeek,i)}`:`${We(o.euVirology.targetYear,o.euVirology.latestWeek)}-${_(o.euVirology.latestWeek,i)}`:"–",bs=te?O(r.leaderHuText,{week:_(te.week,i),virus:q(te.virus,i),pos:te.positivity.toFixed(1)}):r.alertsLoadingPos,vs=te?q(te.virus,i):r.noDataShort,ys=ne(te==null?void 0:te.virus),ks=ee?O(r.leaderEuText,{week:_(ee.week,i),year:ee.year,virus:q(ee.virus,i),pos:ee.positivity.toFixed(1)}):r.alertsLoadingEuPos,xs=ee?q(ee.virus,i):r.noDataShort,Ss=ne(ee==null?void 0:ee.virus);return e.jsxs("div",{className:`app-shell theme-${u}`,children:[e.jsxs("header",{className:"topbar",children:[e.jsxs("div",{children:[e.jsx("h1",{children:r.appTitle}),e.jsx("p",{className:"subtitle",children:r.appSubtitle})]}),e.jsxs("div",{className:"controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"year-select",children:r.season}),e.jsx("select",{id:"year-select",value:o.selectedYear,onChange:c=>b(Number(c.target.value)),children:o.availableYears.map(c=>e.jsxs("option",{value:c,children:[c,"-",c+1]},c))})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"lang-select",children:r.language}),e.jsxs("select",{id:"lang-select",value:i,onChange:c=>a(Ie(c.target.value)),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hu",children:"Magyar"})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{htmlFor:"theme-select",children:r.theme}),e.jsxs("select",{id:"theme-select",value:l,onChange:c=>d(Rt(c.target.value)),children:[e.jsx("option",{value:"system",children:r.themeSystem}),e.jsx("option",{value:"dark",children:r.themeDark}),e.jsx("option",{value:"light",children:r.themeLight})]})]})]})]}),e.jsxs("section",{className:"alerts-grid","aria-label":r.alertsAria,children:[e.jsxs("article",{className:`alert-card primary epidemic ${gs}`,role:"status","aria-live":"polite",children:[e.jsxs("h2",{children:[Se?e.jsx("span",{className:"alert-status-icon","aria-hidden":"true",children:"!"}):null,e.jsx("span",{children:hs})]}),e.jsx("p",{children:ms})]}),e.jsxs("article",{className:`alert-card leader summary ${ys}`,role:"status","aria-live":"polite",children:[e.jsx("h2",{children:r.leaderHuTitle}),e.jsxs("div",{className:"alert-emphasis-row",children:[te?e.jsx(Mt,{virus:te.virus}):null,e.jsx("strong",{className:"alert-emphasis",children:vs})]}),e.jsx("p",{children:bs})]}),e.jsxs("article",{className:`alert-card leader summary ${Ss}`,role:"status","aria-live":"polite",children:[e.jsx("h2",{children:r.leaderEuTitle}),e.jsxs("div",{className:"alert-emphasis-row",children:[ee?e.jsx(Mt,{virus:ee.virus}):null,e.jsx("strong",{className:"alert-emphasis",children:xs})]}),e.jsx("p",{children:ks})]})]}),e.jsxs("section",{className:"region-block hu-block","aria-label":r.sectionHuTitle,children:[e.jsxs("section",{className:"region-divider hu","aria-label":r.sectionHuTitle,children:[e.jsxs("div",{className:"region-divider-main",children:[e.jsx("span",{className:"region-divider-kicker",children:r.sectionKicker}),e.jsxs("div",{children:[e.jsx("h2",{children:r.sectionHuTitle}),e.jsx("p",{children:r.sectionHuNote})]})]}),e.jsxs("button",{type:"button",className:"section-toggle region-toggle","aria-expanded":Y,"aria-controls":"hu-region-content","aria-label":`${Y?r.sectionCollapse:r.sectionExpand}: ${r.sectionHuTitle}`,onClick:()=>ke(c=>!c),children:[e.jsx("span",{className:`section-toggle-icon ${Y?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:Y?r.sectionCollapse:r.sectionExpand})]})]}),Y?e.jsxs("div",{id:"hu-region-content",className:"region-content",children:[e.jsxs("section",{className:"briefing-grid",children:[e.jsxs("section",{className:"surge-section","aria-label":r.trendAria,children:[e.jsxs("header",{className:"surge-header",children:[e.jsx("h2",{children:r.trendTitle}),e.jsx("p",{children:r.trendNote})]}),e.jsx("ul",{className:"surge-list",children:rt.length?rt.map(c=>e.jsxs("li",{className:`surge-item trend-${c.direction}`,children:[e.jsxs("div",{children:[e.jsxs("span",{className:`pathogen-name ${ne(c.virus)}`,children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),e.jsx("strong",{children:q(c.virus,i)})]}),e.jsx("span",{children:c.week!=null?_(c.week,i):"–"})]}),e.jsx("span",{className:"pill",children:c.label})]},`${c.virus}-${c.week??"na"}`)):e.jsx("li",{className:"surge-empty",children:r.trendEmpty})})]}),e.jsxs("section",{className:"stats-grid briefing-stats-grid",children:[e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsTotalIli}),e.jsx("strong",{children:o.stats.totalIliCases.toLocaleString()})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsPeakIli}),e.jsxs("strong",{children:[_(o.stats.peakIliWeek,i)," / ",((ct=o.stats.peakIliCases)==null?void 0:ct.toLocaleString())??"-"]})]}),e.jsxs("article",{className:"stat-card stat-card-ili-compare",children:[e.jsxs("div",{className:"stat-card-ili-head",children:[e.jsx("h3",{children:r.statsIliVsPrev}),e.jsx("span",{className:"stat-week-chip",children:U?_(U.week,i):"–"})]}),e.jsxs("div",{className:"stat-card-ili-main",children:[e.jsx("strong",{children:U?U.currentCases.toLocaleString():"–"}),(U==null?void 0:U.deltaPercent)!=null&&U.previousCases!=null?e.jsx("span",{className:`stat-delta-pill trend-${U.direction}`,children:Me(U.deltaPercent)}):null]}),e.jsx("p",{className:"stat-compare-baseline",children:(U==null?void 0:U.deltaPercent)!=null&&U.previousCases!=null?O(r.statsIliVsPrevBaseline,{season:o.historical.compareSeasonLabel??String(o.selectedYear-1),value:U.previousCases.toLocaleString()}):r.statsIliVsPrevNoBaseline})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsFirstCrossing}),e.jsx("strong",{children:_(o.stats.firstIliThresholdCrossingWeek,i)})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsWeeksAbove}),e.jsx("strong",{children:o.stats.weeksAboveIliThreshold.toLocaleString()})]}),e.jsxs("article",{className:"stat-card",children:[e.jsx("h3",{children:r.statsLatestSari}),e.jsxs("strong",{children:[o.stats.latestSariAdmissions??"-"," / ",o.stats.latestSariIcu??"-"]})]})]})]}),e.jsxs("section",{className:"charts-grid",children:[e.jsx(ie,{title:r.chartIli,subtitle:O(r.chartIliSubtitle,{season:o.seasonLabel,threshold:o.iliThreshold.toLocaleString()}),option:es}),e.jsx(ie,{title:r.chartSari,subtitle:O(r.chartSariSubtitle,{season:o.seasonLabel}),option:ts})]}),e.jsxs("section",{className:"historical-section",children:[e.jsxs("header",{className:"historical-header",children:[e.jsx("h2",{children:r.historicalTitle}),o.historical.available&&o.historical.compareSeasonLabel?e.jsx("p",{children:i==="hu"?`${o.historical.currentSeasonLabel} összevetve: ${o.historical.compareSeasonLabel}`:`${o.historical.currentSeasonLabel} vs ${o.historical.compareSeasonLabel}`}):e.jsx("p",{children:r.historicalEmptyHeader})]}),o.historical.available&&o.historical.compareSeasonLabel&&et&&tt&&st?e.jsxs("div",{className:"historical-grid",children:[e.jsx(ie,{title:r.historicalIli,subtitle:O(r.historicalDelta,{value:ge(o.historical.ili.latestDeltaPercent)}),option:et}),e.jsx(ie,{title:r.historicalSari,subtitle:O(r.historicalDelta,{value:ge(o.historical.sariAdmissions.latestDeltaPercent)}),option:tt}),e.jsx(ie,{title:r.historicalIcu,subtitle:O(r.historicalDelta,{value:ge(o.historical.sariIcu.latestDeltaPercent)}),option:st})]}):e.jsx("article",{className:"historical-empty",children:r.historicalUnavailable})]}),e.jsxs("section",{className:"virology-section collapsible-section",children:[e.jsxs("header",{className:"virology-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.virologyTitle}),e.jsx("p",{children:O(r.virologyWeek,{week:$e})})]}),e.jsxs("div",{className:"virology-header-actions",children:[e.jsxs("div",{className:"virology-controls",children:[e.jsx("label",{htmlFor:"virology-virus-select",children:r.virologyFilter}),e.jsxs("select",{id:"virology-virus-select",value:f,onChange:c=>p(c.target.value),children:[e.jsx("option",{value:ce,children:r.virologyAllViruses}),o.virology.availableDetectionViruses.map(c=>e.jsx("option",{value:c,children:q(c,i)},c))]})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":j,"aria-controls":"sentinel-virology-content","aria-label":`${j?r.sectionCollapse:r.sectionExpand}: ${r.virologyTitle}`,onClick:()=>W(c=>!c),children:[e.jsx("span",{className:`section-toggle-icon ${j?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:j?r.sectionCollapse:r.sectionExpand})]})]})]}),j?e.jsxs("div",{id:"sentinel-virology-content",className:"section-content",children:[e.jsxs("div",{className:"virology-grid",children:[e.jsx(ie,{title:r.virologyDetectionsTrend,subtitle:O(r.virologyDetectionsSubtitle,{week:$e}),option:ss}),e.jsx(ie,{title:r.virologyPositivityTrend,subtitle:O(r.virologyDetectionsSubtitle,{week:$e}),option:is})]}),e.jsxs("div",{className:"virology-lists",children:[e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.virologyTopDetections}),Ze.length?e.jsx("ul",{children:Ze.map(c=>e.jsxs("li",{className:ne(c.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),q(c.virus,i)]}),e.jsx("strong",{children:c.detections.toLocaleString()})]},`${c.virus}-${c.week}`))}):e.jsx("p",{className:"virology-empty",children:r.virologyNoDetections})]}),e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.virologyTopPositivity}),Je.length?e.jsx("ul",{children:Je.map(c=>e.jsxs("li",{className:ne(c.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),q(c.virus,i)]}),e.jsxs("strong",{children:[c.positivity.toFixed(1),"%"]})]},`${c.virus}-${c.week}`))}):e.jsx("p",{className:"virology-empty",children:r.virologyNoPositivity})]})]})]}):null]}),e.jsxs("section",{className:"glance-section collapsible-section","aria-label":r.glanceAria,children:[e.jsxs("header",{className:"glance-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.glanceTitle}),e.jsx("p",{children:r.glanceNote})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":T,"aria-controls":"season-glance-content","aria-label":`${T?r.sectionCollapse:r.sectionExpand}: ${r.glanceTitle}`,onClick:()=>B(c=>!c),children:[e.jsx("span",{className:`section-toggle-icon ${T?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:T?r.sectionCollapse:r.sectionExpand})]})]}),T?e.jsxs("div",{id:"season-glance-content",className:"glance-grid",children:[e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceIli}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:Fe(((ut=V.iliGlance)==null?void 0:ut.peak)??null,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:Pe(V.iliGlance,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:Be(((dt=V.iliGlance)==null?void 0:dt.slope)??null,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:ge(V.iliWow)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWeeksAbove}),e.jsx("span",{className:"glance-value",children:o.iliSeries.length?V.weeksAboveThreshold.toLocaleString():"–"})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceSari}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:Fe(((gt=V.sariGlance)==null?void 0:gt.peak)??null,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:Pe(V.sariGlance,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:Be(((ht=V.sariGlance)==null?void 0:ht.slope)??null,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:ge(V.sariWow)})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceIcu}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glancePeak}),e.jsx("span",{className:"glance-value",children:Fe(((mt=V.icuGlance)==null?void 0:mt.peak)??null,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceLatest}),e.jsx("span",{className:"glance-value",children:Pe(V.icuGlance,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSlope}),e.jsx("span",{className:"glance-value",children:Be(((pt=V.icuGlance)==null?void 0:pt.slope)??null,i)})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceWow}),e.jsx("span",{className:"glance-value",children:ge(V.icuWow)})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceStdTitle}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceStdIli}),e.jsx("span",{className:"glance-value",children:Bt(V.iliSeasonToDate,{noBaseline:r.stdNoBaseline,median:r.stdMedian,lastSeason:r.stdLastSeason})})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceStdSari}),e.jsx("span",{className:"glance-value",children:Bt(V.sariSeasonToDate,{noBaseline:r.stdNoBaseline,median:r.stdMedian,lastSeason:r.stdLastSeason})})]})]}),e.jsxs("article",{className:"glance-card",children:[e.jsx("h3",{children:r.glanceSeverityTitle}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSeveritySari}),e.jsx("span",{className:"glance-value",children:V.severity?`${_(V.severity.week,i)}: ${V.severity.sariPercent.toFixed(1)}%`:"–"})]}),e.jsxs("div",{className:"glance-row",children:[e.jsx("span",{className:"glance-key",children:r.glanceSeverityIcu}),e.jsx("span",{className:"glance-value",children:V.severity&&Number.isFinite(V.severity.icuShare)?`${_(V.severity.week,i)}: ${Number(V.severity.icuShare).toFixed(1)}%`:"–"})]})]})]}):null]}),e.jsxs("section",{className:"table-section collapsible-section","aria-label":r.tableAria,children:[e.jsxs("header",{className:"table-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:r.tableTitle}),e.jsx("p",{children:r.tableNote})]}),e.jsxs("button",{type:"button",className:"section-toggle","aria-expanded":C,"aria-controls":"weekly-table-content","aria-label":`${C?r.sectionCollapse:r.sectionExpand}: ${r.tableTitle}`,onClick:()=>G(c=>!c),children:[e.jsx("span",{className:`section-toggle-icon ${C?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:C?r.sectionCollapse:r.sectionExpand})]})]}),C?e.jsx("div",{id:"weekly-table-content",className:"table-scroll",role:"region","aria-label":r.tableScrollAria,children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{scope:"col",className:"sortable",tabIndex:0,"aria-sort":ls,onClick:()=>xe("week"),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),xe("week"))},children:[e.jsx("span",{children:r.tableWeek}),e.jsx("span",{className:"sort-indicator","aria-hidden":"true",children:us})]}),e.jsx("th",{scope:"col",children:r.tableVirus}),e.jsx("th",{scope:"col",children:r.tableRegion}),e.jsxs("th",{scope:"col",className:"sortable",tabIndex:0,"aria-sort":cs,onClick:()=>xe("cases"),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),xe("cases"))},children:[e.jsx("span",{children:r.tableCases}),e.jsx("span",{className:"sort-indicator","aria-hidden":"true",children:ds})]}),e.jsx("th",{scope:"col",children:r.tableSariAdmissions}),e.jsx("th",{scope:"col",children:r.tableSariIcu}),e.jsx("th",{scope:"col",children:r.tableTopPositivity})]})}),e.jsx("tbody",{children:at.length?at.map(c=>e.jsxs("tr",{children:[e.jsx("td",{children:_(c.week,i)}),e.jsx("td",{children:q(c.virus,i)}),e.jsx("td",{children:c.region==="National"?r.regionNational:c.region}),e.jsx("td",{children:Number.isFinite(c.cases)?Number(c.cases).toLocaleString():"–"}),e.jsx("td",{children:Number.isFinite(c.sariAdmissions)?Number(c.sariAdmissions).toLocaleString():"–"}),e.jsx("td",{children:Number.isFinite(c.sariIcu)?Number(c.sariIcu).toLocaleString():"–"}),e.jsx("td",{children:c.topPositivityVirus&&Number.isFinite(c.topPositivity)?e.jsxs("span",{className:`table-top-positivity ${ne(c.topPositivityVirus)}`,children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),e.jsxs("span",{children:[q(c.topPositivityVirus,i)," (",Number(c.topPositivity).toFixed(1),"%)"]})]}):"–"})]},c.week)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:r.tableNoData})})})]})}):null]})]}):null]}),e.jsxs("section",{className:"region-block eu-block","aria-label":r.sectionEuTitle,children:[e.jsxs("section",{className:"region-divider eu","aria-label":r.sectionEuTitle,children:[e.jsxs("div",{className:"region-divider-main",children:[e.jsx("span",{className:"region-divider-kicker",children:r.sectionKicker}),e.jsxs("div",{children:[e.jsx("h2",{children:r.sectionEuTitle}),e.jsx("p",{children:r.sectionEuNote})]})]}),e.jsxs("button",{type:"button",className:"section-toggle region-toggle","aria-expanded":ae,"aria-controls":"eu-region-content","aria-label":`${ae?r.sectionCollapse:r.sectionExpand}: ${r.sectionEuTitle}`,onClick:()=>Xt(c=>!c),children:[e.jsx("span",{className:`section-toggle-icon ${ae?"open":""}`,"aria-hidden":"true",children:"▾"}),e.jsx("span",{children:ae?r.sectionCollapse:r.sectionExpand})]})]}),ae?e.jsx("div",{id:"eu-region-content",className:"region-content",children:e.jsxs("section",{className:"virology-section eu-section",children:[e.jsx("header",{className:"virology-header",children:e.jsxs("div",{children:[e.jsx("h2",{children:r.euVirologyTitle}),e.jsx("p",{children:O(r.virologyWeek,{week:lt})})]})}),e.jsxs("div",{className:"virology-grid",children:[e.jsx(ie,{title:r.euDetectionsTrend,subtitle:O(r.euTrendSubtitle,{season:ot}),option:ns}),e.jsx(ie,{title:r.euPositivityTrend,subtitle:O(r.euTrendSubtitle,{season:ot}),option:rs})]}),e.jsxs("div",{className:"virology-lists eu-summary-lists",children:[e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.euTopDetections}),Qe.length?e.jsx("ul",{children:Qe.map(c=>e.jsxs("li",{className:ne(c.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),q(c.virus,i)]}),e.jsx("strong",{children:c.detections.toLocaleString()})]},`${c.virus}-${c.week}`))}):e.jsx("p",{className:"virology-empty",children:r.euNoDetections})]}),e.jsxs("article",{className:"virology-list-card compact",children:[e.jsx("h3",{children:r.euTopPositivity}),Xe.length?e.jsx("ul",{children:Xe.map(c=>e.jsxs("li",{className:ne(c.virus),children:[e.jsxs("span",{className:"pathogen-name",children:[e.jsx("span",{className:"virus-dot","aria-hidden":"true"}),q(c.virus,i)]}),e.jsxs("strong",{children:[c.positivity.toFixed(1),"%"]})]},`${c.virus}-${c.week}`))}):e.jsx("p",{className:"virology-empty",children:r.euNoPositivity})]})]})]})}):null]}),e.jsxs("footer",{className:"dashboard-footer","aria-label":r.coverageAria,children:[e.jsxs("div",{className:"footer-strip",role:"status","aria-live":"polite",children:[e.jsxs("span",{className:`footer-chip source ${ps}`,children:[fs,x?` (${r.sourceLoading})`:""]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageNngyk,": ",as]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageSari,": ",os]}),e.jsxs("span",{className:"footer-chip",children:[r.coverageErviss,": ",lt]}),e.jsxs("span",{className:`footer-chip ${it.length+nt.length?"warn":"ok"}`,children:[r.coverageMissing,": ",it.length,"/",nt.length]})]}),o.warnings.length?e.jsxs("p",{className:"footer-warnings-inline",children:[e.jsxs("strong",{children:[r.warningsTitle,":"]})," ",o.warnings.join(" · ")]}):null]})]})}Ns.createRoot(document.getElementById("root")).render(e.jsx(ws.StrictMode,{children:e.jsx(Ti,{})}));
